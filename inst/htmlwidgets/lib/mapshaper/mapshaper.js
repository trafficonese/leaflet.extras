!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(b){b.mapshaper=a("mapshaper")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{mapshaper:30}],2:[function(a,b,c){},{}],3:[function(a,b,c){"use strict";function j(a){var b=a.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===a[b-2]?2:"="===a[b-1]?1:0}function k(a){return 3*a.length/4-j(a)}function l(a){var b,c,d,g,h,i,k=a.length;h=j(a),i=new f(3*k/4-h),d=h>0?k-4:k;var l=0;for(b=0,c=0;b<d;b+=4,c+=3)g=e[a.charCodeAt(b)]<<18|e[a.charCodeAt(b+1)]<<12|e[a.charCodeAt(b+2)]<<6|e[a.charCodeAt(b+3)],i[l++]=g>>16&255,i[l++]=g>>8&255,i[l++]=255&g;return 2===h?(g=e[a.charCodeAt(b)]<<2|e[a.charCodeAt(b+1)]>>4,i[l++]=255&g):1===h&&(g=e[a.charCodeAt(b)]<<10|e[a.charCodeAt(b+1)]<<4|e[a.charCodeAt(b+2)]>>2,i[l++]=g>>8&255,i[l++]=255&g),i}function m(a){return d[a>>18&63]+d[a>>12&63]+d[a>>6&63]+d[63&a]}function n(a,b,c){for(var d,e=[],f=b;f<c;f+=3)d=(a[f]<<16)+(a[f+1]<<8)+a[f+2],e.push(m(d));return e.join("")}function o(a){for(var b,c=a.length,e=c%3,f="",g=[],h=16383,i=0,j=c-e;i<j;i+=h)g.push(n(a,i,i+h>j?j:i+h));return 1===e?(b=a[c-1],f+=d[b>>2],f+=d[b<<4&63],f+="=="):2===e&&(b=(a[c-2]<<8)+a[c-1],f+=d[b>>10],f+=d[b>>4&63],f+=d[b<<2&63],f+="="),g.push(f),g.join("")}c.byteLength=k,c.toByteArray=l,c.fromByteArray=o;for(var d=[],e=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,i=g.length;h<i;++h)d[h]=g[h],e[g.charCodeAt(h)]=h;e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63},{}],4:[function(a,b,c){arguments[4][2][0].apply(c,arguments)},{dup:2}],5:[function(a,b,c){(function(b){"use strict";var d=a("buffer"),e=d.Buffer,f=d.SlowBuffer,g=d.kMaxLength||2147483647;c.alloc=function(b,c,d){if("function"==typeof e.alloc)return e.alloc(b,c,d);if("number"==typeof d)throw new TypeError("encoding must not be number");if("number"!=typeof b)throw new TypeError("size must be a number");if(b>g)throw new RangeError("size is too large");var f=d,h=c;void 0===h&&(f=void 0,h=0);var i=new e(b);if("string"==typeof h)for(var j=new e(h,f),k=j.length,l=-1;++l<b;)i[l]=j[l%k];else i.fill(h);return i},c.allocUnsafe=function(b){if("function"==typeof e.allocUnsafe)return e.allocUnsafe(b);if("number"!=typeof b)throw new TypeError("size must be a number");if(b>g)throw new RangeError("size is too large");return new e(b)},c.from=function(c,d,f){if("function"==typeof e.from&&(!b.Uint8Array||Uint8Array.from!==e.from))return e.from(c,d,f);if("number"==typeof c)throw new TypeError('"value" argument must not be a number');if("string"==typeof c)return new e(c,d);if("undefined"!=typeof ArrayBuffer&&c instanceof ArrayBuffer){var g=d;if(1===arguments.length)return new e(c);"undefined"==typeof g&&(g=0);var h=f;if("undefined"==typeof h&&(h=c.byteLength-g),g>=c.byteLength)throw new RangeError("'offset' is out of bounds");if(h>c.byteLength-g)throw new RangeError("'length' is out of bounds");return new e(c.slice(g,g+h))}if(e.isBuffer(c)){var i=new e(c.length);return c.copy(i,0,0,c.length),i}if(c){if(Array.isArray(c)||"undefined"!=typeof ArrayBuffer&&c.buffer instanceof ArrayBuffer||"length"in c)return new e(c);if("Buffer"===c.type&&Array.isArray(c.data))return new e(c.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},c.allocUnsafeSlow=function(b){if("function"==typeof e.allocUnsafeSlow)return e.allocUnsafeSlow(b);if("number"!=typeof b)throw new TypeError("size must be a number");if(b>=g)throw new RangeError("size is too large");return new f(b)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:6}],6:[function(a,b,c){(function(b){"use strict";function g(){try{var a=new Uint8Array(1);return a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===a.foo()&&"function"==typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(a){return!1}}function h(){return j.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(a,b){if(h()<b)throw new RangeError("Invalid typed array length");return j.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=j.prototype):(null===a&&(a=new j(b)),a.length=b),a}function j(a,b,c){if(!(j.TYPED_ARRAY_SUPPORT||this instanceof j))return new j(a,b,c);if("number"==typeof a){if("string"==typeof b)throw new Error("If encoding is specified then the first argument must be a string");return n(this,a)}return k(this,a,b,c)}function k(a,b,c,d){if("number"==typeof b)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&b instanceof ArrayBuffer?q(a,b,c,d):"string"==typeof b?o(a,b,c):r(a,b)}function l(a){if("number"!=typeof a)throw new TypeError('"size" argument must be a number');if(a<0)throw new RangeError('"size" argument must not be negative')}function m(a,b,c,d){return l(b),b<=0?i(a,b):void 0!==c?"string"==typeof d?i(a,b).fill(c,d):i(a,b).fill(c):i(a,b)}function n(a,b){if(l(b),a=i(a,b<0?0:0|s(b)),!j.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function o(a,b,c){if("string"==typeof c&&""!==c||(c="utf8"),!j.isEncoding(c))throw new TypeError('"encoding" must be a valid string encoding');var d=0|u(b,c);a=i(a,d);var e=a.write(b,c);return e!==d&&(a=a.slice(0,e)),a}function p(a,b){var c=b.length<0?0:0|s(b.length);a=i(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function q(a,b,c,d){if(b.byteLength,c<0||b.byteLength<c)throw new RangeError("'offset' is out of bounds");if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");return b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d),j.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=j.prototype):a=p(a,b),a}function r(a,b){if(j.isBuffer(b)){var c=0|s(b.length);return a=i(a,c),0===a.length?a:(b.copy(a,0,0,c),a)}if(b){if("undefined"!=typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return"number"!=typeof b.length||ba(b.length)?i(a,0):p(a,b);if("Buffer"===b.type&&f(b.data))return p(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function s(a){if(a>=h())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h().toString(16)+" bytes");return 0|a}function t(a){return+a!=a&&(a=0),j.alloc(+a)}function u(a,b){if(j.isBuffer(a))return a.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":case void 0:return Y(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return _(a).length;default:if(d)return Y(a).length;b=(""+b).toLowerCase(),d=!0}}function v(a,b,c){var d=!1;if((void 0===b||b<0)&&(b=0),b>this.length)return"";if((void 0===c||c>this.length)&&(c=this.length),c<=0)return"";if(c>>>=0,b>>>=0,c<=b)return"";for(a||(a="utf8");;)switch(a){case"hex":return L(this,b,c);case"utf8":case"utf-8":return G(this,b,c);case"ascii":return J(this,b,c);case"latin1":case"binary":return K(this,b,c);case"base64":return F(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function w(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function x(a,b,c,d,e){if(0===a.length)return-1;if("string"==typeof c?(d=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,isNaN(c)&&(c=e?0:a.length-1),c<0&&(c=a.length+c),c>=a.length){if(e)return-1;c=a.length-1}else if(c<0){if(!e)return-1;c=0}if("string"==typeof b&&(b=j.from(b,d)),j.isBuffer(b))return 0===b.length?-1:y(a,b,c,d,e);if("number"==typeof b)return b=255&b,j.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):y(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer")}function y(a,b,c,d,e){function i(a,b){return 1===f?a[b]:a.readUInt16BE(b*f)}var f=1,g=a.length,h=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(a.length<2||b.length<2)return-1;f=2,g/=2,h/=2,c/=2}var j;if(e){var k=-1;for(j=c;j<g;j++)if(i(a,j)===i(b,k===-1?0:j-k)){if(k===-1&&(k=j),j-k+1===h)return k*f}else k!==-1&&(j-=j-k),k=-1}else for(c+h>g&&(c=g-h),j=c;j>=0;j--){for(var l=!0,m=0;m<h;m++)if(i(a,j+m)!==i(b,m)){l=!1;break}if(l)return j}return-1}function z(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new TypeError("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;++g){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))return g;a[c+g]=h}return g}function A(a,b,c,d){return aa(Y(b,a.length-c),a,c,d)}function B(a,b,c,d){return aa(Z(b),a,c,d)}function C(a,b,c,d){return B(a,b,c,d)}function D(a,b,c,d){return aa(_(b),a,c,d)}function E(a,b,c,d){return aa($(b,a.length-c),a,c,d)}function F(a,b,c){return 0===b&&c===a.length?d.fromByteArray(a):d.fromByteArray(a.slice(b,c))}function G(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(l<55296||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&l<1114112&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return I(d)}function I(a){var b=a.length;if(b<=H)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=H));return c}function J(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(127&a[e]);return d}function K(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;++e)d+=String.fromCharCode(a[e]);return d}function L(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;++f)e+=X(a[f]);return e}function M(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function N(a,b,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function O(a,b,c,d,e,f){if(!j.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range")}function P(a,b,c,d){b<0&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function Q(a,b,c,d){b<0&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function R(a,b,c,d,e,f){if(c+d>a.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function S(a,b,c,d,f){return f||R(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(a,b,c,d,23,4),c+4}function T(a,b,c,d,f){return f||R(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(a,b,c,d,52,8),c+8}function V(a){if(a=W(a).replace(U,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function W(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function X(a){return a<16?"0"+a.toString(16):a.toString(16)}function Y(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){if(c=a.charCodeAt(g),c>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function Z(a){for(var b=[],c=0;c<a.length;++c)b.push(255&a.charCodeAt(c));return b}function $(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);++g)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function _(a){return d.toByteArray(V(a))}function aa(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function ba(a){return a!==a}var d=a("base64-js"),e=a("ieee754"),f=a("isarray");c.Buffer=j,c.SlowBuffer=t,c.INSPECT_MAX_BYTES=50,j.TYPED_ARRAY_SUPPORT=void 0!==b.TYPED_ARRAY_SUPPORT?b.TYPED_ARRAY_SUPPORT:g(),c.kMaxLength=h(),j.poolSize=8192,j._augment=function(a){return a.__proto__=j.prototype,a},j.from=function(a,b,c){return k(null,a,b,c)},j.TYPED_ARRAY_SUPPORT&&(j.prototype.__proto__=Uint8Array.prototype,j.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&j[Symbol.species]===j&&Object.defineProperty(j,Symbol.species,{value:null,configurable:!0})),j.alloc=function(a,b,c){return m(null,a,b,c)},j.allocUnsafe=function(a){return n(null,a)},j.allocUnsafeSlow=function(a){return n(null,a)},j.isBuffer=function(b){return!(null==b||!b._isBuffer)},j.compare=function(b,c){if(!j.isBuffer(b)||!j.isBuffer(c))throw new TypeError("Arguments must be Buffers");if(b===c)return 0;for(var d=b.length,e=c.length,f=0,g=Math.min(d,e);f<g;++f)if(b[f]!==c[f]){d=b[f],e=c[f];break}return d<e?-1:e<d?1:0},j.isEncoding=function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},j.concat=function(b,c){if(!f(b))throw new TypeError('"list" argument must be an Array of Buffers');if(0===b.length)return j.alloc(0);var d;if(void 0===c)for(c=0,d=0;d<b.length;++d)c+=b[d].length;var e=j.allocUnsafe(c),g=0;for(d=0;d<b.length;++d){var h=b[d];if(!j.isBuffer(h))throw new TypeError('"list" argument must be an Array of Buffers');h.copy(e,g),g+=h.length}return e},j.byteLength=u,j.prototype._isBuffer=!0,j.prototype.swap16=function(){var b=this.length;if(b%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<b;c+=2)w(this,c,c+1);return this},j.prototype.swap32=function(){var b=this.length;if(b%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<b;c+=4)w(this,c,c+3),w(this,c+1,c+2);return this},j.prototype.swap64=function(){var b=this.length;if(b%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<b;c+=8)w(this,c,c+7),w(this,c+1,c+6),w(this,c+2,c+5),w(this,c+3,c+4);return this},j.prototype.toString=function(){var b=0|this.length;return 0===b?"":0===arguments.length?G(this,0,b):v.apply(this,arguments)},j.prototype.equals=function(b){if(!j.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===j.compare(this,b)},j.prototype.inspect=function(){var b="",d=c.INSPECT_MAX_BYTES;return this.length>0&&(b=this.toString("hex",0,d).match(/.{2}/g).join(" "),this.length>d&&(b+=" ... ")),"<Buffer "+b+">"},j.prototype.compare=function(b,c,d,e,f){if(!j.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(void 0===c&&(c=0),void 0===d&&(d=b?b.length:0),void 0===e&&(e=0),void 0===f&&(f=this.length),c<0||d>b.length||e<0||f>this.length)throw new RangeError("out of range index");if(e>=f&&c>=d)return 0;if(e>=f)return-1;if(c>=d)return 1;if(c>>>=0,d>>>=0,e>>>=0,f>>>=0,this===b)return 0;for(var g=f-e,h=d-c,i=Math.min(g,h),k=this.slice(e,f),l=b.slice(c,d),m=0;m<i;++m)if(k[m]!==l[m]){g=k[m],h=l[m];break}return g<h?-1:h<g?1:0},j.prototype.includes=function(b,c,d){return this.indexOf(b,c,d)!==-1},j.prototype.indexOf=function(b,c,d){return x(this,b,c,d,!0)},j.prototype.lastIndexOf=function(b,c,d){return x(this,b,c,d,!1)},j.prototype.write=function(b,c,d,e){if(void 0===c)e="utf8",d=this.length,c=0;else if(void 0===d&&"string"==typeof c)e=c,d=this.length,c=0;else{if(!isFinite(c))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");c=0|c,isFinite(d)?(d=0|d,void 0===e&&(e="utf8")):(e=d,d=void 0)}var f=this.length-c;if((void 0===d||d>f)&&(d=f),b.length>0&&(d<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");e||(e="utf8");for(var g=!1;;)switch(e){case"hex":return z(this,b,c,d);case"utf8":case"utf-8":return A(this,b,c,d);case"ascii":return B(this,b,c,d);case"latin1":case"binary":return C(this,b,c,d);case"base64":return D(this,b,c,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,b,c,d);default:if(g)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase(),g=!0}},j.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var H=4096;j.prototype.slice=function(b,c){var d=this.length;b=~~b,c=void 0===c?d:~~c,b<0?(b+=d,b<0&&(b=0)):b>d&&(b=d),c<0?(c+=d,c<0&&(c=0)):c>d&&(c=d),c<b&&(c=b);var e;if(j.TYPED_ARRAY_SUPPORT)e=this.subarray(b,c),e.__proto__=j.prototype;else{var f=c-b;e=new j(f,void 0);for(var g=0;g<f;++g)e[g]=this[g+b]}return e},j.prototype.readUIntLE=function(b,c,d){b=0|b,c=0|c,d||N(b,c,this.length);for(var e=this[b],f=1,g=0;++g<c&&(f*=256);)e+=this[b+g]*f;return e},j.prototype.readUIntBE=function(b,c,d){b=0|b,c=0|c,d||N(b,c,this.length);for(var e=this[b+--c],f=1;c>0&&(f*=256);)e+=this[b+--c]*f;return e},j.prototype.readUInt8=function(b,c){return c||N(b,1,this.length),this[b]},j.prototype.readUInt16LE=function(b,c){return c||N(b,2,this.length),this[b]|this[b+1]<<8},j.prototype.readUInt16BE=function(b,c){return c||N(b,2,this.length),this[b]<<8|this[b+1]},j.prototype.readUInt32LE=function(b,c){return c||N(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]},j.prototype.readUInt32BE=function(b,c){return c||N(b,4,this.length),16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])},j.prototype.readIntLE=function(b,c,d){b=0|b,c=0|c,d||N(b,c,this.length);for(var e=this[b],f=1,g=0;++g<c&&(f*=256);)e+=this[b+g]*f;return f*=128,e>=f&&(e-=Math.pow(2,8*c)),e},j.prototype.readIntBE=function(b,c,d){b=0|b,c=0|c,d||N(b,c,this.length);for(var e=c,f=1,g=this[b+--e];e>0&&(f*=256);)g+=this[b+--e]*f;return f*=128,g>=f&&(g-=Math.pow(2,8*c)),g},j.prototype.readInt8=function(b,c){return c||N(b,1,this.length),128&this[b]?(255-this[b]+1)*-1:this[b]},j.prototype.readInt16LE=function(b,c){c||N(b,2,this.length);var d=this[b]|this[b+1]<<8;return 32768&d?4294901760|d:d},j.prototype.readInt16BE=function(b,c){c||N(b,2,this.length);var d=this[b+1]|this[b]<<8;return 32768&d?4294901760|d:d},j.prototype.readInt32LE=function(b,c){return c||N(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},j.prototype.readInt32BE=function(b,c){return c||N(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},j.prototype.readFloatLE=function(b,c){return c||N(b,4,this.length),e.read(this,b,!0,23,4)},j.prototype.readFloatBE=function(b,c){return c||N(b,4,this.length),e.read(this,b,!1,23,4)},j.prototype.readDoubleLE=function(b,c){return c||N(b,8,this.length),e.read(this,b,!0,52,8)},j.prototype.readDoubleBE=function(b,c){return c||N(b,8,this.length),e.read(this,b,!1,52,8)},j.prototype.writeUIntLE=function(b,c,d,e){if(b=+b,c=0|c,d=0|d,!e){var f=Math.pow(2,8*d)-1;O(this,b,c,d,f,0)}var g=1,h=0;for(this[c]=255&b;++h<d&&(g*=256);)this[c+h]=b/g&255;return c+d},j.prototype.writeUIntBE=function(b,c,d,e){if(b=+b,c=0|c,d=0|d,!e){var f=Math.pow(2,8*d)-1;O(this,b,c,d,f,0)}var g=d-1,h=1;for(this[c+g]=255&b;--g>=0&&(h*=256);)this[c+g]=b/h&255;return c+d},j.prototype.writeUInt8=function(b,c,d){return b=+b,c=0|c,d||O(this,b,c,1,255,0),j.TYPED_ARRAY_SUPPORT||(b=Math.floor(b)),this[c]=255&b,c+1},j.prototype.writeUInt16LE=function(b,c,d){return b=+b,c=0|c,d||O(this,b,c,2,65535,0),j.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8):P(this,b,c,!0),c+2},j.prototype.writeUInt16BE=function(b,c,d){return b=+b,c=0|c,d||O(this,b,c,2,65535,0),j.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=255&b):P(this,b,c,!1),c+2},j.prototype.writeUInt32LE=function(b,c,d){return b=+b,c=0|c,d||O(this,b,c,4,4294967295,0),j.TYPED_ARRAY_SUPPORT?(this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=255&b):Q(this,b,c,!0),c+4},j.prototype.writeUInt32BE=function(b,c,d){return b=+b,c=0|c,d||O(this,b,c,4,4294967295,0),j.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b):Q(this,b,c,!1),c+4},j.prototype.writeIntLE=function(b,c,d,e){if(b=+b,c=0|c,!e){var f=Math.pow(2,8*d-1);O(this,b,c,d,f-1,-f)}var g=0,h=1,i=0;for(this[c]=255&b;++g<d&&(h*=256);)b<0&&0===i&&0!==this[c+g-1]&&(i=1),this[c+g]=(b/h>>0)-i&255;return c+d},j.prototype.writeIntBE=function(b,c,d,e){if(b=+b,c=0|c,!e){var f=Math.pow(2,8*d-1);O(this,b,c,d,f-1,-f)}var g=d-1,h=1,i=0;for(this[c+g]=255&b;--g>=0&&(h*=256);)b<0&&0===i&&0!==this[c+g+1]&&(i=1),this[c+g]=(b/h>>0)-i&255;return c+d},j.prototype.writeInt8=function(b,c,d){return b=+b,c=0|c,d||O(this,b,c,1,127,-128),j.TYPED_ARRAY_SUPPORT||(b=Math.floor(b)),b<0&&(b=255+b+1),this[c]=255&b,c+1},j.prototype.writeInt16LE=function(b,c,d){return b=+b,c=0|c,d||O(this,b,c,2,32767,-32768),j.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8):P(this,b,c,!0),c+2},j.prototype.writeInt16BE=function(b,c,d){return b=+b,c=0|c,d||O(this,b,c,2,32767,-32768),j.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=255&b):P(this,b,c,!1),c+2},j.prototype.writeInt32LE=function(b,c,d){return b=+b,c=0|c,d||O(this,b,c,4,2147483647,-2147483648),j.TYPED_ARRAY_SUPPORT?(this[c]=255&b,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24):Q(this,b,c,!0),c+4},j.prototype.writeInt32BE=function(b,c,d){return b=+b,c=0|c,d||O(this,b,c,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),j.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=255&b):Q(this,b,c,!1),c+4},j.prototype.writeFloatLE=function(b,c,d){return S(this,b,c,!0,d)},j.prototype.writeFloatBE=function(b,c,d){return S(this,b,c,!1,d)},j.prototype.writeDoubleLE=function(b,c,d){return T(this,b,c,!0,d)},j.prototype.writeDoubleBE=function(b,c,d){return T(this,b,c,!1,d)},j.prototype.copy=function(b,c,d,e){if(d||(d=0),e||0===e||(e=this.length),c>=b.length&&(c=b.length),c||(c=0),e>0&&e<d&&(e=d),e===d)return 0;if(0===b.length||0===this.length)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(d<0||d>=this.length)throw new RangeError("sourceStart out of bounds");if(e<0)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length),b.length-c<e-d&&(e=b.length-c+d);var g,f=e-d;if(this===b&&d<c&&c<e)for(g=f-1;g>=0;--g)b[g+c]=this[g+d];else if(f<1e3||!j.TYPED_ARRAY_SUPPORT)for(g=0;g<f;++g)b[g+c]=this[g+d];else Uint8Array.prototype.set.call(b,this.subarray(d,d+f),c);return f},j.prototype.fill=function(b,c,d,e){if("string"==typeof b){if("string"==typeof c?(e=c,c=0,d=this.length):"string"==typeof d&&(e=d,d=this.length),1===b.length){var f=b.charCodeAt(0);f<256&&(b=f)}if(void 0!==e&&"string"!=typeof e)throw new TypeError("encoding must be a string");if("string"==typeof e&&!j.isEncoding(e))throw new TypeError("Unknown encoding: "+e)}else"number"==typeof b&&(b=255&b);if(c<0||this.length<c||this.length<d)throw new RangeError("Out of range index");if(d<=c)return this;c>>>=0,d=void 0===d?this.length:d>>>0,b||(b=0);var g;if("number"==typeof b)for(g=c;g<d;++g)this[g]=b;else{var h=j.isBuffer(b)?b:Y(new j(b,e).toString()),i=h.length;for(g=0;g<d-c;++g)this[g+c]=h[g%i]}return this};var U=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":3,ieee754:9,isarray:12}],7:[function(a,b,c){(function(a){function b(a){return Array.isArray?Array.isArray(a):"[object Array]"===q(a)}function d(a){return"boolean"==typeof a}function e(a){return null===a}function f(a){return null==a}function g(a){return"number"==typeof a}function h(a){return"string"==typeof a}function i(a){return"symbol"==typeof a}function j(a){return void 0===a}function k(a){return"[object RegExp]"===q(a)}function l(a){return"object"==typeof a&&null!==a}function m(a){return"[object Date]"===q(a)}function n(a){return"[object Error]"===q(a)||a instanceof Error}function o(a){return"function"==typeof a}function p(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function q(a){return Object.prototype.toString.call(a)}c.isArray=b,c.isBoolean=d,c.isNull=e,c.isNullOrUndefined=f,c.isNumber=g,c.isString=h,c.isSymbol=i,c.isUndefined=j,c.isRegExp=k,c.isObject=l,c.isDate=m,c.isError=n,c.isFunction=o,c.isPrimitive=p,c.isBuffer=a.isBuffer}).call(this,{isBuffer:a("../../is-buffer/index.js")})},{"../../is-buffer/index.js":11}],8:[function(a,b,c){function d(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(a){return"function"==typeof a}function f(a){return"number"==typeof a}function g(a){return"object"==typeof a&&null!==a}function h(a){return void 0===a}b.exports=d,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._maxListeners=void 0,d.defaultMaxListeners=10,d.prototype.setMaxListeners=function(a){if(!f(a)||a<0||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},d.prototype.emit=function(a){var b,c,d,f,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||g(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;var k=new Error('Uncaught, unspecified "error" event. ('+b+")");throw k.context=b,k}if(c=this._events[a],h(c))return!1;if(e(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:f=Array.prototype.slice.call(arguments,1),c.apply(this,f)}else if(g(c))for(f=Array.prototype.slice.call(arguments,1),j=c.slice(),d=j.length,i=0;i<d;i++)j[i].apply(this,f);return!0},d.prototype.addListener=function(a,b){var c;if(!e(b))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,e(b.listener)?b.listener:b),this._events[a]?g(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,g(this._events[a])&&!this._events[a].warned&&(c=h(this._maxListeners)?d.defaultMaxListeners:this._maxListeners,c&&c>0&&this._events[a].length>c&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())),this},d.prototype.on=d.prototype.addListener,d.prototype.once=function(a,b){function d(){this.removeListener(a,d),c||(c=!0,b.apply(this,arguments))}if(!e(b))throw TypeError("listener must be a function");var c=!1;return d.listener=b,this.on(a,d),this},d.prototype.removeListener=function(a,b){var c,d,f,h;if(!e(b))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;if(c=this._events[a],f=c.length,d=-1,c===b||e(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(g(c)){for(h=f;h-- >0;)if(c[h]===b||c[h].listener&&c[h].listener===b){d=h;break}if(d<0)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(d,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},d.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],e(c))this.removeListener(a,c);else if(c)for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},d.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?e(this._events[a])?[this._events[a]]:this._events[a].slice():[]},d.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(e(b))return 1;if(b)return b.length}return 0},d.listenerCount=function(a,b){return a.listenerCount(b)}},{}],9:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],10:[function(a,b,c){"function"==typeof Object.create?b.exports=function(b,c){b.super_=c,b.prototype=Object.create(c.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}})}:b.exports=function(b,c){b.super_=c;var d=function(){};d.prototype=c.prototype,b.prototype=new d,b.prototype.constructor=b}},{}],11:[function(a,b,c){function d(a){return!!a.constructor&&"function"==typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function e(a){return"function"==typeof a.readFloatLE&&"function"==typeof a.slice&&d(a.slice(0,0))}b.exports=function(a){return null!=a&&(d(a)||e(a)||!!a._isBuffer)}},{}],12:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],13:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function f(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var d=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,e=function(a){return d.exec(a).slice(1)};c.resolve=function(){for(var c="",d=!1,e=arguments.length-1;e>=-1&&!d;e--){var g=e>=0?arguments[e]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,d="/"===g.charAt(0))}return c=b(f(c.split("/"),function(a){return!!a}),!d).join("/"),(d?"/":"")+c||"."},c.normalize=function(a){var d=c.isAbsolute(a),e="/"===g(a,-1);return a=b(f(a.split("/"),function(a){return!!a}),!d).join("/"),a||d||(a="."),a&&e&&(a+="/"),(d?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(f(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){
h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=e(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=e(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return e(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:15}],14:[function(a,b,c){(function(a){"use strict";function c(b,c,d,e){if("function"!=typeof b)throw new TypeError('"callback" argument must be a function');var g,h,f=arguments.length;switch(f){case 0:case 1:return a.nextTick(b);case 2:return a.nextTick(function(){b.call(null,c)});case 3:return a.nextTick(function(){b.call(null,c,d)});case 4:return a.nextTick(function(){b.call(null,c,d,e)});default:for(g=new Array(f-1),h=0;h<g.length;)g[h++]=arguments[h];return a.nextTick(function(){b.apply(null,g)})}}!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?b.exports=c:b.exports=a.nextTick}).call(this,a("_process"))},{_process:15}],15:[function(a,b,c){function g(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function i(a){if(e===setTimeout)return setTimeout(a,0);if((e===g||!e)&&setTimeout)return e=setTimeout,setTimeout(a,0);try{return e(a,0)}catch(b){try{return e.call(null,a,0)}catch(b){return e.call(this,a,0)}}}function j(a){if(f===clearTimeout)return clearTimeout(a);if((f===h||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(a);try{return f(a)}catch(b){try{return f.call(null,a)}catch(b){return f.call(this,a)}}}function o(){l&&m&&(l=!1,m.length?k=m.concat(k):n=-1,k.length&&p())}function p(){if(!l){var a=i(o);l=!0;for(var b=k.length;b;){for(m=k,k=[];++n<b;)m&&m[n].run();n=-1,b=k.length}m=null,l=!1,j(a)}}function q(a,b){this.fun=a,this.array=b}function r(){}var e,f,d=b.exports={};!function(){try{e="function"==typeof setTimeout?setTimeout:g}catch(a){e=g}try{f="function"==typeof clearTimeout?clearTimeout:h}catch(a){f=h}}();var m,k=[],l=!1,n=-1;d.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];k.push(new q(a,b)),1!==k.length||l||i(p)},q.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=r,d.addListener=r,d.once=r,d.off=r,d.removeListener=r,d.removeAllListeners=r,d.emit=r,d.binding=function(a){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(a){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],16:[function(a,b,c){b.exports=a("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":17}],17:[function(a,b,c){"use strict";function l(a){return this instanceof l?(g.call(this,a),h.call(this,a),a&&a.readable===!1&&(this.readable=!1),a&&a.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,a&&a.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",m)):new l(a)}function m(){this.allowHalfOpen||this._writableState.ended||e(n,this)}function n(a){a.end()}var d=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};b.exports=l;var e=a("process-nextick-args"),f=a("core-util-is");f.inherits=a("inherits");var g=a("./_stream_readable"),h=a("./_stream_writable");f.inherits(l,g);for(var i=d(h.prototype),j=0;j<i.length;j++){var k=i[j];l.prototype[k]||(l.prototype[k]=h.prototype[k])}},{"./_stream_readable":19,"./_stream_writable":21,"core-util-is":7,inherits:10,"process-nextick-args":14}],18:[function(a,b,c){"use strict";function f(a){return this instanceof f?void d.call(this,a):new f(a)}b.exports=f;var d=a("./_stream_transform"),e=a("core-util-is");e.inherits=a("inherits"),e.inherits(f,d),f.prototype._transform=function(a,b,c){c(null,a)}},{"./_stream_transform":20,"core-util-is":7,inherits:10}],19:[function(a,b,c){(function(c){"use strict";function p(a,b,c){return"function"==typeof a.prependListener?a.prependListener(b,c):void(a._events&&a._events[b]?e(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]]:a.on(b,c))}function r(b,c){q=q||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof q&&(this.objectMode=this.objectMode||!!b.readableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=~~this.highWaterMark,this.buffer=new n,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=b.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,b.encoding&&(o||(o=a("string_decoder/").StringDecoder),this.decoder=new o(b.encoding),this.encoding=b.encoding)}function s(b){return q=q||a("./_stream_duplex"),this instanceof s?(this._readableState=new r(b,this),this.readable=!0,b&&"function"==typeof b.read&&(this._read=b.read),void h.call(this)):new s(b)}function t(a,b,c,d,e){var f=y(b,c);if(f)a.emit("error",f);else if(null===c)b.reading=!1,z(a,b);else if(b.objectMode||c&&c.length>0)if(b.ended&&!e){var g=new Error("stream.push() after EOF");a.emit("error",g)}else if(b.endEmitted&&e){var h=new Error("stream.unshift() after end event");a.emit("error",h)}else{var i;!b.decoder||e||d||(c=b.decoder.write(c),i=!b.objectMode&&0===c.length),e||(b.reading=!1),i||(b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&A(a))),C(a,b)}else e||(b.reading=!1);return u(b)}function u(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function w(a){return a>=v?a=v:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a}function x(a,b){return a<=0||0===b.length&&b.ended?0:b.objectMode?1:a!==a?b.flowing&&b.length?b.buffer.head.data.length:b.length:(a>b.highWaterMark&&(b.highWaterMark=w(a)),a<=b.length?a:b.ended?b.length:(b.needReadable=!0,0))}function y(a,b){var c=null;return i.isBuffer(b)||"string"==typeof b||null===b||void 0===b||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function z(a,b){if(!b.ended){if(b.decoder){var c=b.decoder.end();c&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length)}b.ended=!0,A(a)}}function A(a){var b=a._readableState;b.needReadable=!1,b.emittedReadable||(m("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?d(B,a):B(a))}function B(a){m("emit readable"),a.emit("readable"),I(a)}function C(a,b){b.readingMore||(b.readingMore=!0,d(D,a,b))}function D(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(m("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function E(a){return function(){var b=a._readableState;m("pipeOnDrain",b.awaitDrain),b.awaitDrain&&b.awaitDrain--,0===b.awaitDrain&&g(a,"data")&&(b.flowing=!0,I(a))}}function F(a){m("readable nexttick read 0"),a.read(0)}function G(a,b){b.resumeScheduled||(b.resumeScheduled=!0,d(H,a,b))}function H(a,b){b.reading||(m("resume read 0"),a.read(0)),b.resumeScheduled=!1,b.awaitDrain=0,a.emit("resume"),I(a),b.flowing&&!b.reading&&a.read(0)}function I(a){var b=a._readableState;for(m("flow",b.flowing);b.flowing&&null!==a.read(););}function J(a,b){if(0===b.length)return null;var c;return b.objectMode?c=b.buffer.shift():!a||a>=b.length?(c=b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.head.data:b.buffer.concat(b.length),b.buffer.clear()):c=K(a,b.buffer,b.decoder),c}function K(a,b,c){var d;return a<b.head.data.length?(d=b.head.data.slice(0,a),b.head.data=b.head.data.slice(a)):d=a===b.head.data.length?b.shift():c?L(a,b):M(a,b),d}function L(a,b){var c=b.head,d=1,e=c.data;for(a-=e.length;c=c.next;){var f=c.data,g=a>f.length?f.length:a;if(e+=g===f.length?f:f.slice(0,a),a-=g,0===a){g===f.length?(++d,c.next?b.head=c.next:b.head=b.tail=null):(b.head=c,c.data=f.slice(g));break}++d}return b.length-=d,e}function M(a,b){var c=j.allocUnsafe(a),d=b.head,e=1;for(d.data.copy(c),a-=d.data.length;d=d.next;){var f=d.data,g=a>f.length?f.length:a;if(f.copy(c,c.length-a,0,g),a-=g,0===a){g===f.length?(++e,d.next?b.head=d.next:b.head=b.tail=null):(b.head=d,d.data=f.slice(g));break}++e}return b.length-=e,c}function N(a){var b=a._readableState;if(b.length>0)throw new Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,d(O,b,a))}function O(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function P(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}function Q(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}b.exports=s;var d=a("process-nextick-args"),e=a("isarray");s.ReadableState=r;var h,g=(a("events").EventEmitter,function(a,b){return a.listeners(b).length});!function(){try{h=a("stream")}catch(a){}finally{h||(h=a("events").EventEmitter)}}();var i=a("buffer").Buffer,j=a("buffer-shims"),k=a("core-util-is");k.inherits=a("inherits");var l=a("util"),m=void 0;m=l&&l.debuglog?l.debuglog("stream"):function(){};var o,n=a("./internal/streams/BufferList");k.inherits(s,h);var q,q;s.prototype.push=function(a,b){var c=this._readableState;return c.objectMode||"string"!=typeof a||(b=b||c.defaultEncoding,b!==c.encoding&&(a=j.from(a,b),b="")),t(this,c,a,b,!1)},s.prototype.unshift=function(a){var b=this._readableState;return t(this,b,a,"",!0)},s.prototype.isPaused=function(){return this._readableState.flowing===!1},s.prototype.setEncoding=function(b){return o||(o=a("string_decoder/").StringDecoder),this._readableState.decoder=new o(b),this._readableState.encoding=b,this};var v=8388608;s.prototype.read=function(a){m("read",a),a=parseInt(a,10);var b=this._readableState,c=a;if(0!==a&&(b.emittedReadable=!1),0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return m("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?N(this):A(this),null;if(a=x(a,b),0===a&&b.ended)return 0===b.length&&N(this),null;var d=b.needReadable;m("need readable",d),(0===b.length||b.length-a<b.highWaterMark)&&(d=!0,m("length less than watermark",d)),b.ended||b.reading?(d=!1,m("reading or ended",d)):d&&(m("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=x(c,b)));var e;return e=a>0?J(a,b):null,null===e?(b.needReadable=!0,a=0):b.length-=a,0===b.length&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&N(this)),null!==e&&this.emit("data",e),e},s.prototype._read=function(a){this.emit("error",new Error("not implemented"))},s.prototype.pipe=function(a,b){function j(a){m("onunpipe"),a===e&&o()}function k(){m("onend"),a.end()}function o(){m("cleanup"),a.removeListener("close",t),a.removeListener("finish",u),a.removeListener("drain",l),a.removeListener("error",s),a.removeListener("unpipe",j),e.removeListener("end",k),e.removeListener("end",o),e.removeListener("data",r),n=!0,!f.awaitDrain||a._writableState&&!a._writableState.needDrain||l()}function r(b){m("ondata"),q=!1;var c=a.write(b);!1!==c||q||((1===f.pipesCount&&f.pipes===a||f.pipesCount>1&&Q(f.pipes,a)!==-1)&&!n&&(m("false write response, pause",e._readableState.awaitDrain),e._readableState.awaitDrain++,q=!0),e.pause())}function s(b){m("onerror",b),v(),a.removeListener("error",s),0===g(a,"error")&&a.emit("error",b)}function t(){a.removeListener("finish",u),v()}function u(){m("onfinish"),a.removeListener("close",t),v()}function v(){m("unpipe"),e.unpipe(a)}var e=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=a;break;case 1:f.pipes=[f.pipes,a];break;default:f.pipes.push(a)}f.pipesCount+=1,m("pipe count=%d opts=%j",f.pipesCount,b);var h=(!b||b.end!==!1)&&a!==c.stdout&&a!==c.stderr,i=h?k:o;f.endEmitted?d(i):e.once("end",i),a.on("unpipe",j);var l=E(e);a.on("drain",l);var n=!1,q=!1;return e.on("data",r),p(a,"error",s),a.once("close",t),a.once("finish",u),a.emit("pipe",e),f.flowing||(m("pipe resume"),e.resume()),a},s.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount)return a&&a!==b.pipes?this:(a||(a=b.pipes),b.pipes=null,b.pipesCount=0,b.flowing=!1,a&&a.emit("unpipe",this),this);if(!a){var c=b.pipes,d=b.pipesCount;b.pipes=null,b.pipesCount=0,b.flowing=!1;for(var e=0;e<d;e++)c[e].emit("unpipe",this);return this}var f=Q(b.pipes,a);return f===-1?this:(b.pipes.splice(f,1),b.pipesCount-=1,1===b.pipesCount&&(b.pipes=b.pipes[0]),a.emit("unpipe",this),this)},s.prototype.on=function(a,b){var c=h.prototype.on.call(this,a,b);if("data"===a)this._readableState.flowing!==!1&&this.resume();else if("readable"===a){var e=this._readableState;e.endEmitted||e.readableListening||(e.readableListening=e.needReadable=!0,e.emittedReadable=!1,e.reading?e.length&&A(this,e):d(F,this))}return c},s.prototype.addListener=s.prototype.on,s.prototype.resume=function(){var a=this._readableState;return a.flowing||(m("resume"),a.flowing=!0,G(this,a)),this},s.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this},s.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){if(m("wrapped end"),b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(e){if(m("wrapped data"),b.decoder&&(e=b.decoder.write(e)),(!b.objectMode||null!==e&&void 0!==e)&&(b.objectMode||e&&e.length)){var f=d.push(e);f||(c=!0,a.pause())}});for(var e in a)void 0===this[e]&&"function"==typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));var f=["error","close","destroy","pause","resume"];return P(f,function(b){a.on(b,d.emit.bind(d,b))}),d._read=function(b){m("wrapped _read",b),c&&(c=!1,a.resume())},d},s._fromList=J}).call(this,a("_process"))},{"./_stream_duplex":17,"./internal/streams/BufferList":22,_process:15,buffer:6,"buffer-shims":5,"core-util-is":7,events:8,inherits:10,isarray:12,"process-nextick-args":14,"string_decoder/":28,util:4}],20:[function(a,b,c){"use strict";function f(a){this.afterTransform=function(b,c){return g(a,b,c)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function g(a,b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;if(!e)return a.emit("error",new Error("no writecb in Transform class"));d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e(b);var f=a._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&a._read(f.highWaterMark)}function h(a){if(!(this instanceof h))return new h(a);d.call(this,a),this._transformState=new f(this);var b=this;this._readableState.needReadable=!0,this._readableState.sync=!1,a&&("function"==typeof a.transform&&(this._transform=a.transform),"function"==typeof a.flush&&(this._flush=a.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(a){i(b,a)}):i(b)})}function i(a,b){if(b)return a.emit("error",b);var c=a._writableState,d=a._transformState;if(c.length)throw new Error("Calling transform done when ws.length != 0");if(d.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}b.exports=h;var d=a("./_stream_duplex"),e=a("core-util-is");e.inherits=a("inherits"),e.inherits(h,d),h.prototype.push=function(a,b){return this._transformState.needTransform=!1,d.prototype.push.call(this,a,b)},h.prototype._transform=function(a,b,c){throw new Error("Not implemented")},h.prototype._write=function(a,b,c){var d=this._transformState;if(d.writecb=c,d.writechunk=a,d.writeencoding=b,!d.transforming){var e=this._readableState;(d.needTransform||e.needReadable||e.length<e.highWaterMark)&&this._read(e.highWaterMark)}},h.prototype._read=function(a){var b=this._transformState;null!==b.writechunk&&b.writecb&&!b.transforming?(b.transforming=!0,this._transform(b.writechunk,b.writeencoding,b.afterTransform)):b.needTransform=!0}},{"./_stream_duplex":17,"core-util-is":7,inherits:10}],21:[function(a,b,c){(function(c){"use strict";function k(){}function l(a,b,c){this.chunk=a,this.encoding=b,this.callback=c,this.next=null}function n(b,c){m=m||a("./_stream_duplex"),b=b||{},this.objectMode=!!b.objectMode,c instanceof m&&(this.objectMode=this.objectMode||!!b.writableObjectMode);var d=b.highWaterMark,e=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:e,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var f=b.decodeStrings===!1;this.decodeStrings=!f,this.defaultEncoding=b.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){w(c,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}function o(b){return m=m||a("./_stream_duplex"),this instanceof o||this instanceof m?(this._writableState=new n(b,this),this.writable=!0,b&&("function"==typeof b.write&&(this._write=b.write),"function"==typeof b.writev&&(this._writev=b.writev)),void h.call(this)):new o(b)}function p(a,b){var c=new Error("write after end");a.emit("error",c),d(b,c)}function q(a,b,c,e){var f=!0,g=!1;return null===c?g=new TypeError("May not write null values to stream"):i.isBuffer(c)||"string"==typeof c||void 0===c||b.objectMode||(g=new TypeError("Invalid non-string/buffer chunk")),g&&(a.emit("error",g),d(e,g),f=!1),f}function r(a,b,c){return a.objectMode||a.decodeStrings===!1||"string"!=typeof b||(b=j.from(b,c)),b}function s(a,b,c,d,e){c=r(b,c,d),i.isBuffer(c)&&(d="buffer");var f=b.objectMode?1:c.length;b.length+=f;var g=b.length<b.highWaterMark;if(g||(b.needDrain=!0),b.writing||b.corked){var h=b.lastBufferedRequest;b.lastBufferedRequest=new l(c,d,e),h?h.next=b.lastBufferedRequest:b.bufferedRequest=b.lastBufferedRequest,b.bufferedRequestCount+=1}else t(a,b,!1,f,c,d,e);return g}function t(a,b,c,d,e,f,g){b.writelen=d,b.writecb=g,b.writing=!0,b.sync=!0,c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite),b.sync=!1}function u(a,b,c,e,f){--b.pendingcb,c?d(f,e):f(e),a._writableState.errorEmitted=!0,a.emit("error",e)}function v(a){a.writing=!1,a.writecb=null,a.length-=a.writelen,a.writelen=0}function w(a,b){var c=a._writableState,d=c.sync,f=c.writecb;if(v(c),b)u(a,c,d,b,f);else{var g=A(c);g||c.corked||c.bufferProcessing||!c.bufferedRequest||z(a,c),d?e(x,a,c,g,f):x(a,c,g,f)}}function x(a,b,c,d){c||y(a,b),b.pendingcb--,d(),C(a,b)}function y(a,b){0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"))}function z(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var d=b.bufferedRequestCount,e=new Array(d),f=b.corkedRequestsFree;f.entry=c;for(var g=0;c;)e[g]=c,c=c.next,g+=1;t(a,b,!0,b.length,e,"",f.finish),b.pendingcb++,b.lastBufferedRequest=null,f.next?(b.corkedRequestsFree=f.next,f.next=null):b.corkedRequestsFree=new E(b)}else{for(;c;){var h=c.chunk,i=c.encoding,j=c.callback,k=b.objectMode?1:h.length;if(t(a,b,!1,k,h,i,j),c=c.next,b.writing)break}null===c&&(b.lastBufferedRequest=null)}b.bufferedRequestCount=0,b.bufferedRequest=c,b.bufferProcessing=!1}function A(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function B(a,b){b.prefinished||(b.prefinished=!0,a.emit("prefinish"))}function C(a,b){var c=A(b);return c&&(0===b.pendingcb?(B(a,b),b.finished=!0,a.emit("finish")):B(a,b)),c}function D(a,b,c){b.ending=!0,C(a,b),c&&(b.finished?d(c):a.once("finish",c)),b.ended=!0,a.writable=!1}function E(a){var b=this;this.next=null,this.entry=null,this.finish=function(c){var d=b.entry;for(b.entry=null;d;){var e=d.callback;a.pendingcb--,e(c),d=d.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}b.exports=o;var d=a("process-nextick-args"),e=!c.browser&&["v0.10","v0.9."].indexOf(c.version.slice(0,5))>-1?setImmediate:d;o.WritableState=n;var f=a("core-util-is");f.inherits=a("inherits");var h,g={deprecate:a("util-deprecate")};!function(){try{h=a("stream")}catch(a){}finally{h||(h=a("events").EventEmitter)}}();var i=a("buffer").Buffer,j=a("buffer-shims");f.inherits(o,h);var m;n.prototype.getBuffer=function(){for(var b=this.bufferedRequest,c=[];b;)c.push(b),b=b.next;return c},function(){try{Object.defineProperty(n.prototype,"buffer",{get:g.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(a){}}();var m;o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},o.prototype.write=function(a,b,c){var d=this._writableState,e=!1;return"function"==typeof b&&(c=b,b=null),i.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding),"function"!=typeof c&&(c=k),d.ended?p(this,c):q(this,d,a,c)&&(d.pendingcb++,e=s(this,d,a,b,c)),e},o.prototype.cork=function(){var a=this._writableState;a.corked++},o.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||z(this,a))},o.prototype.setDefaultEncoding=function(b){if("string"==typeof b&&(b=b.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((b+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+b);return this._writableState.defaultEncoding=b,this},o.prototype._write=function(a,b,c){c(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(a,b,c){var d=this._writableState;"function"==typeof a?(c=a,a=null,b=null):"function"==typeof b&&(c=b,b=null),null!==a&&void 0!==a&&this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||D(this,d,c)}}).call(this,a("_process"))},{"./_stream_duplex":17,_process:15,buffer:6,"buffer-shims":5,"core-util-is":7,events:8,inherits:10,"process-nextick-args":14,"util-deprecate":29}],22:[function(a,b,c){"use strict";function f(){this.head=null,this.tail=null,this.length=0}var e=(a("buffer").Buffer,a("buffer-shims"));b.exports=f,f.prototype.push=function(a){var b={data:a,next:null};this.length>0?this.tail.next=b:this.head=b,this.tail=b,++this.length},f.prototype.unshift=function(a){var b={data:a,next:this.head};0===this.length&&(this.tail=b),this.head=b,++this.length},f.prototype.shift=function(){if(0!==this.length){var a=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,a}},f.prototype.clear=function(){this.head=this.tail=null,this.length=0},f.prototype.join=function(a){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=b.next;)c+=a+b.data;return c},f.prototype.concat=function(a){if(0===this.length)return e.alloc(0);if(1===this.length)return this.head.data;for(var b=e.allocUnsafe(a>>>0),c=this.head,d=0;c;)c.data.copy(b,d),d+=c.data.length,c=c.next;return b}},{buffer:6,"buffer-shims":5}],23:[function(a,b,c){b.exports=a("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":18}],24:[function(a,b,c){(function(d){var e=function(){try{return a("stream")}catch(a){}}();c=b.exports=a("./lib/_stream_readable.js"),c.Stream=e||c,c.Readable=c,c.Writable=a("./lib/_stream_writable.js"),c.Duplex=a("./lib/_stream_duplex.js"),c.Transform=a("./lib/_stream_transform.js"),c.PassThrough=a("./lib/_stream_passthrough.js"),!d.browser&&"disable"===d.env.READABLE_STREAM&&e&&(b.exports=e)}).call(this,a("_process"))},{"./lib/_stream_duplex.js":17,"./lib/_stream_passthrough.js":18,"./lib/_stream_readable.js":19,"./lib/_stream_transform.js":20,"./lib/_stream_writable.js":21,_process:15}],25:[function(a,b,c){b.exports=a("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":20}],26:[function(a,b,c){b.exports=a("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":21}],27:[function(a,b,c){function f(){d.call(this)}b.exports=f;var d=a("events").EventEmitter,e=a("inherits");e(f,d),f.Readable=a("readable-stream/readable.js"),f.Writable=a("readable-stream/writable.js"),f.Duplex=a("readable-stream/duplex.js"),f.Transform=a("readable-stream/transform.js"),f.PassThrough=a("readable-stream/passthrough.js"),f.Stream=f,f.prototype.pipe=function(a,b){function e(b){a.writable&&!1===a.write(b)&&c.pause&&c.pause()}function f(){c.readable&&c.resume&&c.resume()}function h(){g||(g=!0,a.end())}function i(){g||(g=!0,"function"==typeof a.destroy&&a.destroy())}function j(a){if(k(),0===d.listenerCount(this,"error"))throw a}function k(){c.removeListener("data",e),a.removeListener("drain",f),c.removeListener("end",h),c.removeListener("close",i),c.removeListener("error",j),a.removeListener("error",j),c.removeListener("end",k),c.removeListener("close",k),a.removeListener("close",k)}var c=this;c.on("data",e),a.on("drain",f),a._isStdio||b&&b.end===!1||(c.on("end",h),c.on("close",i));var g=!1;return c.on("error",j),a.on("error",j),c.on("end",k),c.on("close",k),a.on("close",k),a.emit("pipe",c),a}},{events:8,inherits:10,"readable-stream/duplex.js":16,"readable-stream/passthrough.js":23,"readable-stream/readable.js":24,"readable-stream/transform.js":25,"readable-stream/writable.js":26}],28:[function(a,b,c){function f(a){if(a&&!e(a))throw new Error("Unknown encoding: "+a)}function h(a){return a.toString(this.encoding)}function i(a){this.charReceived=a.length%2,this.charLength=this.charReceived?2:0}function j(a){this.charReceived=a.length%3,this.charLength=this.charReceived?3:0}var d=a("buffer").Buffer,e=d.isEncoding||function(a){switch(a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},g=c.StringDecoder=function(a){switch(this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,""),f(a),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=j;break;default:return void(this.write=h)}this.charBuffer=new d(6),this.charReceived=0,this.charLength=0};g.prototype.write=function(a){for(var b="";this.charLength;){var c=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;if(a.copy(this.charBuffer,this.charReceived,0,c),this.charReceived+=c,this.charReceived<this.charLength)return"";a=a.slice(c,a.length),b=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var d=b.charCodeAt(b.length-1);if(!(d>=55296&&d<=56319)){if(this.charReceived=this.charLength=0,0===a.length)return b;break}this.charLength+=this.surrogateSize,b=""}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived),b+=a.toString(this.encoding,0,e);var e=b.length-1,d=b.charCodeAt(e);if(d>=55296&&d<=56319){var f=this.surrogateSize;return this.charLength+=f,this.charReceived+=f,this.charBuffer.copy(this.charBuffer,f,0,f),a.copy(this.charBuffer,0,0,f),b.substring(0,e)}return b},g.prototype.detectIncompleteChar=function(a){for(var b=a.length>=3?3:a.length;b>0;b--){var c=a[a.length-b];if(1==b&&c>>5==6){this.charLength=2;break}if(b<=2&&c>>4==14){this.charLength=3;break}if(b<=3&&c>>3==30){this.charLength=4;break}}this.charReceived=b},g.prototype.end=function(a){var b="";if(a&&a.length&&(b=this.write(a)),this.charReceived){var c=this.charReceived,d=this.charBuffer,e=this.encoding;b+=d.slice(0,c).toString(e)}return b}},{buffer:6}],29:[function(a,b,c){(function(a){function c(a,b){function e(){if(!c){if(d("throwDeprecation"))throw new Error(b);d("traceDeprecation")?console.trace(b):console.warn(b),c=!0}return a.apply(this,arguments)}if(d("noDeprecation"))return a;var c=!1;return e}function d(b){try{if(!a.localStorage)return!1}catch(a){return!1}var c=a.localStorage[b];return null!=c&&"true"===String(c).toLowerCase()}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],30:[function(a,b,c){(function(c){!function(){function l(){this.mx=this.my=1,this.bx=this.by=0}function m(){arguments.length>0&&this.setBounds.apply(this,arguments)}function n(a,b){g.isNumber(a)?a=new ArrayBuffer(a):h.inNode&&a instanceof c==1&&(a=n.toArrayBuffer(a)),a instanceof ArrayBuffer==0&&e("BinArray constructor takes an integer, ArrayBuffer or Buffer argument"),this._buffer=a,this._bytes=new Uint8Array(a),this._view=new DataView(a),this._idx=0,this._le=b!==!1}function o(a,b){var q,c=b[1],d=b[2],e=b[3]?parseInt(b[3].substr(1)):void 0,f=b[4],h="s"==f,i="x"==f||"X"==f,j="d"==f||"i"==f,l=!h,m="",n=0,o=!1,p=!1;if(h?q=String(a):i?(q=a.toString(16),"X"==f&&(q=q.toUpperCase())):l&&(q=g.numToStr(a,j?0:e),"-"==q[0]&&(p=!0,q=q.substr(1)),o=0==parseFloat(q),c.indexOf("'")==-1&&c.indexOf(",")==-1||(q=g.addThousandsSep(q)),o||(p?m="":c.indexOf("+")!=-1&&(m="+"))),d){var r=q.length+m.length,s=parseInt(d,10);if(r<s){n=s-r;var t=c.indexOf("0")==-1?" ":"0",u=g.repeatString(t,n)}}return q=0==n?m+q:"0"==t?m+u+q:u+m+q}function e(){q.error.apply(null,f.toArray(arguments))}function r(){q.stop.apply(null,f.toArray(arguments))}function s(a){var b=new Error(a);return b.name="APIError",b}function t(){q.message.apply(null,f.toArray(arguments))}function u(){q.VERBOSE&&q.LOGGING&&q.logArgs(arguments)}function v(){q.TRACING&&q.logArgs(arguments)}function w(a){return a>=0?a:~a}function z(a){return a*y*x}function A(a,b,c,d,e,f){var g=a-d,h=b-e,i=c-f;return Math.sqrt(g*g+h*h+i*i)}function B(a,b,c,d){var e=a-c,f=b-d;return e*e+f*f}function C(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)}function D(a,b,c,d,e,f){var g=a-d,h=b-e,i=c-f;return g*g+h*h+i*i}function E(a){f.isNumber(a)&&0!==a||e("Rounding increment must be a non-zero number.");var b=1/a;return b>1&&(b=Math.round(b)),function(a){return Math.round(a*b)/b}}function F(a,b,c,d){for(var g,e=-1,f=1/0,h=0,i=2,j=arguments.length;i<j;h++,i+=2)g=B(a,b,arguments[i],arguments[i+1]),g<f&&(f=g,e=h);return e}function G(a,b,c,d,e,f,g,h){var i=O(c-a,d-b,g-e,h-f);if(0===i)return null;var j=P(e,f,g,h,a,b)/i,k=a+j*(c-a),l=b+j*(d-b);return[k,l]}function H(a,b,c,d,e,f,g,h){var j,i=G(a,b,c,d,e,f,g,h);return i&&(j=F(i[0],i[1],a,b,c,d,e,f,g,h),1==j?i=G(c,d,a,b,e,f,g,h):2==j?i=G(e,f,g,h,a,b,c,d):3==j&&(i=G(g,h,e,f,a,b,c,d))),i}function I(a,b,c,d,e,f,g,h){return P(a,b,c,d,e,f)*P(a,b,c,d,g,h)<=0&&P(e,f,g,h,a,b)*P(e,f,g,h,c,d)<=0}function J(a,b,c){return a>b&&a<c}function L(a,b,c,d,e,f,g,h){var i=Math.min(a,c,e,g),j=Math.max(a,c,e,g),k=Math.min(b,d,f,h),l=Math.max(b,d,f,h),m=l-k>j-i,n=[];return(m?J(b,k,l):J(a,i,j))&&n.push(a,b),(m?J(d,k,l):J(c,i,j))&&n.push(c,d),(m?J(f,k,l):J(e,i,j))&&n.push(e,f),(m?J(h,k,l):J(g,i,j))&&n.push(g,h),2!=n.length&&4!=n.length?(v("Invalid collinear segment intersection",n),n=null):4==n.length&&n[0]==n[2]&&n[1]==n[3]&&(n=null),n}function M(a,b,c,d,e,f,g,h){return a==e&&b==f||a==g&&b==h||c==e&&d==f||c==g&&d==h}function N(a,b,c,d,e,f,g,h){var i=I(a,b,c,d,e,f,g,h),j=null;return i&&(j=H(a,b,c,d,e,f,g,h),j?M(a,b,c,d,e,f,g,h)&&(j=null):j=L(a,b,c,d,e,f,g,h)),j}function O(a,b,c,d){return a*d-b*c}function P(a,b,c,d,e,f){return O(a-e,b-f,c-e,d-f)}function Q(a,b,c,d,e,f){var g=Math.atan2(b-d,a-c),h=Math.atan2(f-d,e-c),i=Math.abs(g-h);return i>Math.PI&&(i=2*Math.PI-i),i}function R(a){for(var b=2*Math.PI;a<0;)a+=b;for(;a>=b;)a-=b;return a}function S(a,b,c,d,e,f){if(a==c&&b==d||c==e&&d==f)return NaN;var g=a-c,h=b-d,i=e-c,j=f-d,k=g*i+h*j,l=g*j-h*i,m=Math.atan2(l,k);return R(m)}function T(a,b,c,d){var e=Math.PI/180;a*=e,c*=e,b*=e,d*=e;var f=Math.sin(c-a)*Math.cos(d),g=Math.cos(b)*Math.sin(d)-Math.sin(b)*Math.cos(d)*Math.cos(c-a);return Math.atan2(f,g)}function U(a,b,c,d,e,f){if(a==c&&b==d||c==e&&d==f)return NaN;var g=T(c,d,a,b),h=T(c,d,e,f),i=2*Math.PI+g-h;return R(i)}function V(a,b,c,d,e){for(var f=[],g=0,h=a.length;g<h;g++)X(a[g],b[g],f),c[g]=f[0],d[g]=f[1],e[g]=f[2]}function W(a,b,c,d){
var e=A(0,0,0,a,b,c),f=Math.asin(c/e)/y,g=Math.atan2(b/e,a/e)/y;d[0]=g,d[1]=f}function X(a,b,c){var d;a*=y,b*=y,d=Math.cos(b),c[0]=Math.cos(a)*d*x,c[1]=Math.sin(a)*d*x,c[2]=Math.sin(b)*x}function Y(a,b,c,d){var e=c-a,f=d-b,g=Math.sin(f/2)*Math.sin(f/2)+Math.cos(b)*Math.cos(d)*Math.sin(e/2)*Math.sin(e/2),h=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g));return h}function Z(a,b,c,d){var e=Math.PI/180,f=Y(a*e,b*e,c*e,d*e);return f*x}function $(a,b,c,d,e,f){var i,j,g=C(a,b,c,d),h=C(c,d,e,f);return 0===g||0===h?i=0:(j=((a-c)*(e-c)+(b-d)*(f-d))/(g*h),i=j>=1-1e-14?0:j<=-1+1e-14?Math.PI:Math.acos(j)),i}function _(a,b,c,d,e,f,g,h,i){var l,m,j=A(a,b,c,d,e,f),k=A(d,e,f,g,h,i);return 0===j||0===k?l=0:(m=((a-d)*(g-d)+(b-e)*(h-e)+(c-f)*(i-f))/(j*k),l=m>=1?0:m<=-1?Math.PI:Math.acos(m)),l}function aa(a,b,c,d,e,f){var g=Math.abs(((b-f)*(c-e)+(d-f)*(e-a))/2);return g}function ba(a,b,c,d,e,f){var g=a*d-a*f+c*f-c*b+e*b-e*d;return g*g}function ca(a,b,c,d,e,f){var g=C(a,b,c,d)*C(c,d,e,f),h=0;return g>0&&(h=((a-c)*(e-c)+(b-d)*(f-d))/g,h>1?h=1:h<-1&&(h=-1)),h}function da(a,b,c,d,e,f,g,h,i){var j=A(a,b,c,d,e,f)*A(d,e,f,g,h,i),k=0;return j>0&&(k=((a-d)*(g-d)+(b-e)*(h-e)+(c-f)*(i-f))/j,k>1?k=1:k<-1&&(k=-1)),k}function ea(a,b,c,d,e,f,g,h,i){var j=.5*Math.sqrt(ba(a,b,d,e,g,h)+ba(a,c,d,f,g,i)+ba(b,c,e,f,h,i));return j}function fa(a,b,c){var d;if(0===c)d=a;else if(a>=b+c)d=b;else if(b>=a+c)d=a;else{var e=a+c-b;d=a-e*e/c*.25}return d<0&&(d=0),d}function ga(a,b,c,d,e,f){var g=B(a,b,c,d),h=B(a,b,e,f),i=B(c,d,e,f);return fa(g,h,i)}function ha(a,b,c,d,e,f,g,h,i){var j=D(a,b,c,d,e,f),k=D(a,b,c,g,h,i),l=D(d,e,f,g,h,i);return fa(j,k,l)}function ja(a,b){return a[0]<=b[0]&&a[2]>=b[2]&&a[1]<=b[1]&&a[3]>=b[3]}function ma(a,b){this._i=0,this._n=0,this._inc=1,this._xx=a,this._yy=b,this.i=0,this.x=0,this.y=0}function na(a,b,c){var d=0,e=0,f=1,g=0;this.init=function(a,b,c,h){return d=h||0,c?(e=a,f=1,g=a+b):(e=a+b-1,f=-1,g=a-1),this},this.hasNext=function(){var h=c,i=e,j=i,k=d,l=g,m=f;if(i==l)return!1;do j+=m;while(j!=l&&h[j]<k);return e=j,this.x=a[i],this.y=b[i],this.i=i,!0}}function oa(a){this._arcs=a,this._i=0,this._n=0,this.x=0,this.y=0}function pa(){function n(a){var b=[],c=[],d=a.map(function(a){for(var d=a?a.length:0,e=0;e<d;e++)b.push(a[e][0]),c.push(a[e][1]);return d});o(d,b,c)}function o(f,h,i){var j=f.length;f instanceof Array&&(f=new Uint32Array(f)),h instanceof Array&&(h=new Float64Array(h)),i instanceof Array&&(i=new Float64Array(i)),a=h,b=i,d=f,g=null,l=null,c=new Uint32Array(j);for(var m=0,n=0;n<j;n++)c[n]=m,m+=f[n];return m==a.length&&a.length==b.length||e("ArcCollection#initXYData() Counting error"),r(),k=new ma(a,b),this}function p(c){c?(c.length!=a.length&&e("ArcCollection#initZData() mismatched arrays"),c instanceof Array&&(c=new Float64Array(c)),g=c,l=new na(a,b,g)):(g=null,l=null)}function r(){var c=s(a,b,d);i=c.bb,j=c.bounds}function s(a,b,c){for(var h,i,j,d=c.length,e=new Float64Array(4*d),f=new m,g=0,k=0;k<d;k++)h=c[k],h>0&&(i=4*k,j=q.calcArcBounds(a,b,g,h),e[i++]=j[0],e[i++]=j[1],e[i++]=j[2],e[i]=j[3],g+=h,f.mergeBounds(j));return{bb:e,bounds:f}}function t(){var a=g,b=h;if(!a||!b)return this.getPointCount();for(var c=0,d=0,e=a.length;d<e;d++)a[d]>=b&&c++;return c}function u(){for(var o,p,c=t(),f=d.length,i=new Float64Array(c),j=new Float64Array(c),k=new Float64Array(c),l=new Int32Array(f),m=0,n=0,q=0;q<f;q++){p=0,o=d[q];for(var r=m+o;m<r;m++)g[m]>=h&&(i[n]=a[m],j[n]=b[m],k[n]=g[m],n++,p++);p<2&&e("Collapsed arc"),l[q]=p}return{xx:i,yy:j,zz:k,nn:l}}function v(e){for(var k,l,h=0,i=0,j=f.copyElements,m=0,n=e.length;m<n;m++)k=e[m],l=d[m],k>-1&&(j(a,c[m],a,h,l),j(b,c[m],b,h,l),g&&j(g,c[m],g,h,l),d[k]=l,h+=l,i++);o(d.subarray(0,i),a.subarray(0,h),b.subarray(0,h)),g&&p(g.subarray(0,h))}function x(a,b){var c=new Float64Array(b),d=0;return a.forEach(function(a){for(var b=0,e=a.length;b<e;d++,b++)c[d]=a[b]}),d!=b&&e("Mismatched thresholds"),c}var a,b,c,d,g,i,j,k,l,h=0;1==arguments.length?n(arguments[0]):3==arguments.length?o.apply(this,arguments):e("ArcCollection() Invalid arguments"),this.updateVertexData=function(a,b,c,d){o(a,b,c),p(d||null)},this.getVertexData=function(){return{xx:a,yy:b,zz:g,bb:i,nn:d,ii:c}},this.getCopy=function(){var c=new pa(new Int32Array(d),new Float64Array(a),new Float64Array(b));return g&&c.setThresholds(new Float64Array(g)),c},this.getFilteredCopy=function(){if(!g||0===h)return this.getCopy();var a=u(),b=new pa(a.nn,a.xx,a.yy);return b.setThresholds(a.zz),b},this.toArray=function(){var a=[];return this.forEach(function(b){for(var c=[];b.hasNext();)c.push([b.x,b.y]);a.push(c)}),a},this.toString=function(){return JSON.stringify(this.toArray())},this.forEachArcSegment=function(e,f){for(var h=e>=0,i=h?e:~e,j=this.getRetainedInterval(),k=d[i],l=h?1:-1,m=h?c[i]:c[i]+k-1,n=m,o=0,p=1;p<k;p++)n+=l,(0===j||g[n]>=j)&&(f(m,n,a,b),m=n,o++);return o},this.forEachSegment=function(a){for(var b=0,c=0,d=this.size();c<d;c++)b+=this.forEachArcSegment(c,a);return b},this.transformPoints=function(c){for(var f,d=a,e=b,g=0,h=d.length;g<h;g++)f=c(d[g],e[g]),d[g]=f[0],e[g]=f[1];r()},this.forEach=function(a){for(var b=0,c=this.size();b<c;b++)a(this.getArcIter(b),b)},this.forEach2=function(e){for(var f=0,h=this.size();f<h;f++)e(c[f],d[f],a,b,g,f)},this.forEach3=function(e){for(var f,h,i,j,k,l=0,m=this.size();l<m;l++)f=c[l],h=f+d[l],i=a.subarray(f,h),j=b.subarray(f,h),g&&(k=g.subarray(f,h)),e(i,j,k,l)},this.filter=function(a){for(var b=new Int32Array(this.size()),c=0,e=0,f=0,g=this.size();f<g;f++)a(this.getArcIter(f),f)?(b[f]=c++,e+=d[f]):b[f]=-1;return c===this.size()?null:(v(b),b)},this.dedupCoords=function(){for(var j,k,c=0,e=0,f=0,h=this.size(),i=g;c<h;)j=d[c],k=q.dedupArcCoords(e,f,j,a,b,i),d[c]=k,e+=j,f+=k,c++;return e>f&&(o(d,a.subarray(0,f),b.subarray(0,f)),i&&p(i.subarray(0,f))),e-f},this.getVertex=function(c,d){var e=this.indexOfVertex(c,d);return{x:a[e],y:b[e]}},this.indexOfVertex=function(a,b){var f=a<0?~a:a,g=d[f];return b<0&&(b=g+b),f!=a&&(b=g-b-1),(b<0||b>=g)&&e("[ArcCollection] out-of-range vertex id"),c[f]+b},this.pointIsEndpoint=function(a){for(var b=c,e=d,f=0,g=b.length;f<g;f++)if(a===b[f]||a===b[f]+e[f]-1)return!0;return!1},this.arcIsClosed=function(c){var d=this.indexOfVertex(c,0),e=this.indexOfVertex(c,-1);return d!=e&&a[d]==a[e]&&b[d]==b[e]},this.arcIsLollipop=function(c){var e,f,d=this.getArcLength(c);return!(d<=2||!this.arcIsClosed(c))&&(e=this.indexOfVertex(c,1),f=this.indexOfVertex(c,-2),a[e]==a[f]&&b[e]==b[f])},this.arcIsDegenerate=function(a){for(var d,e,b=this.getArcIter(a),c=0;b.hasNext();){if(c>0&&(d!=b.x||e!=b.y))return!1;d=b.x,e=b.y,c++}return!0},this.getArcLength=function(a){return d[w(a)]},this.getArcIter=function(a){var b=a>=0,f=b?a:~a,i=g&&h?l:k;return f>=d.length&&e("#getArcId() out-of-range arc id:",a),i.init(c[f],d[f],b,h)},this.getShapeIter=function(a){return new oa(this).init(a)},this.setThresholds=function(a){var b=this.getPointCount(),c=null;return a&&(a.length==b?c=a:a.length==this.size()?c=x(a,b):e("Invalid threshold data")),p(c),this},this.flatten=function(){if(h>0){var a=u();this.updateVertexData(a.nn,a.xx,a.yy),h=0}else g=null},this.getRetainedInterval=function(){return h},this.setRetainedInterval=function(a){return h=a,this},this.getRetainedPct=function(){return this.getPctByThreshold(h)},this.setRetainedPct=function(a){return a>=1?h=0:(h=this.getThresholdByPct(a),h=q.clampIntervalByPct(h,a)),this},this.getRemovableThresholds=function(a){g||e("[arcs] Missing simplification data.");for(var d,b=1|a,c=new Float64Array(Math.ceil(g.length/b)),f=0,h=0,i=this.getPointCount();f<i;f+=b)d=g[f],d!=1/0&&(c[h++]=d);return c.subarray(0,h)},this.getArcThresholds=function(a){a>=0&&a<this.size()||e("[arcs] Invalid arc id:",a);var b=c[a],f=b+d[a];return g.subarray(b,f)},this.getPctByThreshold=function(a){var b,c,d;return a>0?(b=this.getRemovableThresholds(),c=f.findRankByValue(b,a),d=b.length>0?1-(c-1)/b.length:1):d=1,d},this.getThresholdByPct=function(a){var c,d,b=this.getRemovableThresholds();return c=0===b.length?0:Math.floor((1-a)*(b.length+2)),d=c<=0?0:c>b.length?1/0:f.findValueByRank(b,c)},this.arcIntersectsBBox=function(a,b){var c=i,d=4*a;return c[d]<=b[2]&&c[d+2]>=b[0]&&c[d+3]>=b[1]&&c[d+1]<=b[3]},this.arcIsContained=function(a,b){var c=i,d=4*a;return c[d]>=b[0]&&c[d+2]<=b[2]&&c[d+1]>=b[1]&&c[d+3]<=b[3]},this.arcIsSmaller=function(a,b){var c=i,d=4*a;return c[d+2]-c[d]<b&&c[d+3]-c[d+1]<b},this.isPlanar=function(){return!q.probablyDecimalDegreeBounds(this.getBounds())},this.size=function(){return c&&c.length||0},this.getPointCount=function(){return a&&a.length||0},this.getBounds=function(){return j},this.getSimpleShapeBounds=function(a,b){b=b||new m;for(var c=0,d=a.length;c<d;c++)this.mergeArcBounds(a[c],b);return b},this.getSimpleShapeBounds2=function(a,b){var c=b||[],d=i,e=4*w(a[0]);c[0]=d[e],c[1]=d[++e],c[2]=d[++e],c[3]=d[++e];for(var f=1,g=a.length;f<g;f++)e=4*w(a[f]),d[e]<c[0]&&(c[0]=d[e]),d[++e]<c[1]&&(c[1]=d[e]),d[++e]>c[2]&&(c[2]=d[e]),d[++e]>c[3]&&(c[3]=d[e]);return c},this.getMultiShapeBounds=function(a,b){if(b=b||new m,a)for(var c=0,d=a.length;c<d;c++)this.getSimpleShapeBounds(a[c],b);return b},this.mergeArcBounds=function(a,b){a<0&&(a=~a);var c=4*a;b.mergeBounds(i[c],i[c+1],i[c+2],i[c+3])}}function qa(a,b,c){function m(a,b,c){var m,n,o,e=k[c],f=0,g=d.xx,l=d.yy;m=c==j?h.length-e:k[c+1]-e;for(var p=0;p<m;p++)n=h[p+e],o=i[p+e],f+=la.testRayIntersection(a,b,g[n],l[n],g[o],l[o]);return f}function n(a){var b=Math.floor((a-g)/l);return b<0&&(b=0),b>=j&&(b=j-1),b}function o(a){var b=c&&c.buckets>0?c.buckets:a/100;return Math.ceil(b)}function p(){var r,s,t,u,v,w,x,y,z,A,c=d.xx,f=0,m=0,p=-1;for(q.forEachPathSegment(a,b,function(){f++}),s=new Uint32Array(2*f),x=0,q.forEachPathSegment(a,b,function(a,b,c,d){s[x++]=a,s[x++]=b}),q.sortSegmentIds(c,s),h=new Uint32Array(f),i=new Uint32Array(f),j=o(f),k=new Uint32Array(j+1),g=c[s[0]],l=(c[s[s.length-2]]-g)/j,t=0,u=f-1;m<f;){for(y=2*m,v=s[y],w=s[y+1],z=c[v],A=c[w],r=p,p=n(z);p>r;)r++,k[r]=t;A-z>=0==!1&&e("Invalid segment"),n(A)-p>1?(h[u]=v,i[u]=w,u--):(h[t]=v,i[t]=w,t++),m++}k[j]=t,t!=u+1&&e("Segment indexing error")}var g,h,i,j,k,l,d=b.getVertexData(),f=b.getMultiShapeBounds(a);p(),this.pointInPolygon=function(a,b){if(!f.containsPoint(a,b))return!1;var c=n(a),d=m(a,b,c);return c>0&&(d+=m(a,b,c-1)),d+=m(a,b,j),isNaN(d)?-1:d%2==1?1:0}}function ra(b,c){function f(b){function g(a,b){var d=c.getSimpleShapeBounds(a),g=d.toArray();g.ids=a,g.bounds=d,g.id=b,f.push(g),d.area()>.02*e&&(g.index=new qa([a],c))}var f=[];b.forEach(function(a,b){for(var c=a?a.length:0,d=0;d<c;d++)g(a[d],b)}),d=a("rbush")(),d.load(f)}function g(a,b){var c=!1,d=!1;return b.forEach(function(b){var e=b.index?b.index.pointInPolygon(a[0],a[1]):k(b.ids,b.bounds,a);e==-1?c=!0:1==e&&(d=!d)}),c||d}function h(a){var d,e,b=i(a),c=[];if(b.length>0){b.sort(function(a,b){return a.id-b.id});for(var f=0;f<b.length;f++)e=b[f],0!==f&&e.id==b[f-1].id||c.push(d=[]),d.push(e)}return c}function i(a){var b=a[0],c=a[1];return d.search([b,c,b,c])}function j(a){var b=c.getVertex(a,0),d=c.getVertex(a,1);return[(b.x+d.x)/2,(b.y+d.y)/2]}function k(a,b,d){return b.containsPoint(d[0],d[1])===!1?0:la.testPointInRing(d[0],d[1],a,c)}function l(a,b){var c=[];return a.forEach(function(a){b.indexOf(a)==-1&&c.push(a)}),b.forEach(function(a){c.indexOf(a)==-1&&c.push(a)}),c}var d,e=q.getPathBounds(b,c).area();f(b),this.findEnclosingShape=function(a){var b=-1,c=h(a);return c.forEach(function(c){g(a,c)&&(b=c[0].id)}),b},this.pointIsEnclosed=function(a){return g(a,i(a))},this.arcIsEnclosed=function(a){return this.pointIsEnclosed(j(a))},this.pathIsEnclosed=function(a){var b=a[0],c=j(b);return this.pointIsEnclosed(c)},this.findEnclosedPaths=function(a){var g,b=c.getSimpleShapeBounds(a),e=d.search(b.toArray()),f=[];return e.length>6&&(g=new qa([a],c)),e.forEach(function(c){var d=j(c.ids[0]),e=g?g.pointInPolygon(d[0],d[1]):k(a,b,d);e&&f.push(c.ids)}),f.length>0?f:null},this.findPathsInsideShape=function(a){var b=[];return a.forEach(function(a){var c=this.findEnclosedPaths(a);c&&(b=l(b,c))},this),b.length>0?b:null}}function sa(a,b){function j(a,b){var c=a>=0?a:~a,e=b>=0?b:~b,f=d[c];return!(f<2)&&(f==d[e]&&!!(k(a,b,-1)&&k(a,b,1)&&k(a,b,-2)))}function k(b,c,d){var e=a.indexOfVertex(b,d),f=a.indexOfVertex(c,d);return g[e]==g[f]&&h[e]==h[f]}function l(a){var b=a>=0,c=b?a:~a,f=b?2*c+1:2*c,g=i.chains[f],h=g>>1,j=g&!0?h:~h;return(g<0||g>=i.chains.length)&&e("out-of-range chain id"),c>=d.length&&e("out-of-range arc id"),i.chains.length<=f&&e("out-of-bounds node id"),j}f.isArray(a)&&(a=new pa(a));var c=a.getVertexData(),d=c.nn,g=c.xx,h=c.yy,i=q.findNodeTopology(a,b);2*d.length!=i.chains.length&&e("[NodeCollection] count error"),Object.defineProperty(this,"arcs",{value:a}),this.toArray=function(){var a=new Uint8Array(i.xx.length),b=[];return f.forEach(i.chains,function(c,d){if(1!=a[d])for(b.push([i.xx[d],i.yy[d]]);1!=a[c];)a[c]=1,c=i.chains[c]}),b},this.size=function(){return this.toArray().length},this.debugNode=function(b){function d(b){var c=b+": ",d=a.getArcLength(b);if(d>0){var e=a.getVertex(b,-1);if(c+=f.format("[%f, %f]",e.x,e.y),d>1){var g=a.getVertex(b,-2);if(c+=f.format(", [%f, %f]",g.x,g.y),d>2){var h=a.getVertex(b,0);c+=f.format(", [%f, %f]",h.x,h.y)}c+=" len: "+C(e.x,e.y,g.x,g.y)}}else c="[]";t(c)}if(q.TRACING){var c=[b];this.forEachConnectedArc(b,function(a){c.push(a)}),t("node ids:",c),c.forEach(d)}},this.forEachConnectedArc=function(a,b){for(var c=l(a),d=0;c!=a;)b(c,d++),c=l(c)},this.findMatchingArc=function(a){for(var c=l(a),d=a;c!=a;)j(a,c)&&w(c)<w(d)&&(d=c),c=l(c);return d!=a&&v("found identical arc:",a,"->",d),d},this.internal={testArcMatch:j,testVertexMatch:k}}function ua(a,b){function i(a){a.position(0).littleEndian();var d,b={version:a.readInt8(),updateYear:a.readUint8(),updateMonth:a.readUint8(),updateDay:a.readUint8(),recordCount:a.readUint32(),dataOffset:a.readUint16(),recordSize:a.readUint16(),incompleteTransaction:a.skipBytes(2).readUint8(),encrypted:a.readUint8(),mdx:a.skipBytes(12).readUint8(),ldid:a.readUint8()},c=1;for(a.skipBytes(2),b.fields=[];13!=a.peek()&&10!=a.peek()&&a.position()<b.dataOffset-1;)d=j(a),d.columnOffset=c,b.fields.push(d),c+=d.size;return c!=b.recordSize&&e("Record length mismatch; header:",b.recordSize,"detected:",c),13!=a.peek()&&t("[dbf] Found a non-standard header terminator ("+a.peek()+"). DBF file may be corrupted."),q.getUniqFieldNames(f.pluck(b.fields,"name")).forEach(function(a,c){b.fields[c].name=a}),b}function j(a){return{name:a.readCString(11),type:String.fromCharCode(a.readUint8()),address:a.readUint32(),size:a.readUint8(),decimals:a.readUint8(),id:a.skipBytes(2).readUint8(),position:a.skipBytes(2).readUint8(),indexFlag:a.skipBytes(7).readUint8()}}function k(){return f.pluck(g.fields,"name")}function l(a){return g.dataOffset+g.recordSize*a}function m(){return h||(h=v(),h||(h="utf8",r("Unable to auto-detect the text encoding of the DBF file.\n"+ta.ENCODING_PROMPT))),h}function o(){var a=k().map(function(a,b){return JSON.stringify(a)+": arguments["+b+"]"});return new Function("return {"+a.join(",")+"};")}function p(a){var b=a.size()-1;return 26!=a.peek(b)&&b++,b}function s(a){var b=a.map(u),c=p(d),e=o(),f=[];return function(h){for(var j,k,i=l(h),m=0,n=a.length;m<n;m++)k=a[m],j=i+k.columnOffset,j+k.size>c&&r("[dbf] Invalid DBF file: encountered end-of-file while reading data"),d.position(j),f[m]=b[m](d,k.size);return e.apply(null,f)}}function u(a){var b=a.type,c=null;return"I"==b?c=ta.readInt:"F"==b||"N"==b?c=ta.getNumberReader():"L"==b?c=ta.readBool:"D"==b?c=ta.readDate:"C"==b?c=ta.getStringReader(m()):(t('[dbf] Field "'+field.name+'" has an unsupported type ('+field.type+") -- converting to null values"),c=function(){return null}),c}function v(){var e,f,a=g.ldid,b=ta.lookupCodePage(a),c=w(50),d=0===c.length;return b&&87!=a?e=b:d&&(e="ascii"),e||(e=q.detectEncoding(c)),e&&c.length>0&&(f="Detected DBF text encoding: "+e,e in ta.encodingNames&&(f+=" ("+ta.encodingNames[e]+")"),t(f),f=q.decodeSamples(e,c),f=q.formatStringsAsGrid(f.split("\n")),t("Sample text containing non-ascii characters:"+(f.length>60?"\n":"")+f)),e}function w(a){for(var i,j,k,m,b=[],e=g.fields.filter(function(a){return"C"==a.type}),f=new c(256),h={},n=0,o=g.recordCount;n<o;n++)for(var p=0,q=e.length;p<q&&!(b.length>=a);p++)i=e[p],d.position(l(n)+i.columnOffset),j=ta.readStringBytes(d,i.size,f),j>0&&ta.bufferContainsHighBit(f,j)&&(k=new c(f.slice(0,j)),m=k.toString("hex"),m in h==!1&&(h[m]=!0,b.push(k)));return b}f.isString(a)&&e("[DbfReader] Expected a buffer, not a string");var d=new n(a),g=i(d),h=b||null;this.size=function(){return g.recordCount},this.readRow=function(a){return s(g.fields)(a)},this.getFields=k,this.getBuffer=function(){return d.buffer()},this.deleteField=function(a){g.fields=g.fields.filter(function(b){return b.name!=a})},this.readRows=function(){for(var a=s(g.fields),b=[],c=0,d=this.size();c<d;c++)b.push(a(c));return b}}function wa(a){var b;if(f.isArray(a))b=a;else if(b=[],f.isInteger(a))for(var c=0;c<a;c++)b.push({});else a&&e("[DataTable] Invalid constructor argument:",a);this.exportAsDbf=function(a){return ta.exportRecords(b,a)},this.getRecords=function(){return b},this.getRecordAt=function(a){return b[a]}}function ya(a,b){Object.keys(b).forEach(function(c){Object.defineProperty(a,c,{get:b[c]})})}function za(a,b){function s(){var b=a.shapes[n];return k||(k=b&&b[0]||null),k}function t(){return i=i||la.getShapeCentroid(o,b)}function u(){return j=j||la.findInteriorPoint(o,b)}function v(){return p||(p=b.getMultiShapeBounds(o)),p}var g,i,j,k,l,m,n,o,p,c=!!a.data,d=q.layerHasPoints(a),e=b&&q.layerHasPaths(a),h=this;c&&(m=a.data.getRecords(),Object.defineProperty(this,"properties",{set:function(a){f.isObject(a)?m[n]=a:r("Can't assign non-object to $.properties")},get:function(){var a=m[n];return a||(a=m[n]={}),a}})),e?(g=b.isPlanar(),ya(this,{partCount:function(){return o?o.length:0},isNull:function(){return 0===this.partCount},bounds:function(){return v().toArray()},height:function(){return v().height()},width:function(){return v().width()}}),"polygon"==a.geometry_type&&ya(this,{area:function(){return g?la.getPlanarShapeArea(o,b):la.getSphericalShapeArea(o,b)},originalArea:function(){var c,a=b.getRetainedInterval();return b.setRetainedInterval(0),c=h.area,b.setRetainedInterval(a),c},centroidX:function(){var a=t();return a?a.x:null},centroidY:function(){var a=t();return a?a.y:null},innerX:function(){var a=u();return a?a.x:null},innerY:function(){var a=u();return a?a.y:null}})):d&&(Object.defineProperty(this,"coordinates",{set:function(b){!b||f.isArray(b)?a.shapes[n]=b||null:r("Can't assign non-array to $.coordinates")},get:function(){return a.shapes[n]||null}}),ya(this,{x:function(){return s(),k?k[0]:null},y:function(){return s(),k?k[1]:null}})),ya(this,{id:function(){return n}}),this.__setId=function(b){n=b,e&&(p=null,i=null,j=null,o=a.shapes[b]),d&&(k=null),c&&(l=m[b])}}function Aa(a,b,c){var d=!c.planar&&q.probablyDecimalDegreeBounds(q.getLayerBounds(a)),e=c.weight?q.compileValueExpression(c.weight,a):null,f=[];return 0!==q.countMultiPartFeatures(a.shapes)&&r("[dissolve] Dissolving multi-part points is not supported"),a.shapes.forEach(function(a,c){var j,g=b(c),h=e?e(c):1,i=a&&a[0];i&&(d&&(j=[],X(i[0],i[1],j),i=j),f[g]=Ba(f[g],i,h))}),f.map(function(a){var b,c;return a?(d?(b=a.centroid,c=[],W(b[0],b[1],b[2],c)):c=a.centroid,a?[c]:null):null})}function Ba(a,b,c){var f,g,d=b[0],e=b[1];return d==d&&e==e&&c>0&&(a?(f=a.sum+c,g=a.sum/f,a.centroid[0]=g*a.centroid[0]+c*d/f,a.centroid[1]=g*a.centroid[1]+c*e/f,3==b.length&&(a.centroid[2]=g*a.centroid[2]+c*b[2]/f),a.sum=f):a={sum:c,centroid:b.concat()}),a}function Ca(a,b){var c=Da(a,b);return Ea(c,a,b)}function Da(a,b){function h(a){var b=a.arcId,f=b<0?~b:b,g=e.length,h=c[f];h||(h=[],c[f]=h),h.push(g),a.group=h,e.push(a),3==h.length&&d.push(h)}function i(a,b){for(var c,d,f=0;f<a.length-1;f++){c=e[a[f]];for(var g=f+1;g<a.length;g++)if(d=e[a[g]],b(c,d))return[c.segId,d.segId]}return null}function j(b,c){return Fa(b,e,a).arcId===~Fa(c,e,a).arcId}function k(b,c){return Ga(b,e,a).arcId===~Ga(c,e,a).arcId}function l(a,b){return n(a,b)&&j(a,b)&&k(a,b)}function m(a,b){return n(a,b)&&(j(a,b)||k(a,b))}function n(a,b){return a.arcId===~b.arcId&&g[a.shapeId]===g[b.shapeId]}function o(a){a.forEach(function(b){e[b].group=a})}function p(a){var b=i(a,l)||i(a,m)||i(a,n);b&&(a=a.filter(function(a){return!f.contains(b,a)}),o(a),o(b),a.length>2&&p(a))}var c=[],d=[],e=[],g=a.map(function(a,c){return b(c)});return q.traversePaths(a,h),d.forEach(p),e}function Ea(a,b,c){function g(a){if(!a.used){var b=k(a);b||i(a)}}function h(a,b){b in d==!1&&(d[b]=[]),d[b].push(a)}function i(a){var b=[a.arcId],d=j(a);for(a.used=!0;d&&d!=a;)b.push(d.arcId),d.used=!0,d=j(d),d&&d!=a&&d.used&&e("buildRing() topology error");d||e("buildRing() traversal error"),a.used=!0,h(b,c(a.shapeId))}function j(c,d){var g,f=Fa(c,a,b);return d=d||0,f!=c&&(g=k(f),g&&(d>100&&e("[dissolve] deep recursion -- unhandled topology problem"),f=1==b[g.shapeId][g.partId].length?j(f,d+1):j(g,d+1))),f}function k(b){var e,g,d=c(b.shapeId);return g=f.find(b.group,function(e){var f=b,g=a[e];return f!=g&&!g.used&&c(g.shapeId)===d&&f.arcId==~g.arcId}),e=null===g?null:a[g]}var d=[];return a.forEach(g),d}function Fa(a,b,c){return Ha(a,b,c,1)}function Ga(a,b,c){return Ha(a,b,c,-1)}function Ha(a,b,c,d){var i,f=c[a.shapeId][a.partId],g=f.length,h=(a.i+d)%g;return h<0&&(h+=g),i=b[a.segId-a.i+h],i&&i.shapeId==a.shapeId||e("index error"),i}function Ja(a){var b=new ArrayBuffer(16),c=new Float64Array(b),d=new Uint32Array(b),e=0|a;if(e>0==!1)throw new Error("Invalid size param: "+a);return function(a,b){var g,f=d;return c[0]=a,c[1]=b,g=f[0]^f[1],g=g<<5^g>>7^f[2]^f[3],(2147483647&g)%e}}function La(a){function i(a,b,f,h,i){for(var m,n,o,j=i(f),k=c(a[f],b[f]),l=d[k];l!=-1;){if(m=g[l][0],n=g[l][1],o=m.length,m[0]===a[h]&&m[o-1]===a[f]&&m[o-2]===a[j]&&n[0]===b[h]&&n[o-1]===b[f]&&n[o-2]===b[j])return l;l=e[l]}return null}var b=Math.floor(.25*a+1),c=Ja(b),d=new Int32Array(b),e=[],g=[],h=0;f.initializeArray(d,-1),this.addArc=function(a,b){var f=a.length-1,i=c(a[f],b[f]),j=d[i],k=g.length;return d[i]=k,g.push([a,b]),h+=a.length,e.push(j),k},this.findMatchingArc=function(a,b,c,d,e,f){var g=i(a,b,c,d,e);return g=null===g?i(a,b,d,c,f):~g},this.getVertexData=function(){for(var e,i,a=new Float64Array(h),b=new Float64Array(h),c=new Uint32Array(g.length),d=0,j=0,k=g.length;j<k;j++)e=g[j],i=e[0].length,f.copyElements(e[0],0,a,d,i),f.copyElements(e[1],0,b,d,i),c[j]=i,d+=i;return{xx:a,yy:b,nn:c}}}function Ma(a,b){for(var h,i,c=a.length,d=Math.floor(1.3*c)||1,e=Ja(d),f=new Int32Array(d),g=new Int32Array(c),j=0;j<c;j++)h=e(a[j],b[j]),i=f[h]-1,f[h]=j+1,g[j]=i<0?j:i;return g}function Na(a,b){for(var d,e,f,g,c=Ma(a,b),h=a.length-1;h>=0;h--)if(e=c[h],!(e>=h)){f=h,g=-1;do d=e,e=c[d],b[d]==b[h]&&a[d]==a[h]?(c[d]=f,f=d):(g>-1&&(c[g]=d),g=d);while(e<d);g>-1&&(c[g]=g),c[h]=f}return c}function Oa(a,b){for(var c=new Int32Array(a),d=0,e=0,f=b.length;e<f;e++)for(var g=0,h=b[e];g<h;g++,d++)c[d]=e;return c}function Pa(a){var b=1e4,c=new Float64Array(b),d=new Float64Array(b),e=0;this.endPath=function(){a(c,d,e),e=0},this.addPoint=function(a,g){e>=b&&(b=Math.ceil(1.3*b),c=f.extendBuffer(c,b),d=f.extendBuffer(d,b)),c[e]=a,d[e]=g,e++}}function Qa(a){function s(a){i?a!=i&&r("[PathImporter] Mixed feature types are not allowed"):i=a}function v(a){if(a>c.length){var b=Math.max(a,Math.ceil(1.5*c.length));c=f.extendBuffer(c,b,m),d=f.extendBuffer(d,b,m)}}function w(a){var b=g[l]||(g[l]=[]);b.push(a)}function x(a){k++,h[k]=a,w([k])}function y(a,b,e){var g,h,k,l,f=0;v(m+e);for(var o=0;o<e;o++)g=a[o],h=b[o],j&&(g=j(g),h=j(h)),o>0&&g==k&&h==l?n++:(c[m]=g,d[m]=h,m++,f++),l=h,k=g;"polygon"==i&&f>0&&(a[0]==a[e-1]&&b[0]==b[e-1]||(v(m+1),c[m]=a[0],d[m]=b[0],p++,m++,f++)),x(f)}var b=a.reserved_points>0?a.reserved_points:2e4,c=new Float64Array(b),d=new Float64Array(b),g=[],h=[],i=a.type||null,j=null,k=-1,l=-1,m=0,n=0,o=0,p=0;a.precision&&(j=E(a.precision)),f.extend(this,new Pa(y)),this.startShape=function(){g[++l]=null},this.importLine=function(a){s("polyline"),this.importPath(a)},this.importPoints=function(a){s("point"),j&&a.forEach(function(a){a[0]=j(a[0]),a[1]=j(a[1])}),a.forEach(w)},this.importRing=function(a,b){var c=la.getPlanarPathArea2(a);s("polygon"),(b===!0&&c>0||b===!1&&c<0)&&(u("Warning: reversing",b?"a CW hole":"a CCW ring"),a.reverse()),this.importPath(a)},this.importPath=function(b){for(var c,d=0,e=b.length;d<e;d++)c=b[d],this.addPoint(c[0],c[1]);this.endPath()},this.done=function(){var b,j={name:""};return"polygon"==i||"polyline"==i?(n>0&&u(f.format("Removed %,d duplicate point%s",n,f.pluralSuffix(n))),o>0&&t(f.format("Removed %,d path%s with defective geometry",o,f.pluralSuffix(o))),p>0&&t(f.format("Closed %,d open polygon ring%s",p,f.pluralSuffix(p))),m>0?(m<c.length&&(c=c.subarray(0,m),d=d.subarray(0,m)),b=new pa(h,c,d),(a.auto_snap||a.snap_interval)&&q.snapCoords(b,a.snap_interval),q.cleanShapes(g,b,i)):(t("No geometries were imported"),i=null)):"point"==i||null===i||e("Unexpected collection type:",i),i&&(j.geometry_type=i,j.shapes=g),{arcs:b||null,info:{},layers:[j]}}}function Ua(a){var j,b=Sa.hasBounds(a),c=Sa.isMultiPartType(a),d=Sa.isZType(a),g=Sa.isMType(a),h=!b,i=h?0:16;if(0===a)return Ta;j=function(d,f){var g=d.position();return this.id=d.bigEndian().readUint32(),this.type=d.littleEndian().skipBytes(4).readUint32(),0===this.type?new Ta:((f>0!=!0||this.type!=a&&0!==this.type)&&e("Unable to read a shape -- .shp file may be corrupted"),this.byteLength=f,h?(this.pointCount=1,this.partCount=1):(d.skipBytes(32),this.partCount=c?d.readUint32():1,this.pointCount=d.readUint32()),void(this._data=function(){return d.position(g)}))};var k={_xypos:function(){var a=12;return h||(a+=4),b&&(a+=32),c&&(a+=4*this.partCount+4),a},readCoords:function(){if(0===this.pointCount)return null;var a=this.readPartSizes(),b=this._data().skipBytes(this._xypos());return a.map(function(a){return b.readFloat64Array(2*a)})},readXY:function(){return 0===this.pointCount?new Float64Array(0):this._data().skipBytes(this._xypos()).readFloat64Array(2*this.pointCount)},readPoints:function(){for(var f,a=this.readXY(),b=d?this.readZ():null,c=g&&this.hasM()?this.readM():null,e=[],h=0,i=a.length/2;h<i;h++)f=[a[2*h],a[2*h+1]],b&&f.push(b[h]),c&&f.push(c[h]),e.push(f);return e},readPartSizes:function(){var b,c,d,a=[];if(0===this.pointCount);else if(1==this.partCount)a.push(this.pointCount);else{c=0,d=this._data().skipBytes(56);for(var e=0,f=this.partCount;e<f;e++)b=(e<f-1?d.readUint32():this.pointCount)-c,b>0&&(a.push(b),c+=b)}return a}},l={read:function(){var a=2;return d&&a++,this.hasM()&&a++,this._data().skipBytes(12).readFloat64Array(a)},stream:function(a){var b=this._data().skipBytes(12);a.addPoint(b.readFloat64(),b.readFloat64()),a.endPath()}},m={readBounds:function(){return this._data().skipBytes(12).readFloat64Array(4)},stream:function(a){for(var g,b=this.readPartSizes(),c=this.readXY(),d=0,f=0;d<b.length;){for(g=b[d];g-- >0;)a.addPoint(c[f++],c[f++]);a.endPath(),d++}c.length!=f&&e("Counting error")},read:function(){for(var a=[],b=this.readPartSizes(),c=this.readPoints(),d=0,e=b.length-1;d<e;d++)a.push(c.splice(0,b[d]));return a.push(c),a}},n={_mpos:function(){var a=this._xypos()+16*this.pointCount;return d&&(a+=8*this.pointCount+i),a},readMBounds:function(){return this.hasM()?this._data().skipBytes(this._mpos()).readFloat64Array(2):null},readM:function(){return this.hasM()?this._data().skipBytes(this._mpos()+i).readFloat64Array(this.pointCount):null},hasM:function(){var a=this._mpos(),b=a+8*this.pointCount+i;return this.byteLength!=a&&(this.byteLength==b||void e("#hasM() Counting error"))}},o={_zpos:function(){return this._xypos()+16*this.pointCount},readZBounds:function(){return this._data().skipBytes(this._zpos()).readFloat64Array(2)},readZ:function(){return this._data().skipBytes(this._zpos()+i).readFloat64Array(this.pointCount)}};return h?f.extend(k,l):f.extend(k,m),d&&f.extend(k,o),g&&f.extend(k,n),j.prototype=k,k.constructor=j,j}function Wa(a){function k(){h=100,j=0,i=1}function l(a){var c={signature:a.bigEndian().readUint32(),byteLength:2*a.skipBytes(20).readUint32(),version:a.littleEndian().readUint32(),type:a.readUint32(),bounds:a.readFloat64Array(4),zbounds:a.readFloat64Array(2),mbounds:a.readFloat64Array(2)};return 9994!=c.signature&&e("Not a valid .shp file"),q.isSupportedShapefileType(c.type)||e("Unsupported .shp type:",c.type),c.byteLength!=b.size()&&e("File size of .shp doesn't match size in header"),c}function m(a,e){var h,i,j,k,l,m,n,f=null;return a+12<=d&&(n=b.readBytes(12,a),j=n.bigEndian().readUint32(),h=2*n.readUint32()+8,i=n.littleEndian().readUint32(),k=j==e,l=a+h<=d&&h>=12,m=0===i||i==c.type,l&&m&&(n=b.readBytes(h,a),f=new g(n,h))),f}function n(a,e){for(var h,i,k,f=a,g=null;f+12<=d;){if(h=b.readBytes(12,f),i=h.bigEndian().readUint32(),k=h.littleEndian().skipBytes(4).readUint32(),i==e&&(k==c.type||0===k)){g=m(f,e);break}f+=4}return j+=g?f-a:d-a,g}if(this instanceof Wa==!1)return new Wa(a);var h,i,j,b=f.isString(a)?new Ya(a):new Xa(a),c=l(b.readBytes(100,0)),d=b.size(),g=new Ua(c.type);k(),this.header=function(){return c},this.forEachShape=function(a){for(var b=this.nextShape();b;)a(b),b=this.nextShape()},this.nextShape=function(){var a=m(h,i);if(!a&&h+12<=d&&(a=n(h+4,i)),a){if(h+=a.byteLength,a.id<i)return t("[shp] Record "+a.id+" appears more than once -- possible file corruption."),this.nextShape();i++}else j>0&&t("[shp] Skipped "+j+" bytes in .shp file -- possible data loss."),b.close(),k();return a}}function Xa(a){var b=new n(a),c=b.size();this.readBytes=function(a,d){return c<d+a&&e("Out-of-range error"),b.position(d),b},this.size=function(){return c},this.close=function(){}}function Ya(b){function k(a,k){var p,l=g-k,m=Math.min(l,Math.max(d,a)),o=new c(m);j||(j=f.openSync(b,"r")),p=f.readSync(j,o,0,m,k),p<m&&e("Error reading file"),h=k,i=new n(o)}var i,j,d=16777215,f=a("fs"),g=Va.fileSize(b),h=0;this.readBytes=function(a,b){return g<b+a&&e("Out-of-range error"),(!i||b<h||b+a>h+i.size())&&k(a,b),i.position(b-h),i},this.size=function(){return g},this.close=function(){j&&(f.closeSync(j),j=null,i=null,h=0)}}function Za(a,b){function f(){return e||(e=new wa(c.readRows()),c=null,a=null),e}var e,c=new ua(a,b),d=!1;this.exportAsDbf=function(a){return c&&!d?c.getBuffer():f().exportAsDbf(a)},this.getRecordAt=function(a){return c?c.readRow(a):e.getRecordAt(a)},this.deleteField=function(a){e?e.deleteField(a):(d=!0,c.deleteField(a))},this.getRecords=function(){return f().getRecords()},this.getFields=function(){return c?c.getFields():e.getFields()},this.size=function(){return c?c.size():e.size()}}function _a(){function k(){var a={};return d&&(a.sum=c),g>0&&(a.average=e/g),j.length>0&&(a.median=f.findMedian(j)),h<1/0&&(a.min=h),i>-(1/0)&&(a.max=i),b>0&&(a.count=b),a}var a={},b=0,c=0,d=!1,e=0,g=0,h=1/0,i=-(1/0),j=[];return a.sum=function(a){c+=a,d=!0},a.count=function(){b++},a.average=function(a){g++,e+=a},a.median=function(a){j.push(a)},a.max=function(a){a>i&&(i=a)},a.min=function(a){a<h&&(h=a)},{done:k,functions:a}}function ab(a){for(var b=0,c="",d=a.concat();cb(d);)b++,c="-ms",b>1&&(c+=String(b)),d=bb(a,c);return d}function bb(a,b){return a.map(function(a){return f.getPathBase(a)+b+"."+f.getFileExtension(a)})}function cb(a){return f.some(a,function(a){return Va.isFile(a)||Va.isDirectory(a)})}function db(){this.a=1,this.c=0,this.tx=0,this.b=0,this.d=1,this.ty=0}function eb(b){function g(a,b){var c=e.pj_fwd_deg(a,b);return{x:(c.x/b.fr_meter-b.x0)/b.a,y:(c.y/b.fr_meter-b.y0)/b.a}}var c=[],d=f.extend({},b),e=a("mproj");return d.addFrame=function(a,d,e,f,h,i,j){var k=new db,l=2*b.a,m=g(d,b),n=g(e,b),o=[m.x-f/l,m.y-h/l,m.x+f/l,m.y+h/l];return k.rotate(j*Math.PI/180,m.x,m.y),k.scale(i,i),k.transformXY(m.x,m.y,m),k.translate(n.x-m.x,n.y-m.y),c.push({bbox:o,matrix:k,projection:a}),this},d.fwd=function(a,d){var g,h,e=a.lam,f=a.phi;b.fwd(a,d);for(var i=0,j=c.length;i<j;i++)if(g=c[i],h=g.bbox,d.x>=h[0]&&d.x<=h[2]&&d.y>=h[1]&&d.y<=h[3]){g.projection.fwd({lam:e,phi:f},d),g.matrix.transformXY(d.x,d.y,d);
break}},d}function fb(){var b=a("mproj"),c=b.pj_init("+proj=lcc +lon_0=-96 +lat_0=39 +lat_1=33 +lat_2=45"),d=b.pj_init("+proj=aea +lon_0=-96 +lat_0=37.5 +lat_1=29.5 +lat_2=45.5"),e=new eb(d).addFrame(c,{lam:-152,phi:63},{lam:-115,phi:27},6e6,3e6,.31,29.2).addFrame(c,{lam:-157,phi:20.9},{lam:-106.6,phi:28.2},3e6,5e6,.9,40);return e}function gb(){function i(a){for(var b;a>0&&(b=a-1>>1,!m(a,b));)k(a,b),a=b;return a}function j(a){for(var b=n(a);b>a;)k(a,b),a=b,b=n(a)}function k(a,b){var c=g[a];l(a,g[b]),l(b,c)}function l(a,b){h[b]=a,g[a]=b}function m(a,b){var c=g[a],e=g[b],f=d[c],h=d[e];return f>h||f===h&&c>e}function n(a){var b=2*a+1,d=b+1,e=c;return b<e&&m(a,b)&&(a=b),d<e&&m(a,d)&&(a=d),a}var d,g,h,a=f.expandoBuffer(Int32Array),b=f.expandoBuffer(Int32Array),c=0;this.init=function(e){var f;for(d=e,c=e.length,g=a(c),h=b(c),f=0;f<c;f++)l(f,f);for(f=c-2>>1;f>=0;f--)j(f)},this.size=function(){return c},this.updateValue=function(a,b){var f=h[a];d[a]=b,f>=0&&f<c||e("Out-of-range heap index."),j(i(f))},this.popValue=function(){return d[this.pop()]},this.pop=function(){var a;return c<=0&&e("Tried to pop from an empty heap."),a=g[0],l(0,g[--c]),j(0),a}}function jb(){function i(){return e.map(function(a){return a.done()})}var h,a=/^--?([a-z][\w-]*)$/i,b=/^([a-z0-9_+-]+)=(?!\=)(.*)$/i,c="",d=[],e=[],g=null;return this instanceof jb==!1?new jb:(this.usage=function(a){return c=a,this},this.note=function(a){return h=a,this},this.default=function(a){g=a},this.example=function(a){d.push(a)},this.command=function(a){var b=new kb(a);return e.push(b),b},this.parseArgv=function(c){function n(a){return!!f.find(i(),function(b){return a===b.name||a===b.alias})}function o(b){return a.test(b)}function p(a,c,d){var e=b.exec(c),g=e[1],h=f.trimQuotes(e[2]),i=w(g,d);i?"flag"==i.type||i.assign_to?r("-"+d.name+" "+g+" option doesn't take a value"):s(a,[g,h],d):a._.push(c)}function s(a,c,d){var g,e=c.shift(),f=w(e,d);return b.test(e)?void p(a,e,d):f?(g=f.alias_to||f.name,g=g.replace(/-/g,"_"),void(f.assign_to?a.options[f.assign_to]=f.name:"flag"==f.type?a.options[g]=!0:a.options[g]=t(c,f))):void a._.push(e)}function t(a,b){var d,e,f,c=b.type;return 0===a.length||o(a[0])?e="Missing value":(f=a.shift(),d="number"==c?Number(f):"integer"==c?Math.round(Number(f)):"comma-sep"==c?f.split(","):f,d!==d&&(e="Invalid numeric value")),e&&r(e+" for option "+b.name+"=<value>"),d}function u(b){var c=a.exec(b[0]);return c?(b.shift(),c[1]):null}function v(a,b){return f.find(b,function(b){return b.name===a||b.alias===a})}function w(a,b){return f.find(b.options,function(b){return b.name===a||b.alias===a})}var h,k,l,d=i(),e=[],j=q.cleanArgv(c);for(1==j.length&&n(j[0])?j.unshift("-help"):j.length>0&&!o(j[0])&&g&&j.unshift("-"+g);j.length>0;){for(k=u(j),k||r("Invalid command:",j[0]),l=v(k,d),l||r("Unknown command:",k),h={name:l.name,options:{},_:[]};j.length>0&&!o(j[0]);)s(h,j,l);if(l.validate)try{l.validate(h)}catch(a){r("["+k+"] "+a.message)}e.push(h)}return e},this.getHelpMessage=function(a){function p(a,b){return f.rpad(a,l," ")+k+(b||"")+"\n"}function q(a){return a.help=g,a.label?a.help+=a.label:(a.help+=a.name,a.alias&&(a.help+=", "+a.alias),"flag"==a.type||a.assign_to||(a.help+="=")),a.help.length}var n,o,b="",e="  ",g="  ",j="  ",k="  ",l=0,m=!1;return o=i().filter(function(a){return!!a.describe}),a&&(m=!0,n=a.reduce(function(a,b){var c=f.find(o,function(a){return a.name==b});return c&&a.push(c),a},[]),o.filter(function(b){return f.contains(a,b.name)}),0===n.length&&(m=!1)),m||(c&&(b+="\n"+c+"\n\n"),n=o),l=n.reduce(function(a,b){var c=e+(b.name?"-"+b.name:"");return b.alias&&(c+=", -"+b.alias),b.help=c,m&&(a=b.options.reduce(function(a,b){return b.describe&&(a=Math.max(q(b),a)),a},a)),Math.max(a,c.length)},0),n.forEach(function(a){!m&&a.title&&(b+=a.title+"\n"),m&&(b+="\nCommand\n"),b+=p(a.help,a.describe),m&&a.options.length>0&&(b+="\nOptions\n",a.options.forEach(function(a){a.help&&a.describe&&(b+=p(a.help,a.describe))})),m&&a.examples&&(b+="\nExample"+(a.examples.length>1?"s":""),a.examples.forEach(function(a){a.split("\n").forEach(function(a){b+="\n"+j+a}),b+="\n"}))}),m||(d.length>0&&(b+="\nExamples\n",d.forEach(function(a){b+="\n"+a+"\n"})),h&&(b+="\n"+h)),b},void(this.printHelp=function(a){t(this.getHelpMessage(a))}))}function kb(a){var b={name:a,options:[]};this.validate=function(a){return b.validate=a,this},this.describe=function(a){return b.describe=a,this},this.example=function(a){return b.examples||(b.examples=[]),b.examples.push(a),this},this.alias=function(a){return b.alias=a,this},this.title=function(a){return b.title=a,this},this.option=function(a,c){return c=c||{},f.isString(a)&&a||e("Missing option name"),f.isObject(c)||e("Invalid option definition:",c),c.name=a,b.options.push(c),this},this.done=function(){return b}}function lb(a){var b=Bb(a._[0]);b&&(a.options.commands=b)}function mb(a){var b=a.options,c=a._;"-"==c[0]||"/dev/stdin"==c[0]?b.stdin=!0:c.length>0&&(b.files=c),"precision"in b&&b.precision>0==!1&&e("precision= option should be a positive number"),b.encoding&&(b.encoding=q.validateEncoding(b.encoding))}function nb(a){var b=a.options,c=a._,d=b.pct||"";if(c.length>0&&(/^[0-9.]+%?$/.test(c[0])&&(d=c.shift()),c.length>0&&e("Unparsable option:",c.join(" "))),d){var g=d.indexOf("%")>0;g?b.pct=Number(d.replace("%",""))/100:b.pct=Number(d),b.pct>=0&&b.pct<=1||e(f.format("Out-of-range pct value: %s",d))}var h=b.interval;h&&(b.interval=Number(h),b.interval>=0==!1&&e(f.format("Out-of-range interval value: %s",h))),isNaN(b.interval)&&isNaN(b.pct)&&!b.resolution&&e("Command requires an interval, pct or resolution parameter")}function ob(a){var b=a.options;b.source=b.source||a._[0],b.source||e("Command requires the name of a layer or file to join")}function pb(a){1==a._.length?a.options.field=a._[0]:a._.length>1&&e("Command takes a single field name")}function qb(a){var b=a.options;a._[0]&&(b.source=a._[0]),b.cleanup&&(delete b.cleanup,b.remove_slivers=!0),b.bbox&&(b.bbox=b.bbox.map(parseFloat)),b.source||b.bbox||e("Command requires a source file, layer id or bbox")}function rb(a){var b=a._,c=a.options;1==b.length?c.field=b[0]:b.length>1&&e("Command takes a single field name")}function sb(a){a._.length>0&&e("Unexpected option:",a._)}function tb(a){a.options.names=Bb(a._[0])||null}function ub(a){var b=a.options;if(1==a._.length){var c=a._[0].split(",");b.cols=parseInt(c[0],10),b.rows=parseInt(c[1],10)||b.cols}b.rows>0!=!1&&b.cols>0!=!1||e("Command expects cols,rows")}function vb(a){try{var b=Bb(a.options.fields||a._[0]);b&&(a.options.fields=b)}catch(a){e("Command takes a comma-separated list of fields")}}function wb(a){a._.length>0&&e("Command takes no arguments")}function xb(a){1!==a._.length&&e("Command requires a JavaScript expression"),a.options.expression=a._[0]}function yb(a){try{var b=Bb(a._[0]);a.options.fields=b||[]}catch(a){e("Command requires a comma-sep. list of fields")}}function zb(a){1==a._.length?a.options.expression=a._[0]:a._.length>1&&e("Unparsable arguments:",a._)}function Ab(a){var b=a._,c=a.options,d=b[0]||"",g=f.parseLocalPath(d);b.length>1&&e("Command takes one file or directory argument"),"-"==d||"/dev/stdout"==d?c.stdout=!0:d&&!g.extension?(Va.isDirectory(d)||e("Unknown output option:",d),c.output_dir=d):d&&(g.directory&&(c.output_dir=g.directory,Va.validateOutputDir(c.output_dir)),c.output_file=g.filename,q.filenameIsUnsupportedOutputType(c.output_file)&&e("Output file looks like an unsupported file type:",c.output_file)),c.format&&(c.format=c.format.toLowerCase(),"csv"==c.format?(c.format="dsv",c.delimiter=c.delimiter||","):"tsv"==c.format&&(c.format="dsv",c.delimiter=c.delimiter||"\t"),q.isSupportedOutputFormat(c.format)||e("Unsupported output format:",c.format)),c.delimiter&&(c.delimiter=c.delimiter.replace(/^["']?\\t["']?$/,"\t"),q.isSupportedDelimiter(c.delimiter)||e("Unsupported delimiter:",c.delimiter)),c.encoding&&(c.encoding=q.validateEncoding(c.encoding)),"quantization"in c&&c.quantization>0==!1&&e("quantization= option should be a nonnegative integer"),"topojson_precision"in c&&c.topojson_precision>0==!1&&e("topojson-precision= option should be a positive number")}function Bb(a,b){if(!b&&!a)return null;f.isString(a)||e("Expected a comma-separated list; found:",a);var c=a.split(",").map(f.trim).filter(function(a){return!!a});return b&&b>c.length<b&&e(f.format("Expected a list of at least %d member%s; found: %s",b,f.pluralSuffix(b),a)),c.length>0?c:null}var d="0.3.33",e=function(){var a=g.toArray(arguments).join(" ");throw new Error(a)},f={getUniqueName:function(a){var b=g.__uniqcount||0;return g.__uniqcount=b+1,(a||"__id_")+b},isFunction:function(a){return"function"==typeof a},isObject:function(a){return a===Object(a)},clamp:function(a,b,c){return a<b?b:a>c?c:a},interpolate:function(a,b,c){return a*(1-c)+b*c},isArray:function(a){return Array.isArray(a)},isNumber:function(a){return null!=a&&a.constructor==Number},isInteger:function(a){return g.isNumber(a)&&(0|a)===a},isString:function(a){return null!=a&&a.toString===String.prototype.toString},isBoolean:function(a){return a===!0||a===!1},toArray:function(a){var b;g.isArrayLike(a)||e("Utils.toArray() requires an array-like object");try{b=Array.prototype.slice.call(a,0)}catch(e){b=[];for(var c=0,d=a.length;c<d;c++)b[c]=a[c]}return b},isArrayLike:function(a){return!!a&&(!!g.isArray(a)||!g.isString(a)&&(0===a.length||a.length>0))},addslashes:function(a){return(a+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},regexEscape:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},defaults:function(a){for(var b=1,c=arguments.length;b<c;b++){var d=arguments[b]||{};for(var e in d)e in a==!1&&d.hasOwnProperty(e)&&(a[e]=d[e])}return a},extend:function(a){var d,e,f,b=a||{},c=arguments.length;for(e=1;e<c;e++){f=arguments[e]||{};for(d in f)f.hasOwnProperty(d)&&(b[d]=f[d])}return b},inherit:function(a,b){var c=function(){this.__super__==c&&(this.__super__=b.prototype.__super__,b.apply(this,arguments),delete this.__super__)};c.prototype=b.prototype||b,a.prototype=g.extend(new c,a.prototype),a.prototype.constructor=a,a.prototype.__super__=c},subclass:function(a){var b=function(){this.__super__.apply(this,g.toArray(arguments))};g.inherit(b,a);for(var c=1;c<arguments.length;c++)g.extend(b.prototype,arguments[c]);return b}},g=f,h=function(){var a="undefined"!=typeof b&&!!b.exports,c="undefined"!=typeof window&&!a,d=c&&!(!window.phantom||!window.phantom.exit),e=c&&/MSIE ([0-9]+)/.exec(navigator.appVersion)&&parseInt(RegExp.$1)||NaN;return{iPhone:c&&!!navigator.userAgent.match(/iPhone/i),iPad:c&&!!navigator.userAgent.match(/iPad/i),canvas:c&&!!document.createElement("canvas").getContext,inNode:a,inPhantom:d,inBrowser:c,ieVersion:e,ie:!isNaN(e)}}(),i={stack:[],verbose:!0,start:function(a){i.verbose&&a&&u(i.prefix()+a),i.stack.push(+new Date)},stop:function(a){var b=i.stack.pop(),c=+new Date-b;if(i.verbose){var d=i.prefix()+c+"ms";a&&(d+=" "+a),u(d)}return c},prefix:function(){for(var a="- ",b=this.stack.length;b--;)a="-"+a;return a}};f.merge=function(a,b){return f.isArray(a)&&f.isArray(b)||e("Usage: utils.merge(destArray, srcArray);"),b.length>0&&a.push.apply(a,b),a},f.difference=function(a,b){var c=f.arrayToIndex(b);return a.filter(function(a){return!Object.prototype.hasOwnProperty.call(c,a)})},f.contains=function(a,b){return f.isString(a)?a.indexOf(b)!=-1:f.isArrayLike(a)?f.indexOf(a,b)!=-1:void e("Expected Array or String argument")},f.some=function(a,b){return a.reduce(function(a,c){return a||b(c)},!1)},f.every=function(a,b){return a.reduce(function(a,c){return a&&b(c)},!0)},f.find=function(a,b,c){var d=a.filter(b,c);return 0===d.length?null:d[0]},f.indexOf=function(a,b,c){c&&e("utils.indexOf() No longer supports property argument");for(var d=!(b===b),f=0,g=a.length||0;f<g;f++){if(a[f]===b)return f;if(d&&a[f]!==a[f])return f}return-1},f.range=function(a,b,c){for(var d=[],e=void 0===b?0:b,f=void 0===c?1:c;a--;)d.push(e),e+=f;return d},f.repeat=function(a,b){for(var d,c=[],e=0;e<a;e++)d=b(e),void 0!==d&&(c[e]=d);return c.length>0?c:void 0},f.sum=function(a,b){f.isArrayLike(a)||e("utils.sum() expects an array, received:",a);for(var g,c=0,d=0,h=0,i=a.length;h<i;h++)g=a[h],g?c+=g:isNaN(g)&&d++;return b&&(b.nan=d),c},f.getArrayBounds=function(a){for(var e,b=1/0,c=-(1/0),d=0,f=0,g=a.length;f<g;f++)e=a[f],e!==e&&d++,e<b&&(b=e),e>c&&(c=e);return{min:b,max:c,nan:d}},f.uniq=function(a){var b={};return a.reduce(function(a,c){return c in b==!1&&(b[c]=!0,a.push(c)),a},[])},f.pluck=function(a,b){return a.map(function(a){return a[b]})},f.countValues=function(a){return a.reduce(function(a,b){return a[b]=b in a?a[b]+1:1,a},{})},f.indexOn=function(a,b){return a.reduce(function(a,c){return a[c[b]]=c,a},{})},f.groupBy=function(a,b){return a.reduce(function(a,c){var d=c[b];return d in a?a[d].push(c):a[d]=[c],a},{})},f.arrayToIndex=function(a,b){var c=arguments.length>1;return a.reduce(function(a,d){return a[d]=!c||b,a},{})},f.forEach=function(a,b,c){if(!f.isArrayLike(a))throw new Error("#forEach() takes an array-like argument. "+a);for(var d=0,e=a.length;d<e;d++)b.call(c,a[d],d)},f.forEachProperty=function(a,b,c){Object.keys(a).forEach(function(d){b.call(c,a[d],d)})},f.initializeArray=function(a,b){for(var c=0,d=a.length;c<d;c++)a[c]=b;return a},f.replaceArray=function(a,b){a.splice(0,a.length),a.push.apply(a,b)},g.repeatString=function(a,b){for(var c="",d=0;d<b;d++)c+=a;return c},g.pluralSuffix=function(a){return 1!=a?"s":""},g.endsWith=function(a,b){return a.indexOf(b,a.length-b.length)!==-1},g.lpad=function(a,b,c){return c=c||" ",a=String(a),g.repeatString(c,b-a.length)+a},g.rpad=function(a,b,c){return c=c||" ",a=String(a),a+g.repeatString(c,b-a.length)},g.trim=function(a){return g.ltrim(g.rtrim(a))};var j=/^\s+/;g.ltrim=function(a){return a.replace(j,"")};var k=/\s+$/;g.rtrim=function(a){return a.replace(k,"")},g.addThousandsSep=function(a){for(var b="",c="-"==a[0]?1:0,d=a.indexOf("."),e=a.length,f=(d==-1?e:d)-3;f>c;)b=","+a.substring(f,e)+b,e=f,f-=3;return a.substring(0,e)+b},g.numToStr=function(a,b){return b>=0?a.toFixed(b):String(a)},g.formatNumber=function(a,b,c,d){var e;return isNaN(a)?e=c||"-":(e=g.numToStr(a,b),e=g.addThousandsSep(e),d&&parseFloat(e)>0&&(e="+"+e)),e},l.prototype.isNull=function(){return!this.mx||!this.my||isNaN(this.bx)||isNaN(this.by)},l.prototype.invert=function(){var a=new l;return a.mx=1/this.mx,a.my=1/this.my,a.bx=-this.bx/this.mx,a.by=-this.by/this.my,a},l.prototype.transform=function(a,b,c){return c=c||[],c[0]=a*this.mx+this.bx,c[1]=b*this.my+this.by,c},l.prototype.toString=function(){return g.toString(g.extend({},this))},m.prototype.toString=function(){return JSON.stringify({xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax})},m.prototype.toArray=function(){return this.hasBounds()?[this.xmin,this.ymin,this.xmax,this.ymax]:[]},m.prototype.hasBounds=function(){return this.xmin<=this.xmax&&this.ymin<=this.ymax},m.prototype.sameBounds=m.prototype.equals=function(a){return a&&this.xmin===a.xmin&&this.xmax===a.xmax&&this.ymin===a.ymin&&this.ymax===a.ymax},m.prototype.width=function(){return this.xmax-this.xmin||0},m.prototype.height=function(){return this.ymax-this.ymin||0},m.prototype.area=function(){return this.width()*this.height()||0},m.prototype.empty=function(){return this.xmin=this.ymin=this.xmax=this.ymax=void 0,this},m.prototype.setBounds=function(a,b,c,d){return 1==arguments.length&&(g.isArrayLike(a)?(b=a[1],c=a[2],d=a[3],a=a[0]):(b=a.ymin,c=a.xmax,d=a.ymax,a=a.xmin)),this.xmin=a,this.ymin=b,this.xmax=c,this.ymax=d,(a>c||b>d)&&this.update(),this},m.prototype.centerX=function(){var a=.5*(this.xmin+this.xmax);return a},m.prototype.centerY=function(){var a=.5*(this.ymax+this.ymin);return a},m.prototype.containsPoint=function(a,b){return a>=this.xmin&&a<=this.xmax&&b<=this.ymax&&b>=this.ymin},m.prototype.containsBufferedPoint=m.prototype.containsCircle=function(a,b,c){return a+c>this.xmin&&a-c<this.xmax&&b-c<this.ymax&&b+c>this.ymin},m.prototype.intersects=function(a){return a.xmin<=this.xmax&&a.xmax>=this.xmin&&a.ymax>=this.ymin&&a.ymin<=this.ymax},m.prototype.contains=function(a){return a.xmin>=this.xmin&&a.ymax<=this.ymax&&a.xmax<=this.xmax&&a.ymin>=this.ymin},m.prototype.shift=function(a,b){this.setBounds(this.xmin+a,this.ymin+b,this.xmax+a,this.ymax+b)},m.prototype.padBounds=function(a,b,c,d){this.xmin-=a,this.ymin-=b,this.xmax+=c,this.ymax+=d},m.prototype.scale=function(a,b){var c=.5*(this.xmax-this.xmin),d=.5*(this.ymax-this.ymin),e=a-1,f=void 0===b?e:b-1;this.xmin-=c*e,this.ymin-=d*f,this.xmax+=c*e,this.ymax+=d*f},m.prototype.cloneBounds=m.prototype.clone=function(){return new m(this.xmin,this.ymin,this.xmax,this.ymax)},m.prototype.clearBounds=function(){this.setBounds(new m)},m.prototype.mergePoint=function(a,b){void 0===this.xmin?this.setBounds(a,b,a,b):(a<this.xmin?this.xmin=a:a>this.xmax&&(this.xmax=a),b<this.ymin?this.ymin=b:b>this.ymax&&(this.ymax=b))},m.prototype.fillOut=function(a,b,c){arguments.length<3&&(b=.5,c=.5);var g,d=this.width(),e=this.height(),f=d/e;return isNaN(a)||a<=0||(f<a?(g=e*a-d,this.xmin-=(1-b)*g,this.xmax+=b*g):(g=d/a-e,this.ymin-=(1-c)*g,this.ymax+=c*g)),this},m.prototype.update=function(){var a;this.xmin>this.xmax&&(a=this.xmin,this.xmin=this.xmax,this.xmax=a),this.ymin>this.ymax&&(a=this.ymin,this.ymin=this.ymax,this.ymax=a)},m.prototype.transform=function(a){return this.xmin=this.xmin*a.mx+a.bx,this.xmax=this.xmax*a.mx+a.bx,this.ymin=this.ymin*a.my+a.by,this.ymax=this.ymax*a.my+a.by,this.update(),this},m.prototype.getTransform=function(a,b){var c=new l;return c.mx=a.width()/this.width(),c.bx=a.xmin-c.mx*this.xmin,b?(c.my=-a.height()/this.height(),c.by=a.ymax-c.my*this.ymin):(c.my=a.height()/this.height(),c.by=a.ymin-c.my*this.ymin),c},m.prototype.mergeCircle=function(a,b,c){c<0&&(c=-c),this.mergeBounds([a-c,b-c,a+c,b+c])},m.prototype.mergeBounds=function(a){var b,c,d,f;return a instanceof m?(b=a.xmin,c=a.ymin,d=a.xmax,f=a.ymax):4==arguments.length?(b=arguments[0],c=arguments[1],d=arguments[2],f=arguments[3]):4==a.length?(b=a[0],c=a[1],d=a[2],f=a[3]):e("Bounds#mergeBounds() invalid argument:",a),void 0===this.xmin?this.setBounds(b,c,d,f):(b<this.xmin&&(this.xmin=b),c<this.ymin&&(this.ymin=c),d>this.xmax&&(this.xmax=d),f>this.ymax&&(this.ymax=f)),this},g.sortOn=function(a){for(var b=[],c=1;c<arguments.length;c+=2)b.push(g.getKeyComparator(arguments[c],arguments[c+1]));return a.sort(function(a,c){for(var d=0,e=0,f=b.length;e<f&&0===d;)d=b[e](a,c),e++;return d}),a},g.genericSort=function(a,b){var c=g.getGenericComparator(b);return Array.prototype.sort.call(a,c),a},g.sortOnKey=function(a,b,c){var d=g.getGenericComparator(c!==!1);a.sort(function(a,c){return d(b(a),b(c))})},g.sortOnKey2=function(a,b,c){g.sortArrayByKeys(a,a.map(b),c)},g.sortArrayByKeys=function(a,b,c){var d=g.getSortedIds(b,c);g.reorderArray(a,d)},g.getSortedIds=function(a,b){var c=g.range(a.length);return g.sortArrayIndex(c,a,b),c},g.sortArrayIndex=function(a,b,c){var d=g.getGenericComparator(c);a.sort(function(a,c){var e=d(b[a],b[c]);return e>0||0===e&&a<c?1:-1})},g.reorderArray=function(a,b){for(var c=b.length,d=[],f=0;f<c;f++){var h=b[f];(h<0||h>=c)&&e("Out-of-bounds array idx"),d[f]=a[h]}g.replaceArray(a,d)},g.getKeyComparator=function(a,b){var c=g.getGenericComparator(b);return function(b,d){return c(b[a],d[a])}},g.getGenericComparator=function(a){return a=a!==!1,function(b,c){var d=0;return null==c?d=null==b?0:-1:null==b?d=1:b<c?d=a?-1:1:b>c?d=a?1:-1:b!==b?d=1:c!==c&&(d=-1),d}},g.quicksort=function(a,b){return g.quicksortPartition(a,0,a.length-1),b===!1&&Array.prototype.reverse.call(a),a},g.quicksortPartition=function(a,b,c){for(var f,h,d=b,e=c;d<c;){for(f=a[b+c>>1];d<=e;){for(;a[d]<f;)d++;for(;a[e]>f;)e--;d<=e&&(h=a[d],a[d]=a[e],a[e]=h,d++,e--)}b<e&&g.quicksortPartition(a,b,e),b=d,e=c}},g.findRankByValue=function(a,b){if(isNaN(b))return a.length;for(var c=1,d=0,e=a.length;d<e;d++)b>a[d]&&c++;return c},g.findValueByPct=function(a,b){var c=Math.ceil((1-b)*a.length);return g.findValueByRank(a,c)},g.findValueByRank=function(a,b){(!a.length||b<1||b>a.length)&&e("[findValueByRank()] invalid input"),b=g.clamp(0|b,1,a.length);for(var i,j,k,l,c=b-1,d=a.length,f=0,h=d-1;f<h;){k=a[c],i=f,j=h;do{for(;a[i]<k;)i++;for(;k<a[j];)j--;i<=j&&(l=a[i],a[i]=a[j],a[j]=l,i++,j--)}while(i<=j);j<c&&(f=i),c<i&&(h=j)}return a[c]},g.findMedian=function(a){var b=a.length,c=Math.floor(b/2)+1,d=g.findValueByRank(a,c);return 0==(1&b)&&(d=(d+g.findValueByRank(a,c-1))/2),d},n.bufferToUintArray=function(a,b){return 4==b?new Uint32Array(a):2==b?new Uint16Array(a):1==b?new Uint8Array(a):void e("BinArray.bufferToUintArray() invalid word length:",b)},n.uintSize=function(a){return 1&a||2&a||4},n.bufferCopy=function(a,b,c,d,f){d=d||0,f=f||c.byteLength-d,a.byteLength-b<f&&e("Buffer overflow; tried to write:",f);for(var g=Math.min(n.uintSize(f),n.uintSize(d),n.uintSize(a.byteLength),n.uintSize(b),n.uintSize(c.byteLength)),h=n.bufferToUintArray(c,g),i=n.bufferToUintArray(a,g),j=f/g,k=d/g,l=b/g;j--;)i[l++]=h[k++];return f},n.toArrayBuffer=function(a){for(var b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c),e=0;e<b;e++)d[e]=a[e];return c},n.bufferSize=function(a){return a instanceof ArrayBuffer?a.byteLength:0|a.length},g.buffersAreIdentical=function(a,b){var c=n.bufferSize(a),d=n.bufferSize(b);if(c!=d)return!1;for(var e=0;e<c;e++)if(a[e]!==b[e])return!1;return!0},n.prototype={size:function(){return this._buffer.byteLength},littleEndian:function(){return this._le=!0,this},bigEndian:function(){return this._le=!1,this},buffer:function(){return this._buffer},bytesLeft:function(){return this._buffer.byteLength-this._idx},skipBytes:function(a){return this._idx+=a+0,this},readUint8:function(){return this._bytes[this._idx++]},writeUint8:function(a){return this._bytes[this._idx++]=a,this},readInt8:function(){return this._view.getInt8(this._idx++)},writeInt8:function(a){return this._view.setInt8(this._idx++,a),this},readUint16:function(){var a=this._view.getUint16(this._idx,this._le);return this._idx+=2,a},writeUint16:function(a){return this._view.setUint16(this._idx,a,this._le),this._idx+=2,this},readUint32:function(){var a=this._view.getUint32(this._idx,this._le);return this._idx+=4,a},writeUint32:function(a){return this._view.setUint32(this._idx,a,this._le),this._idx+=4,this},readInt32:function(){var a=this._view.getInt32(this._idx,this._le);return this._idx+=4,a},writeInt32:function(a){return this._view.setInt32(this._idx,a,this._le),this._idx+=4,this},readFloat64:function(){var a=this._view.getFloat64(this._idx,this._le);return this._idx+=8,a},writeFloat64:function(a){return this._view.setFloat64(this._idx,a,this._le),this._idx+=8,this},readFloat64Array:function(a){var e,b=8*a,c=this._idx,d=this._buffer;if(c%8===0)e=new Float64Array(d,c,a);else if(d.slice)e=new Float64Array(d.slice(c,c+b));else{var f=new ArrayBuffer(b);n.bufferCopy(f,0,d,c,b),e=new Float64Array(f)}return this._idx+=b,e},readUint32Array:function(a){for(var b=[],c=0;c<a;c++)b.push(this.readUint32());return b},peek:function(a){return this._view.getUint8(a>=0?a:this._idx)},position:function(a){return null!=a?(this._idx=a,this):this._idx},readCString:function(a,b){for(var c="",d=a>=0?a:this.bytesLeft();d>0;){var e=this.readUint8();if(d--,0==e)break;if(e>127&&b){c=null;break}c+=String.fromCharCode(e)}return a>0&&d>0&&this.skipBytes(d),c},writeString:function(a,b){var e,c=0,d=a.length;b&&(d=Math.min(d,b));for(var f=0;f<d;f++)e=a.charCodeAt(f),e>127&&(v("#writeCString() Unicode value beyond ascii range"),e="?".charCodeAt(0)),this.writeUint8(e),c++;return c},writeCString:function(a,b){var c=b?b-1:null,d=this.writeString(a,c);if(this.writeUint8(0),d++,b)for(;d<b;)this.writeUint8(0),d++;return this},writeBuffer:function(a,b,c){return this._idx+=n.bufferCopy(this._buffer,this._idx,a,c,b),this}},g.format=function(a){var b=g.formatter(a),c=b.apply(null,Array.prototype.slice.call(arguments,1));return c},g.formatter=function(a){for(var h,i,b=/%([\',+0]*)([1-9]?)((?:\.[1-9])?)([sdifxX%])/g,c=[],d=[],f=0,g="";i=b.exec(a);)h=a.substring(f,b.lastIndex-i[0].length),"%%"==i[0]?g+=h+"%":(c.push(g+h),g="",d.push(i)),f=b.lastIndex;return c.push(g+a.substr(f)),function(){var b=c[0],f=arguments.length;f!=d.length&&e("[format()] Data does not match format string; format:",a,"data:",arguments);for(var g=0;g<f;g++)b+=o(arguments[g],d[g])+c[g+1];return b}},f.wildcardToRegExp=function(a){var b=a.split("*").map(function(a){return f.regexEscape(a)}).join(".*");return new RegExp("^"+b+"$")},f.expandoBuffer=function(a,b){var e,c=0,d=b>=1?b:1.2;return function(b){return b>c&&(c=Math.ceil(b*d),e=new a(c)),e}},f.copyElements=function(a,b,c,d,f,g){a===c&&d>b&&e("copy error");var h=1,i=0;g&&(h=-1,i=f-1);for(var j=0;j<f;j++,i+=h)c[j+d]=a[b+i]},f.extendBuffer=function(a,b,c){var d=Math.max(a.length,b),e=c||a.length,g=new a.constructor(d);return f.copyElements(a,0,g,0,e),g},f.mergeNames=function(a,b){var c="";return a&&b&&(c=f.findStringPrefix(a,b).replace(/[-_]$/,"")),c},f.findStringPrefix=function(a,b){for(var c=0,d=a.length;c<d&&a[c]===b[c];c++);return a.substr(0,c)},f.isFiniteNumber=function(a){return 0===a||!!a&&a.constructor==Number&&a!==1/0&&a!==-(1/0)};var p={},q={VERSION:d,LOGGING:!1,TRACING:!1,VERBOSE:!1};new Float64Array(1),p.enableLogging=function(){return q.LOGGING=!0,p},p.printError=function(a){var b;if(f.isString(a)&&(a=new s(a)),!q.LOGGING||"APIError"!=a.name)throw a;b=a.message,/Error/.test(b)||(b="Error: "+b),t(b),t("Run mapshaper -h to view help")},q.error=function(){var a=g.toArray(arguments).join(" ");throw new Error(a)},q.stop=function(){throw new s(q.formatLogArgs(arguments))},q.message=function(){q.LOGGING&&q.logArgs(arguments)},q.formatLogArgs=function(a){return f.toArray(a).join(" ")},q.formatStringsAsGrid=function(a){var b=a.reduce(function(a,b){return Math.max(a,b.length)},0),c=b+2,d=Math.floor(80/c)||1;return a.reduce(function(a,b,e){var g=e%d;return e>0&&0===g&&(a+="\n"),g<d-1&&(b=f.rpad(b,c-2," ")),a+"  "+b},"")},q.logArgs=function(a){f.isArrayLike(a)&&(console.error||console.log).call(console,q.formatLogArgs(a))},q.getWorldBounds=function(a){return a=f.isFiniteNumber(a)?a:1e-10,[-180+a,-90+a,180-a,90-a]},q.probablyDecimalDegreeBounds=function(a){var b=q.getWorldBounds(-1),c=a instanceof m?a.toArray():a;return ja(b,c)},q.layerHasGeometry=function(a){return q.layerHasPaths(a)||q.layerHasPoints(a)},q.layerHasPaths=function(a){return("polygon"==a.geometry_type||"polyline"==a.geometry_type)&&q.layerHasNonNullShapes(a)},q.layerHasPoints=function(a){return"point"==a.geometry_type&&q.layerHasNonNullShapes(a)},q.layerHasNonNullShapes=function(a){return f.some(a.shapes||[],function(a){return!!a})},q.requireDataFields=function(a,b,c){var d=c?"["+c+"] ":"";a||r(d+"Missing attribute data");var e=a.getFields(),g=f.difference(b,e);g.length>0&&r(d+"Table is missing one or more fields:\n",g,"\nExisting fields:","\n"+q.formatStringsAsGrid(e))},q.requirePolygonLayer=function(a,b){a&&"polygon"===a.geometry_type||r(b||"Expected a polygon layer")},q.requirePathLayer=function(a,b){a&&q.layerHasPaths(a)||r(b||"Expected a polygon or polyline layer")};var x=6378137,y=Math.PI/180;q.calcArcBounds=function(a,b,c,d){var g,h,i,j,k,l,e=0|c,f=isNaN(d)?a.length-e:d+e;for(f>0&&(i=k=a[e],j=l=b[e]),e++;e<f;e++)g=a[e],h=b[e],g<i&&(i=g),g>k&&(k=g),h<j&&(j=h),h>l&&(l=h);return[i,j,k,l]},q.reversePathCoords=function(a,b,c){for(var f,d=b,e=b+c-1;d<e;)f=a[d],a[d]=a[e],a[e]=f,d++,e--};var la={R:x,D2R:y,degreesToMeters:z,getRoundingFunction:E,segmentHit:I,segmentIntersection:N,distanceSq:B,distance3D:A,innerAngle:$,innerAngle2:Q,signedAngle:S,bearing:T,signedAngleSph:U,standardAngle:R,convLngLatToSph:V,lngLatToXYZ:X,xyzToLngLat:W,sphericalDistance:Y,greatCircleDistance:Z,pointSegDistSq:ga,pointSegDistSq3D:ha,innerAngle3D:_,triangleArea:aa,triangleArea3D:ea,cosine:ca,cosine3D:da};ma.prototype.init=function(a,b,c){return c?(this._i=a,this._inc=1):(this._i=a+b-1,this._inc=-1),this._n=b,this},ma.prototype.hasNext=function(){var a=this._i;return this._n>0&&(this._i=a+this._inc,this.x=this._xx[a],this.y=this._yy[a],this.i=a,this._n--,!0)},oa.prototype.hasNext=function(){var a=this._arc;return this._i<this._n!=!1&&(a.hasNext()?(this.x=a.x,this.y=a.y,!0):(this.nextArc(),this.hasNext()))},oa.prototype.init=function(a){return this._ids=a,this._n=a.length,this.reset(),this},oa.prototype.nextArc=function(){var a=this._i+1;a<this._n&&(this._arc=this._arcs.getArcIter(this._ids[a]),a>0&&this._arc.hasNext()),this._i=a},oa.prototype.reset=function(){this._i=-1,this.nextArc()},pa.prototype.inspect=function(){var b,a=this.getPointCount();return b=a<50?JSON.stringify(this.toArray()):"[ArcCollection ("+this.size()+")]"},q.dedupArcCoords=function(a,b,c,d,e,f){for(var i,j,k,l,m,g=0,h=0;g<c;)l=a+g,i=d[l],j=e[l],m=i==i&&j==j&&(0===h||i!=d[l-1]||j!=e[l-1]),m&&(k=b+h,d[k]=i,e[k]=j,h++),f&&h>0&&(m||f[l]>f[k])&&(f[k]=f[l]),g++;return h>1?h:0},q.countPointsInLayer=function(a){var b=0;return q.layerHasPoints(a)&&q.forEachPoint(a.shapes,function(){b++}),b},q.forEachPoint=function(a,b){a.forEach(function(a,c){for(var d=a?a.length:0,e=0;e<d;e++)b(a[e],c)})},q.transformPointsInLayer=function(a,b){q.layerHasPoints(a)&&q.forEachPoint(a.shapes,function(a){var c=b(a[0],a[1]);a[0]=c[0],a[1]=c[1]})},q.countArcsInShapes=function(a,b){q.traversePaths(a,null,function(a){for(var d,c=a.arcs,e=0;e<c.length;e++)d=c[e],d<0&&(d=~d),b[d]++})},q.findShapesByArcId=function(a,b,c){var d=c?new Uint8Array(c):[],e=[];return b.forEach(function(a){d[w(a)]=1}),a.forEach(function(a,b){var c=!1;q.forEachArcId(a||[],function(a){c=c||1==d[w(a)]}),c&&e.push(b)}),e},q.cloneShape=function(a){return a?a.map(function(a){return a.concat()}):null},q.cloneShapes=function(a){return f.isArray(a)?a.map(q.cloneShape):null},q.pathsAreIdentical=function(a,b){if(a.length!=b.length)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]!=b[c])return!1;return!0},q.reversePath=function(a){a.reverse();for(var b=0,c=a.length;b<c;b++)a[b]=~a[b]},q.clampIntervalByPct=function(a,b){return b<=0?a=1/0:b>=1&&(a=0),a},q.findNextRemovableVertices=function(a,b,c,d){var f,g,e=q.findNextRemovableVertex(a,b,c,d);if(e>-1)for(g=a[e],f=[e];++e<d;)a[e]==g&&f.push(e);return f||null},q.findNextRemovableVertex=function(a,b,c,d){var e,h,f=0,g=-1;c>d&&(e=c,c=d,d=e);for(var i=c+1;i<d;i++)h=a[i],h<b&&h>f&&(g=i,f=h);return g},q.forEachArcId=function(a,b){for(var c,d=0;d<a.length;d++)if(c=a[d],c instanceof Array)q.forEachArcId(c,b);else if(f.isInteger(c)){var g=b(c);void 0!==g&&(a[d]=g)}else c&&e("Non-integer arc id in:",a)},q.forEachPath=function(a,b){q.editPaths(a,b)},q.editPaths=function(a,b){if(!a)return null;f.isArray(a)||e("[editPaths()] Expected an array, found:",arr);for(var g,c=0,d=a.length,h=0;h<d;h++)g=b(a[h],h,a),null===g?(c++,a[h]=null):f.isArray(g)&&(a[h]=g);return c==d?null:c>0?a.filter(function(a){return!!a}):a},q.forEachPathSegment=function(a,b,c){q.forEachArcId(a,function(a){b.forEachArcSegment(a,c)})},q.traversePaths=function(b,c,d,e){var f=0;b.forEach(function(a,b){if(a&&0!==a.length){var g,h;e&&e(b);for(var i=0,j=a.length;i<j;i++)if(g=a[i],d&&d({i:i,shapeId:b,shape:a,arcs:g}),c)for(var k=0,l=g.length;k<l;k++,f++)h=g[k],c({i:k,shapeId:b,partId:i,arcId:h,segId:f})}})},q.arcHasLength=function(a,b){var d,e,c=b.getArcIter(a);if(c.hasNext())for(d=c.x,e=c.y;c.hasNext();)if(c.x!=d||c.y!=e)return!0;return!1},q.filterEmptyArcs=function(a,b){if(!a)return null;var c=[];return a.forEach(function(a){for(var d=[],e=0;e<a.length;e++)q.arcHasLength(a[e],b)&&d.push(a[e]);d.length>0&&c.push(d)}),c.length>0?c:null},q.groupPolygonRings=function(a){var b=[],c=[];a&&a.forEach(function(a){a.area>0?b.push(a):a.area<0&&c.push(a)});var d=b.map(function(a){return[a]});return c.forEach(function(a){for(var c=-1,e=0,f=0,g=b.length;f<g;f++){var h=b[f],i=h.bounds.contains(a.bounds)&&h.area>-a.area;i&&(0===e||h.area<e)&&(e=h.area,c=f)}c==-1?u("[groupPolygonRings()] polygon hole is missing a containing ring, dropping."):d[c].push(a)}),d},q.getPathMetadata=function(a,b,c){return(a||[]).map(function(a){if(!f.isArray(a))throw new Error("expected array");return{ids:a,area:"polygon"==c?la.getPlanarPathArea(a,b):0,
bounds:b.getSimpleShapeBounds(a)}})},q.quantizeArcs=function(a,b){var c=a.getBounds(),d=new m(0,0,b-1,b-1),e=c.getTransform(d),f=e.invert();a.transformPoints(function(a,b){var c=e.transform(a,b);return f.transform(Math.round(c[0]),Math.round(c[1]))})},q.copyDataset=function(a){var b=f.extend({},a);return b.layers=b.layers.map(q.copyLayer),b.arcs&&(b.arcs=b.arcs.getFilteredCopy()),b},q.copyDatasetForExport=function(a){var b=f.extend({},a);return b.layers=b.layers.map(q.copyLayerShapes),b.arcs&&(b.arcs=b.arcs.getFilteredCopy()),b},q.getOutputLayer=function(a,b){return b&&b.no_replace?{geometry_type:a.geometry_type}:a},q.copyLayer=function(a){var b=q.copyLayerShapes(a);return b.data&&(b.data=b.data.clone()),b},q.copyLayerShapes=function(a){var b=f.extend({},a);return a.shapes&&(b.shapes=q.cloneShapes(a.shapes)),b},q.getDatasetBounds=function(a){var b=new m;return a.layers.forEach(function(c){var d=q.getLayerBounds(c,a.arcs);d&&b.mergeBounds(d)}),b},q.datasetHasPaths=function(a){return f.some(a.layers,function(a){return q.layerHasPaths(a)})},q.countMultiPartFeatures=function(a){for(var b=0,c=0,d=a.length;c<d;c++)a[c]&&a[c].length>1&&b++;return b},q.getFeatureCount=function(a){var b=0;return a.data?b=a.data.size():a.shapes&&(b=a.shapes.length),b},q.getLayerBounds=function(a,b){var c=null;return"point"==a.geometry_type?(c=new m,q.forEachPoint(a.shapes,function(a){c.mergePoint(a[0],a[1])})):"polygon"!=a.geometry_type&&"polyline"!=a.geometry_type||(c=q.getPathBounds(a.shapes,b)),c},q.getPathBounds=function(a,b){var c=new m;return q.forEachArcId(a,function(a){b.mergeArcBounds(a,c)}),c},q.replaceLayers=function(a,b,c){var d=a.layers.concat();f.repeat(Math.max(b.length,c.length),function(a){var e=b[a],f=c[a],g=e?d.indexOf(e):d.length;e&&d.splice(g,1),f&&d.splice(g,0,f)}),a.layers=d},q.isolateLayer=function(a,b){return f.defaults({layers:b.layers.filter(function(b){return b==a})},b)},q.findMatchingLayers=function(a,b){var c=[];return String(b).split(",").forEach(function(b){var d=Number(b),e=f.wildcardToRegExp(b);f.isInteger(d)?c.push(d):a.forEach(function(a,b){e.test(a.name)&&c.push(b)})}),c=f.uniq(c),c.map(function(b){return a[b]})},q.transformPoints=function(a,b){a.arcs&&a.arcs.transformPoints(b),a.layers.forEach(function(a){q.layerHasPoints(a)&&q.transformPointsInLayer(a,b)})},q.initDataTable=function(a){a.data=new wa(q.getFeatureCount(a))},q.getAvgSegment=function(a){var b=0,c=a.forEachSegment(function(a,c,d,e){var f=d[a]-d[c],g=e[a]-e[c];b+=Math.sqrt(f*f+g*g)});return b/c||0},q.getAvgSegment2=function(a){var b=0,c=0,d=a.forEachSegment(function(a,d,e,f){b+=Math.abs(e[a]-e[d]),c+=Math.abs(f[a]-f[d])});return[b/d||0,c/d||0]},q.sortSegmentIds=function(a,b){q.orderSegmentIds(a,b),q.quicksortSegmentIds(a,b,0,b.length-2)},q.orderSegmentIds=function(a,b,c){function d(a,c){var d=b[a];b[a]=b[c],b[c]=d}for(var e=0,f=b.length;e<f;e+=2)a[b[e]]>a[b[e+1]]&&d(e,e+1)},q.insertionSortSegmentIds=function(a,b,c,d){for(var e,f,g=c+2;g<=d;g+=2){e=b[g],f=b[g+1];for(var h=g-2;h>=c&&a[e]<a[b[h]];h-=2)b[h+2]=b[h],b[h+3]=b[h+1];b[h+2]=e,b[h+3]=f}},q.quicksortSegmentIds=function(a,b,c,d){for(var g,h,e=c,f=d;e<d;){for(g=a[b[c+d>>2<<1]];e<=f;){for(;a[b[e]]<g;)e+=2;for(;a[b[f]]>g;)f-=2;e<=f&&(h=b[e],b[e]=b[f],b[f]=h,h=b[e+1],b[e+1]=b[f+1],b[f+1]=h,e+=2,f-=2)}if(f-c<40?q.insertionSortSegmentIds(a,b,c,f):q.quicksortSegmentIds(a,b,c,f),d-e<40)return void q.insertionSortSegmentIds(a,b,e,d);c=e,f=d}},q.getIntersectionPoints=function(a){return a.map(function(a){return[a.x,a.y]})},q.findSegmentIntersections=function(){function b(b){var c=4*b;return(!a||a.byteLength<c)&&(a=new ArrayBuffer(c)),new Uint32Array(a,0,b)}var a;return function(a){function m(a){return Math.floor((h-1)*(a-e)/g)}function n(a){return 0}var k,l,c=a.getBounds(),d=!a.isPlanar()&&ja(q.getWorldBounds(),c.toArray()),e=c.ymin,g=c.ymax-e,h=q.calcSegmentIntersectionStripeCount(a),i=new Uint32Array(h),j=h>1?m:n;a.forEachSegment(function(a,b,c,d){for(var e=j(d[a]),f=j(d[b]);;){if(i[e]=i[e]+2,e==f)break;e+=f>e?1:-1}});var o=b(f.sum(i)),p=0,r=[];f.forEach(i,function(a){var b=p;p+=a,r.push(o.subarray(b,p))}),f.initializeArray(i,0),a.forEachSegment(function(a,b,c,d){for(var g,h,e=j(d[a]),f=j(d[b]);;){if(g=i[e],i[e]=g+2,h=r[e],h[g]=a,h[g+1]=b,e==f)break;e+=f>e?1:-1}});var u,s=a.getVertexData(),t=[];for(k=0;k<h;k++)for(u=q.intersectSegments(r[k],s.xx,s.yy,d),l=0;l<u.length;l++)t.push(u[l]);return q.dedupIntersections(t)}}(),q.sortIntersections=function(a){a.sort(function(a,b){return a.x-b.x||a.y-b.y})},q.dedupIntersections=function(a){var b={};return a.filter(function(a){var c=q.getIntersectionKey(a);return!(c in b)&&(b[c]=!0,!0)})},q.getIntersectionKey=function(a){return a.a.join(",")+";"+a.b.join(",")},q.calcSegmentIntersectionStripeCount=function(a){var b=a.getBounds().height(),c=q.getAvgSegment2(a)[1],d=1;return c>0&&b>0&&(d=Math.ceil(b/c/20)),d||1},q.intersectSegments=function(a,b,c,d){var g,h,i,j,k,l,m,n,o,p,r,s,t,u,v,w,x,e=a.length-2,f=[];for(q.sortSegmentIds(b,a),w=0;w<e;){for(g=a[w],h=a[w+1],k=b[g],l=b[h],o=c[g],p=c[h],x=w;x<e&&(x+=2,i=a[x],m=b[i],!(l<m));){if(r=c[i],j=a[x+1],n=b[j],s=c[j],o>=r){if(o>s&&p>r&&p>s)continue}else if(o<s&&p<r&&p<s)continue;g!=i&&g!=j&&h!=i&&h!=j&&(t=N(k,o,l,p,m,r,n,s),t&&(u=[g,h],v=[i,j],f.push(q.formatIntersection(t,u,v,b,c)),4==t.length&&f.push(q.formatIntersection(t.slice(2),u,v,b,c))))}w+=2}return f},q.formatIntersection=function(a,b,c,d,e){var h,i,f=a[0],g=a[1];return b=q.formatIntersectingSegment(f,g,b[0],b[1],d,e),c=q.formatIntersectingSegment(f,g,c[0],c[1],d,e),h=b[0]<c[0]?b:c,i=h==b?c:b,{x:f,y:g,a:h,b:i}},q.formatIntersectingSegment=function(a,b,c,d,e,f){var g=c<d?c:d,h=g===c?d:c;return e[g]==a&&f[g]==b?h=g:e[h]==a&&f[h]==b&&(g=h),[g,h]},la.getPlanarShapeArea=function(a,b){return(a||[]).reduce(function(a,c){return a+la.getPlanarPathArea(c,b)},0)},la.getSphericalShapeArea=function(a,b){return b.isPlanar()&&e("[getSphericalShapeArea()] Function requires decimal degree coordinates"),(a||[]).reduce(function(a,c){return a+la.getSphericalPathArea(c,b)},0)},la.getMaxPath=function(a,b){var c=0;return(a||[]).reduce(function(a,d){var e=b.getSimpleShapeBounds(d).area();return e>c&&(c=e,a=d),a},null)},la.getAvgPathXY=function(a,b){var c=b.getShapeIter(a);if(!c.hasNext())return null;for(var d=c.x,e=c.y,f=0,g=0,h=0;c.hasNext();)f++,g+=c.x,h+=c.y;return 0!==f&&c.x===d&&c.y===e||(g+=d,h+=e,f++),{x:g/f,y:h/f}},la.testPointInPolygon=function(a,b,c,d){var e=!1,f=!1;return c&&c.forEach(function(c){var g=la.testPointInRing(a,b,c,d);1==g?e=!e:g==-1&&(f=!0)}),f||e},la.getPointToPathDistance=function(a,b,c,d){var e=d.getShapeIter(c);if(!e.hasNext())return 1/0;for(var j,k,l,m,f=e.x,g=e.y,h=B(a,b,f,g),i=h;e.hasNext();)l=e.x,m=e.y,j=B(a,b,l,m),k=B(f,g,l,m),i=Math.min(i,fa(h,j,k)),f=l,g=m,h=j;return Math.sqrt(i)},la.getYIntercept=function(a,b,c,d,e){return c+(a-b)*(e-c)/(d-b)},la.getXIntercept=function(a,b,c,d,e){return b+(a-c)*(d-b)/(e-c)},la.getPointToShapeDistance=function(a,b,c,d){var e=(c||[]).reduce(function(c,e){var f=la.getPointToPathDistance(a,b,e,d);return Math.min(c,f)},1/0);return e},la.testPointInRing=function(a,b,c,d){var e=!1,f=!1;return q.forEachPathSegment(c,d,function(c,d,g,h){var i=la.testRayIntersection(a,b,g[c],h[c],g[d],h[d]);1==i?e=!e:isNaN(i)&&(f=!0)}),f?-1:e?1:0},la.testRayIntersection=function(a,b,c,d,e,f){var g=la.getRayIntersection(a,b,c,d,e,f);return g!=g?NaN:g==-(1/0)?0:1},la.getRayIntersection=function(a,b,c,d,e,f){var h,g=-(1/0);return a<c&&a<e||a>c&&a>e||b>d&&b>f||(a===c||a===e?a===c&&a===e?b!=d&&b!=f&&b>d==b>f||(g=NaN):a===c?b===d?g=NaN:e<c&&b<d&&(g=d):b===f?g=NaN:c<e&&b<f&&(g=f):(h=la.getYIntercept(a,c,d,e,f),h>b?g=h:h==b&&(g=NaN))),g},la.getSphericalPathArea=function(a,b){for(var g,h,i,j,c=b.getShapeIter(a),d=0,e=!1,f=Math.PI/180;c.hasNext();)g=c.x*f,h=Math.sin(c.y*f),e?d+=(g-i)*(2+h+j):e=!0,i=g,j=h;return d/2*6378137*6378137},la.getPlanarPathArea2=function(a){for(var c,d,e,f,g,h,i,b=0,j=0,k=a.length;j<k;j++)i=a[j],0===j?(c=0,d=0,g=-i[0],h=-i[1]):(c=i[0]+g,d=i[1]+h,b+=c*f-e*d),e=c,f=d;return b/2},la.getPlanarPathArea=function(a,b){var e,f,g,h,i,j,c=b.getShapeIter(a),d=0;if(c.hasNext())for(e=0,f=0,i=-c.x,j=-c.y;c.hasNext();)g=e,h=f,e=c.x+i,f=c.y+j,d+=e*h-g*f;return d/2},la.countVerticesInPath=function(a,b){for(var c=b.getShapeIter(a),d=0;c.hasNext();)d++;return d},la.getPathBounds=function(a){for(var b=new m,c=0,d=a.length;c<d;c++)b.mergePoint(a[c][0],a[c][1]);return b},la.transposePoints=function(a){for(var b=[],c=[],d=a.length,e=0;e<d;e++)b.push(a[e][0]),c.push(a[e][1]);return[b,c]},la.calcPathLen=function(){function b(b,c,d,e){a+=C(d[b],e[b],d[c],e[c])}var a;return function(c,d){a=0;for(var e=0,f=c.length;e<f;e++)d.forEachArcSegment(c[e],b);return a}}(),q.findNodeTopology=function(a,b){var c=2*a.size(),d=new Float64Array(c),e=new Float64Array(c),f=new Int32Array(c);a.forEach2(function(a,c,g,h,i,j){if(!b||b(j)){var k=a,l=a+c-1,m=2*j,n=m+1;d[m]=g[k],e[m]=h[k],f[m]=j,d[n]=g[l],e[n]=h[l],f[n]=j}});var g=Na(d,e);return{xx:d,yy:e,ids:f,chains:g}},q.getSelfIntersectionSplitter=function(a){function b(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return!0;return!1}function c(c,e){var h,i,f=0,g=null;return a.forEachConnectedArc(e,function(a){var d=~a;b(c,d)&&(0===f?i=d:1===f?h=[i,d]:h.push(d),f++)}),h?(g=q.splitPathByIds(c,h),g.reduce(function(a,b){return a.concat(d(b))},[])):null}function d(a){for(var b=null,d=0;d<a.length-1;d++)if(b=c(a,a[d]))return b;return q.removeSpikesInPath(a),a.length>0?[a]:[]}return d},q.splitPathByIds=function(a,b){var c=b.length,d=b.map(function(b){var c=a.indexOf(b);return c==-1&&e("[splitPathByIds()] Path is missing id:",b),c});f.genericSort(d,!0);var g=d.map(function(b,e){var f;return f=e==c-1?a.slice(0,d[0]).concat(a.slice(b)):a.slice(b,d[e+1])});return 0!==d[0]&&g.unshift(g.pop()),g[0][0]!==a[0]&&e("[splitPathByIds()] Indexing error"),g},q.setBits=function(a,b,c){return a&~c|b&c},q.andBits=function(a,b,c){return a&(~c|b)},q.setRouteBits=function(a,b,c){var e,d=w(b);d==b?e=-4:(e=-49,a<<=4),c[d]&=a|e},q.getRouteBits=function(a,b){var c=w(a),d=b[c];return c!=a&&(d>>=4),7&d},q.openArcRoutes=function(a,b,c,d,e,f,g){q.forEachArcId(a,function(a){var h=a<0,i=h?~a:a,j=c[i],k=h?e:d,l=h?d:e,m=j;b.arcIsLollipop(a)?(v("lollipop"),m=0):(k&&(m|=3),l&&(m|=48),g>0&&(m|=g),f&&34===(34&m)&&(m&=-18)),c[i]=m})},q.closeArcRoutes=function(a,b,c,d,e,f){q.forEachArcId(a,function(a){var b=a<0,g=b?~a:a,h=c[g],i=255,j=b?e:d,k=b?d:e;j&&(f&&(i&=-2),i^=2),k&&(f&&(i&=-17),i^=32),c[g]=h&i})},q.getPathFinder=function(a,b,c,d,f){function l(b){var f=g.indexOfVertex(b,-2),h=i[f],l=j[f],m=g.indexOfVertex(b,-1),n=i[m],o=j[m],p=NaN,q=0;return a.forEachConnectedArc(b,function(f){if(c(~f)){g.getArcLength(f)<2&&e("[pathfinder] defective arc");var y,m=g.indexOfVertex(f,-2),r=i[m],s=j[m],u=g.indexOfVertex(f,-1),w=i[u],x=j[u];if(w===n&&x===o||(t("cd:",r,s,w,x,"arc:",f),e("Error in node topology")),y=k(h,l,n,o,r,s),y>0)if(0===q)p=f,q=y;else{var z=d(~p,q,~f,y,b);2==z&&(p=f,q=y)}else v("#getNextArc() Invalid angle; id:",f,"angle:",y),a.debugNode(b)}}),p===b&&(a.debugNode(b),e("#getNextArc() nextId === prevId")),~p}var g=a.arcs,h=g.getVertexData(),i=h.xx,j=h.yy,k=f?la.signedAngleSph:la.signedAngle;return function(a){var d,e,c=[],f=a,h=!1;do{if(h&&(e=(void 0===d?" ":"  "+d)+" -> "+f),!b(f))return h&&t(e+" x"),null;if(c.push(f),d=f,h&&t(e),f=l(d),h&&f==a&&t("  o",la.getPlanarPathArea(c,g)),f==~d)return v("dead-end"),null}while(f!=a);return 0===c.length?null:c}},q.getRingIntersector=function(a,b,c,d){function g(a,b,c,d,e){var f=1;return b==d?v("[chooseRoute()] parallel routes, unsure which to choose"):d<b&&(f=2),f}function h(a){var b=q.getRouteBits(a,c);return 1==(1&b)}function i(a){var b=q.getRouteBits(a,c),d=!1;return 3==b&&(d=!0,q.setRouteBits(1,a,c)),d}var e=a.arcs,f=q.getPathFinder(a,i,h,g,d);return c=c||new Uint8Array(e.size()),function(a){var i,d="dissolve"==b,g=!0,h="flatten"==b;return a.length>0?(i=[],q.openArcRoutes(a,e,c,g,h,d),q.forEachPath(a,function(a){for(var b,c=0,d=a.length;c<d;c++)b=f(a[c]),b&&i.push(b)}),q.closeArcRoutes(a,e,c,g,h,!0)):i=a,i}},q.debugFlags=function(a){function c(a){for(var b="",c=0;c<8;c++)b+=(a&1<<c)>0?"1":"0",c<7&&(b+=" "),3==c&&(b+=" ");return b}var b=[];f.forEach(a,function(a){b.push(c(a))}),t(b)},q.getHoleDivider=function(a,b){var c=q.getSelfIntersectionSplitter(a);return function(d,e,f){var g=b?la.getSphericalPathArea:la.getPlanarPathArea;q.forEachPath(d,function(b){var d=c(b);0===d.length&&v("[getRingDivider()] Defective path:",b),d.forEach(function(b,c){var d=g(b,a.arcs);d>0?e.push(b):d<0&&f.push(b)})})}},q.cleanShapes=function(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=q.cleanShape(a[d],b,c)},q.cleanShape=function(a,b,c){return q.editPaths(a,function(a){var d=q.cleanPath(a,b);return"polygon"==c&&d&&(q.removeSpikesInPath(d),0===la.getPlanarPathArea(d,b)&&(d=null)),d})},q.cleanPath=function(a,b){for(var c=0,d=0,e=a.length;d<e;d++)b.arcIsDegenerate(a[d])&&(c++,a[d]=null);return c>0?a.filter(function(a){return null!==a}):a},q.removeSpikesInPath=function(a){var b=a.length;if(b>=2){if(a[0]==~a[b-1])a.pop(),a.shift();else for(var c=1;c<b;c++)if(a[c-1]==~a[c]){a.splice(c-1,2);break}a.length<b&&q.removeSpikesInPath(a)}},q.repairPolygonGeometry=function(a,b,c){var d=q.divideArcs(b);return a.forEach(function(a){q.repairSelfIntersections(a,d)}),a},q.repairSelfIntersections=function(a,b){function d(a){var d=[];return q.forEachPath(a,function(a){var f=c(a);if(0===f.length)e("[cleanPolygon()] Defective path:",a);else if(1==f.length)d.push(f[0]);else{var i,g=la.getPlanarPathArea(a,b.arcs),h=g>0?1:-1;f.reduce(function(a,c,d){var e=la.getPlanarPathArea(c,b.arcs)*h;return e>a&&(i=c,a=e),a},0);i&&d.push(i)}}),d.length>0?d:null}var c=q.getSelfIntersectionSplitter(b);a.shapes=a.shapes.map(function(a,b){return d(a)})},q.divideArcs=function(a){var b=a.arcs;i.start(),i.start();var c=q.getHighPrecisionSnapInterval(b),d=q.snapCoordsByInterval(b,c),e=b.dedupCoords();i.stop("snap points"),(d>0||e>0)&&(i.start(),p.buildTopology(a),i.stop("rebuild topology")),i.start();var f=q.insertClippingPoints(b);i.stop("insert clipping points"),i.start();var g=new sa(b);return a.layers.forEach(function(a){q.layerHasPaths(a)&&(q.updateArcIds(a.shapes,f,g),q.cleanShapes(a.shapes,b,a.geometry_type))}),i.stop("update arc ids / clean geometry"),i.stop("divide arcs"),g},q.updateArcIds=function(a,b,c){function g(a){if(a){for(var b=[],c=0;c<a.length;c++)h(a[c],b);e.push(b)}}function h(a,e){var j,f=a<0,g=f?~a:a,h=b[g],i=(g>=b.length-1?d:b[g+1])-1;do f?(j=~i,i--):(j=h,h++),c&&(j=c.findMatchingArc(j)),e.push(j);while(i-h>=0)}for(var e,d=c.arcs.size(),f=0;f<a.length;f++)e=[],q.forEachPath(a[f],g),a[f]=e},q.insertClippingPoints=function(a){var c,l,m,t,b=q.findClippingPoints(a),d=a.getPointCount(),f=a.size(),g=a.getVertexData(),h=g.xx,i=g.yy,j=g.nn,k=0,n=d+2*b.length,o=new Float64Array(n),p=new Float64Array(n),r=[],s=0,u=new Uint32Array(f);b.sort(function(a,b){return b.i-a.i||b.pct-a.pct}),c=b.pop();for(var v=0,w=0;v<f;v++){for(m=j[v],u[v]=w,l=0,t=0;l<m;){for(t++,o[s]=h[k],p[s++]=i[k];c&&c.i===k;)o[s]=c.x,p[s++]=c.y,t++,r[w++]=t,t=0,o[s]=c.x,p[s++]=c.y,t++,c=b.pop();l++,k++}r[w++]=t}return s!=n&&e("[insertClippingPoints()] Counting error"),a.updateVertexData(r,o,p,null),a.dedupCoords(),u},q.findClippingPoints=function(a){function i(a,b,c){var k,g=c[0],h=c[1],i=d[h]-d[g],j=f[h]-f[g];return g>h&&e("[findClippingPoints()] Out-of-sequence arc ids"),k=0===i&&0===j?0:Math.abs(j)>Math.abs(i)?(b-f[g])/j:(a-d[g])/i,(k<0||k>1)&&(u("[findClippingPoints()] Off-segment intersection (caused by rounding error"),v("pct:",k,"dx:",i,"dy:",j,"x:",a,"y:",b,"xx[i]:",d[g],"xx[j]:",d[h],"yy[i]:",f[g],"yy[j]:",f[h]),v("xpct:",(a-d[g])/i,"ypct:",(b-f[g])/j),k<0&&(k=0),k>1&&(k=1)),{pct:k,i:g,j:h,x:a,y:b}}var b=q.findSegmentIntersections(a),c=a.getVertexData(),d=c.xx,f=c.yy,g=[];b.forEach(function(a){var b=i(a.x,a.y,a.a),c=i(a.x,a.y,a.b);b&&g.push(b),c&&g.push(c)});var h={};return g.filter(function(b){var c=b.i+","+b.pct;return!(c in h)&&(h[c]=!0,!(b.pct<=0&&a.pointIsEndpoint(b.i)||b.pct>=1&&a.pointIsEndpoint(b.j)))})},q.getEncodings=function(){var b=a("iconv-lite");return b.encodingExists("ascii"),Object.keys(b.encodings)},q.validateEncoding=function(a){return q.encodingIsSupported(a)||r("Unknown encoding:",a,"\nRun the -encodings command see a list of supported encodings"),a},q.encodingIsSupported=function(a){var b=q.standardizeEncodingName(a);return f.contains(q.getEncodings(),b)},q.decodeString=function(b,c){var d=a("iconv-lite"),e=d.decode(b,c);return 65279==e.charCodeAt(0)&&(e=e.substr(1)),e},q.standardizeEncodingName=function(a){return a.toLowerCase().replace(/[_-]/g,"")},q.printEncodings=function(){var a=q.getEncodings().filter(function(a){return!/^(_|cs|internal|ibm|isoir|singlebyte|table|[0-9]|l[0-9]|windows)/.test(a)});a.sort(),t("Supported encodings:"),t(q.formatStringsAsGrid(a))},q.detectEncoding=function(a){var b=null;return q.looksLikeUtf8(a)?b="utf8":q.looksLikeWin1252(a)&&(b="win1252"),b},q.decodeSamples=function(a,b){return b.map(function(b){return q.decodeString(b,a).trim()}).join("\n")},q.formatSamples=function(a){return q.formatStringsAsGrid(a.split("\n"))},q.looksLikeWin1252=function(a){var b="abcdefghijklmnopqrstuvwxyz0123456789.'\"?+-\n,:;/|_$% ",c="",d=q.decodeSamples("win1252",a),e=q.getCharScore(d,b),f=q.getCharScore(d,c+b);return f>.97&&e>.7},q.looksLikeUtf8=function(a){var b=q.decodeSamples("utf8",a);return b.indexOf("")==-1},q.getCharScore=function(a,b){var c={},d=0;a=a.toLowerCase();for(var f=0,g=b.length;f<g;f++)c[b[f]]=1;for(f=0,g=a.length;f<g;f++)d+=c[a[f]]||0;return d/a.length},q.getValueType=function(a){var b=null;return f.isString(a)?b="string":f.isNumber(a)?b="number":f.isBoolean(a)?b="boolean":f.isObject(a)&&(b="object"),b},q.getColumnType=function(a,b){for(var e,c=null,d=b.getRecords(),f=0,g=b.size();f<g&&(e=d[f]||{},!(c=q.getValueType(e[a])));f++);return c},q.deleteFields=function(a,b){a.getFields().forEach(function(c){b(c)&&a.deleteField(c)})},q.isInvalidFieldName=function(a){return/^\s*$/.test(a)},q.getUniqFieldNames=function(a,b){var c={};return a.map(function(a){var e,d=0;do e=q.adjustFieldName(a,b,d),d++;while(e in c);return c[e]=!0,e})},q.adjustFieldName=function(a,b,c){var d,e;return b=b||256,c?(e=String(c),1==e.length&&(e="_"+e),d=a.substr(0,b-e.length)+e):d=a.substr(0,b),d};var ta={};ta.languageIds=[1,"437",2,"850",3,"1252",8,"865",9,"437",10,"850",11,"437",13,"437",14,"850",15,"437",16,"850",17,"437",18,"850",19,"932",20,"850",21,"437",22,"850",23,"865",24,"437",25,"437",26,"850",27,"437",28,"863",29,"850",31,"852",34,"852",35,"852",36,"860",37,"850",38,"866",55,"850",64,"852",77,"936",78,"949",79,"950",80,"874",87,"1252",88,"1252",89,"1252",100,"852",101,"866",102,"865",103,"861",106,"737",107,"857",108,"863",120,"950",121,"949",122,"936",123,"932",124,"874",134,"737",135,"852",136,"857",200,"1250",201,"1251",202,"1254",203,"1253",204,"1257"],ta.encodingNames={932:"Japanese",936:"Simplified Chinese",950:"Traditional Chinese",1252:"Western European",949:"Korean",874:"Thai",1250:"Eastern European",1251:"Russian",1254:"Turkish",1253:"Greek",1257:"Baltic"},ta.ENCODING_PROMPT='To avoid corrupted text, re-import using the "encoding=" option.\nTo see a list of supported encodings, run the "encodings" command.',ta.lookupCodePage=function(a){var b=ta.languageIds.indexOf(a);return b==-1?null:ta.languageIds[b+1]},ta.readAsciiString=function(a,b){var c=h.inNode,d=a.readCString(b,c);return null===d&&r("DBF file contains non-ascii text.\n"+ta.ENCODING_PROMPT),f.trim(d)},ta.readStringBytes=function(a,b,c){for(var e,d=0,f=0;f<b&&(e=a.readUint8(),0!==e);f++)(d>0||32!=e)&&(c[d++]=e);for(;d>0&&32==c[d-1];)d--;return d},ta.getAsciiStringReader=function(){var a=new Uint8Array(256);return function(c,d){for(var e="",f=ta.readStringBytes(c,d,a),g=0;g<f;g++)e+=String.fromCharCode(a[g]);return e}},ta.getEncodedStringReader=function(a){var b=new c(256),d="utf8"==q.standardizeEncodingName(a);return function(e,f){var h,g=ta.readStringBytes(e,f,b);return h=0===g?"":d?b.toString("utf8",0,g):q.decodeString(b.slice(0,g),a)}},ta.getStringReader=function(a){return a&&"ascii"!==a?h.inNode?ta.getEncodedStringReader(a):void e("[Dbf.getStringReader()] Non-ascii encodings only supported in Node."):ta.getAsciiStringReader()},ta.bufferContainsHighBit=function(a,b){for(var c=0;c<b;c++)if(a[c]>=128)return!0;return!1},ta.getNumberReader=function(){var a=ta.getAsciiStringReader();return function(c,d){var f,e=a(c,d);return e.indexOf(",")>=0&&(e=e.replace(",",".")),f=parseFloat(e),isNaN(f)?null:f}},ta.readInt=function(a,b){return a.readInt32()},ta.readBool=function(a,b){var c=a.readCString(b),d=null;return/[ty]/i.test(c)?d=!0:/[fn]/i.test(c)&&(d=!1),d},ta.readDate=function(a,b){var c=a.readCString(b),d=c.substr(0,4),e=c.substr(4,2),f=c.substr(6,2);return new Date(Date.UTC(+d,+e-1,+f))},ta.MAX_STRING_LEN=254,ta.exportRecords=function(a,b){b=b||"ascii";var c=ta.getFieldNames(a),d=q.getUniqFieldNames(c,10),g=a.length,h=c.map(function(c){return ta.getFieldInfo(a,c,b)}),i=ta.getHeaderSize(h.length),j=ta.getRecordSize(f.pluck(h,"size")),k=i+g*j+1,l=new ArrayBuffer(k),m=new n(l).littleEndian(),o=new Date;return m.writeUint8(3),m.writeUint8(o.getFullYear()-1900),m.writeUint8(o.getMonth()+1),m.writeUint8(o.getDate()),m.writeUint32(g),m.writeUint16(i),m.writeUint16(j),m.skipBytes(17),m.writeUint8(0),m.skipBytes(2),h.reduce(function(a,b,c){var e=d[c];return m.writeCString(e,11),m.writeUint8(b.type.charCodeAt(0)),m.writeUint32(a),m.writeUint8(b.size),m.writeUint8(b.decimals),m.skipBytes(14),a+b.size},1),m.writeUint8(13),m.position()!=i&&e("Dbf#exportRecords() header size mismatch; expected:",i,"written:",m.position()),a.forEach(function(a,b){var c=m.position();m.writeUint8(32);for(var d=0,f=h.length;d<f;d++)h[d].write(b,m);m.position()-c!=j&&e("#exportRecords() Error exporting record:",a)}),m.writeUint8(26),m.position()!=k&&e("Dbf#exportRecords() file size mismatch; expected:",k,"written:",m.position()),l},ta.getFieldNames=function(a){if(!a||!a.length)return[];var b=Object.keys(a[0]);return b.sort(),b},ta.getHeaderSize=function(a){return 33+32*a},ta.getRecordSize=function(a){return f.sum(a)+1},ta.initNumericField=function(a,b,c){var g,h,d=18;g=this.getNumericFieldInfo(b,c),a.decimals=g.decimals,h=Math.max(g.max.toFixed(a.decimals).length,g.min.toFixed(a.decimals).length),h>d&&(h=d,a.decimals-=h-d,a.decimals<0&&e("Dbf#getFieldInfo() Out-of-range error.")),a.size=h;var i=ta.getDecimalFormatter(h,a.decimals);a.write=function(a,d){var e=b[a],g=i(e[c]);g.length<h&&(g=f.lpad(g,h," ")),d.writeString(g,h)}},ta.initBooleanField=function(a,b,c){a.size=1,a.write=function(a,d){var f,e=b[a][c];f=e===!0?"T":e===!1?"F":"?",d.writeString(f)}},ta.initDateField=function(a,b,c){a.size=8,a.write=function(a,d){var g,e=b[a][c];g=e instanceof Date==!1?"00000000":f.lpad(e.getUTCFullYear(),4,"0")+f.lpad(e.getUTCMonth()+1,2,"0")+f.lpad(e.getUTCDate(),2,"0"),d.writeString(g)}},ta.initStringField=function(a,b,c,d){var e=ta.getStringWriter(d),f=0,g=b.map(function(a){var b=e(a[c]);return f=Math.max(f,b.byteLength),b});a.size=f,a.write=function(a,b){var c=g[a],d=Math.min(f,c.byteLength),e=b.position();b.writeBuffer(c,d,0),b.position(e+f)}},ta.getFieldInfo=function(a,b,c){var d=this.discoverFieldType(a,b),e={name:b,type:d,decimals:0};return"N"==d?ta.initNumericField(e,a,b):"C"==d?ta.initStringField(e,a,b,c):"L"==d?ta.initBooleanField(e,a,b):"D"==d?ta.initDateField(e,a,b):(e.size=0,e.type="N",e.write=function(){}),e},ta.discoverFieldType=function(a,b){for(var c,d=0,e=a.length;d<e;d++){if(c=a[d][b],f.isString(c))return"C";if(f.isNumber(c))return"N";if(f.isBoolean(c))return"L";if(c instanceof Date)return"D"}return null},ta.getDecimalFormatter=function(a,b){var c=" ";return function(d){var e=f.isFiniteNumber(d),g=e?d.toFixed(b):String(c);return f.lpad(g,a," ")}},ta.getNumericFieldInfo=function(a,b){for(var i,j,c=0,d=15,e=1/0,g=-(1/0),h=1,k=0,l=a.length;k<l;k++)if(i=a[k][b],f.isFiniteNumber(i)){for(j=0,i<e&&(e=i),i>g&&(g=i);i*h%1!==0&&j!=d;)j++,h*=10;j>c&&(c=j)}return{decimals:c,min:e,max:g}},ta.getStringWriter=function(a){return"ascii"===a?ta.getStringWriterAscii():ta.getStringWriterEncoded(a)},ta.getStringWriterAscii=function(){return function(a){for(var b=String(a),c=Math.min(b.length,ta.MAX_STRING_LEN),d=new ArrayBuffer(c),e=new Uint8ClampedArray(d),f=0;f<c;f++)e[f]=b.charCodeAt(f);return d}},ta.getStringWriterEncoded=function(b){var c=a("iconv-lite");return function(a){var d=c.encode(a,b);return d.length>=ta.MAX_STRING_LEN&&(d=ta.truncateEncodedString(d,b,ta.MAX_STRING_LEN)),n.toArrayBuffer(d)}},ta.truncateEncodedString=function(a,b,c){for(var f,g,d=a.slice(0,c),e=c;e>0&&e>=c-3;){if(f=e==c?d:a.slice(0,e),g=q.decodeString(f,b),""!=g.charAt(g.length-1)){d=f;break}e--}return d};var va=/^[a-zA-Z_][a-zA-Z_0-9]*$/,xa={fieldExists:function(a){return f.contains(this.getFields(),a)},exportAsJSON:function(){return JSON.stringify(this.getRecords())},addField:function(a,b){var c=f.isFunction(b);f.isNumber(b)||f.isString(b)||c||e("DataTable#addField() requires a string, number or function for initialization"),this.fieldExists(a)&&e("DataTable#addField() tried to add a field that already exists:",a),va.test(a)||e("DataTable#addField() invalid field name:",a),this.getRecords().forEach(function(d,e){d[a]=c?b(d,e):b})},addIdField:function(){this.addField("FID",function(a,b){return b})},deleteField:function(a){this.getRecords().forEach(function(b){delete b[a]})},getFields:function(){var a=this.getRecords(),b=a[0];return b?Object.keys(b):[]},update:function(a){for(var b=this.getRecords(),c=0,d=b.length;c<d;c++)b[c]=a(b[c],c)},clone:function(){var a=this.getRecords().map(function(a){return f.extend({},a)});return new wa(a)},size:function(){return this.getRecords().length}};f.extend(wa.prototype,xa),q.getCategoryClassifier=function(a,b){if(!a)return function(a){return 0};b&&b.fieldExists(a)||r("[dissolve] Data table is missing field:",a);var c={},d=0,e=b.getRecords();return function(b){var f=String(e[b][a]);return f in c==!1&&(c[f]=d++),c[f]}},q.aggregateDataRecords=function(a,b,c){var d=[],e=c.sum_fields||[],f=c.copy_fields||[];return c.field&&f.push(c.field),a.forEach(function(a,c){if(a){var h,g=b(c);g in d?h=d[g]:(d[g]=h={},f.forEach(function(b){h[b]=a[b]})),e.forEach(function(b){h[b]=(a[b]||0)+(h[b]||0)})}}),d},q.simplifyArcsFast=function(a,b){for(var f,c=[],d=[],e=[],g=0,h=a.size();g<h;g++)f=q.simplifyPathFast([g],a,b,c,d),1==f&&(f=0,c.pop(),d.pop()),e.push(f);return new pa(e,c,d)},q.simplifyPolygonFast=function(a,b,c){if(!a||!c)return null;var d=[],e=[],f=[],g=[];return a.forEach(function(a){for(var h=q.simplifyPathFast(a,b,c,d,e);h<4&&h>0;)d.pop(),e.pop(),h--;h>0&&(g.push([f.length]),f.push(h))}),{shape:g.length>0?g:null,arcs:new pa(f,d,e)}},q.simplifyPathFast=function(a,b,c,d,e){for(var h,i,j,k,f=b.getShapeIter(a),g=0;f.hasNext();)j=f.x,k=f.y,(0===g||C(j,k,h,i)>c)&&(d.push(j),e.push(k),h=j,i=k,g++);return j==h&&k==i||(d.push(j),e.push(k),g++),g},la.getShapeCentroid=function(a,b){var c=la.getMaxPath(a,b);return c?la.getPathCentroid(c,b):null},la.getPathCentroid=function(a,b){var g,h,i,j,c=b.getShapeIter(a),d=0,e=0,f=0;if(!c.hasNext())return null;for(g=c.x,h=c.y;c.hasNext();)i=g*c.y-h*c.x,d+=i,e+=i*(c.x+g),f+=i*(c.y+h),g=c.x,h=c.y;return j=d/2,0===j?la.getAvgPathXY(a,b):{x:e/(6*j),y:f/(6*j)}},la.findInteriorPoint=function(a,b){var e,f,c=a&&la.getMaxPath(a,b),d=c&&b.getSimpleShapeBounds(c);return d&&d.hasBounds()&&0!==d.area()?(e=.01*Math.sqrt(d.area()),f=q.simplifyPolygonFast(a,b,e),f.shape?la.findInteriorPoint2(f.shape,f.arcs):null):null},la.findInteriorPoint2=function(a,b){var h,i,j,k,l,m,n,o,c=la.getMaxPath(a,b),d=b.getSimpleShapeBounds(c),e=la.getPathCentroid(c,b),f=q.getPointWeightingFunction(e,d),g=la.getPlanarPathArea(c,b);return 1==a.length&&1.2*g>d.area()?(l=5,k=.2):1==a.length&&1.7*g>d.area()?(l=7,k=.4):(l=11,k=.5),h=d.width()*k,i=e.x-h/2,j=i+h,m=h/l,n=q.probeForBestInteriorPoint(a,b,i,j,l,f),n?(o=q.probeForBestInteriorPoint(a,b,n.x-m/2,n.x+m/2,2,f),o.distance>n.distance&&(n=o)):(u("[points inner] failed, falling back to centroid"),n=e),n},q.getPointWeightingFunction=function(a,b){var c=Math.max(b.width(),b.height())/2;return function(b,d){var e=C(a.x,a.y,b,d);return 1-Math.min(.6*e/c,.25)}},q.findInteriorPointCandidates=function(a,b,c){var d=b.getBounds().ymin-1;return c.reduce(function(c,e){var f=q.findHitCandidates(e,d,a,b);return c.concat(f)},[])},q.probeForBestInteriorPoint=function(a,b,c,d,e,f){var j,k,l,g=q.getInnerTics(c,d,e),h=(d-c)/e,i=q.findInteriorPointCandidates(a,b,g);i.forEach(function(a){a.interval*=f(a.x,a.y)}),i.sort(function(a,b){return b.interval-a.interval});for(var m=0;m<i.length&&(l=i[m],!(j&&j.distance>l.interval));m++)k=q.getAdjustedPoint(l.x,l.y,a,b,h,f),(!j||k.distance>j.distance)&&(j=k);return j},q.getAdjustedPoint=function(a,b,c,d,e,f){var g={x:a,y:b,distance:la.getPointToShapeDistance(a,b,c,d)*f(a,b)};return q.scanForBetterPoint(g,c,d,e,f),q.scanForBetterPoint(g,c,d,-e,f),g},q.scanForBetterPoint=function(a,b,c,d,e){for(var i,f=a.x,g=a.y,h=a.distance;;){if(g+=d,i=la.getPointToShapeDistance(f,g,b,c)*e(f,g),!(i>.9*h&&la.testPointInPolygon(f,g,b,c)))break;i>h&&(a.distance=h=i,a.y=g)}},q.findHitCandidates=function(a,b,c,d){var h,i,j,e=q.findRayShapeIntersections(a,b,c,d),g=[];f.genericSort(e);for(var k=0;k<e.length;k+=2)h=e[k],i=e[k+1],j=(i-h)/2,j>0&&g.push({y:(h+i)/2,x:a,interval:j});return g},q.findRayShapeIntersections=function(a,b,c,d){return c?c.reduce(function(c,e){var f=q.findRayRingIntersections(a,b,e,d);return c.concat(f)},[]):[]},q.findRayRingIntersections=function(a,b,c,d){var e=[];return q.forEachPathSegment(c,d,function(c,d,f,g){var h=la.getRayIntersection(a,b,f[c],g[c],f[d],g[d]);h>-(1/0)&&e.push(h)}),e.length%2===1&&(e=[]),e},q.getInnerTics=function(a,b,c){for(var d=b-a,e=d/(c+1),f=[],g=1;g<=c;g++)f.push(a+e*g);return f},q.compileValueExpression=function(a,b,c){return q.compileFeatureExpression(a,b,c,!0)},q.compileFeatureExpression=function(a,b,c,d){var g,h,e=a||"",f=q.getAssignedVars(e);return f.length>0&&!b.data&&q.initDataTable(b),h=b.data?b.data.getRecords():[],g=q.getExpressionFunction(e,b,c,d),function(a){var b=h[a];b||(b=h[a]={});for(var c=0;c<f.length;c++)f[c]in b==!1&&(b[f[c]]=null);return g(b,a)}},q.getAssignedVars=function(a){var b=/[A-Za-z_][A-Za-z0-9_]*(?= *=[^=])/g;return a.match(b)||[]},q.getExpressionFunction=function(a,b,c,d){var g,e=q.getExpressionContext(b,c),f=(d?"return ":"")+a;try{g=new Function("record,env","with(env){with(record){ "+f+"}}")}catch(b){r(b.name,"in expression ["+a+"]")}return function(b,c){var d;e.$.__setId(c);try{d=g.call(null,b,e)}catch(b){r(b.name,"in expression ["+a+"]:",b.message)}return d}},q.getExpressionContext=function(a,b){var c=q.getBaseContext();return a.data&&a.data.getFields().forEach(function(a){c[a]=null}),c.$=new za(a,b),c},q.getBaseContext=function(){var a={};return function(){for(var b in this)a[b]=null}(),a.console=console,a},p.dissolve=function(a,b,c){var h,d=c||{},e=q.getCategoryClassifier(d.field,a.data),f=null,g=null;if("polygon"==a.geometry_type?f=Ca(a.shapes,e):"point"==a.geometry_type?f=Aa(a,e,d):a.geometry_type&&r("[dissolve] Only point and polygon geometries can be dissolved"),a.data){g=q.aggregateDataRecords(a.data.getRecords(),e,d);for(var i=0,j=g.length;i<j;i++)f&&!f[i]&&(f[i]=null)}return h={name:d.no_replace?null:a.name,shapes:f,data:g?new wa(g):null,geometry_type:a.geometry_type},d.silent||q.printDissolveMessage(a,h),h},q.printDissolveMessage=function(a,b,c){var d=q.getFeatureCount(a),e=q.getFeatureCount(b),g=f.format("[%s] Dissolved %,d feature%s into %,d feature%s",c||"dissolve",d,f.pluralSuffix(d),e,f.pluralSuffix(e));t(g)},p.dissolve2=function(a,b,c){q.requirePolygonLayer(a,"[dissolve2] Expected a polygon type layer");var d=q.divideArcs(b);return q.dissolvePolygonLayer(a,d,c)},q.dissolvePolygonLayer=function(a,b,c){c=c||{};var g,h,d=q.getCategoryClassifier(c.field,a.data),e=a.shapes.reduce(function(a,b,c){var e=d(c);return e in a==!1&&(a[e]=[]),q.extendShape(a[e],b),a},[]),f=q.getPolygonDissolver(b);
return i.start(),a.data&&(h=new wa(q.aggregateDataRecords(a.data.getRecords(),d,c))),g={name:c.no_replace?null:a.name,data:h,shapes:e.map(f),geometry_type:a.geometry_type},i.stop("dissolve2"),q.printDissolveMessage(a,g,"dissolve2"),g},q.concatShapes=function(a){return a.reduce(function(a,b){return q.extendShape(a,b),a},[])},q.extendShape=function(a,b){if(b)for(var c=0,d=b.length;c<d;c++)a.push(b[c])},q.getPolygonDissolver=function(a,b){b=b&&!a.arcs.isPlanar();var c=new Uint8Array(a.arcs.size()),d=q.getHoleDivider(a,b),e=q.getRingIntersector(a,"flatten",c,b),f=q.getRingIntersector(a,"dissolve",c,b);return function(a){if(!a)return null;var b=[],c=[];d(a,b,c),b=e(b),c.forEach(q.reversePath),c=e(c),c.forEach(q.reversePath);var g=q.appendHolestoRings(b,c),h=f(g);return h.length>0?h:null}},q.appendHolestoRings=function(a,b){for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},q.clipPolygons=function(a,b,c,d){function p(a,b,c){var d=[],f="clip"==b,l="erase"==b;return q.openArcRoutes(a,e,g,!0,!1,!1),q.forEachPath(a,function(a){for(var b,e=0,g=a.length;e<g;e++)if(h=0,i=0,b=k(a[e]))if(0===h||0===i){var j=c.pathIsEnclosed(b);(f&&j||l&&!j)&&d.push(b)}else d.push(b)}),q.closeArcRoutes(a,e,g,!0,!0,!0),j.length>0&&(q.closeArcRoutes(j,e,g,!0,!0,!0),j=[]),0===d.length?null:d}function r(a){var b=a>=0,c=b?a:~a,d=b?1:16,e=g[c],i=f[c];return i>0&&h++,(e&d)>0||(i&d)>0}function s(a){var k,l,b=a>=0,c=b?a:~a,e=g[c],h=f[c];b?(k=e,l=h):(k=e>>4,l=h>>4),k&=3,l&=3;var m=!1;return 3==k?1==l||2==l&&"erase"==d||(m=!0):0===k&&3==l&&(j.push(a),m=!0),m&&(3==l&&i++,e=b?q.setBits(e,1,3):q.setBits(e,16,48)),e|=b?4:64,g[c]=e,m}function t(a,b,c,d,e){var f=1;if(b==d){var h=q.getRouteBits(c,g);3==h&&(f=2)}else d<b&&(f=2);return f}function u(a){return a.map(function(a){var b=[];return q.forEachPath(a,function(a){for(var c=!0,d=!1,e=0;e<a.length;e++){if(!v(a[e],g)){c=!1;break}!d&&x(a[e],f)&&(d=!0)}c&&d&&b.push(a)}),b.length>0?b:null})}function v(a,b){var c=w(a),d=b[c];return 0===(68&d)}function x(a,b){var c=b[w(a)];return(17&c)>0}function y(a,b,c){var d=c.findPathsInsideShape(a),f=[];return d?("erase"==b&&d.forEach(q.reversePath),d.length<=1?f=d:(q.openArcRoutes(d,e,g,!0,!1,!0),d.forEach(function(a){for(var b,c=0;c<a.length;c++)b=k(a[c]),b&&f.push(b)})),f.length>0?f:null):null}var e=c.arcs,f=new Uint8Array(e.size()),g=new Uint8Array(e.size()),h=0,i=0,j=[],k=q.getPathFinder(c,s,r,t),l=q.getPolygonDissolver(c);a=a.map(l),b=[l(q.concatShapes(b))],q.openArcRoutes(b,e,f,"clip"==d,"erase"==d,!0,17);var m=new ra(b,e),n=a.map(function(a){return a?p(a,d,m):null}),o=u(b);return q.closeArcRoutes(b,e,g,!0,!0),m=new ra(o,e),a.forEach(function(a,b){var c=a?y(a,d,m):null;c&&(n[b]=(n[b]||[]).concat(c))}),n},q.clipPolylines=function(a,b,c,d){function f(a){var b=a.reduce(g,[]);return b.length>0?b:null}function g(a,b){for(var f,g,c=null,h=0;h<b.length;h++)f=b[h],g=e.arcIsEnclosed(f),g&&"clip"==d||!g&&"erase"==d?(c||a.push(c=[]),c.push(f)):c=null;return a}var e=new ra(b,c.arcs);return a.map(function(a){return f(a)})},q.clipPoints=function(a,b,c,d){var e=new ra(b,c),f=a.reduce(function(a,b){for(var g,c=b?b.length:0,f=[],h=0;h<c;h++)g=e.findEnclosingShape(b[h])>-1,("clip"==d&&g||"erase"==d&&!g)&&f.push(b[h].concat());return a.push(f.length>0?f:null),a},[]);return f},q.getPathEndpointTest=function(a,b){function d(a){q.forEachPath(a,e)}function e(a){f(~a[0]),f(a[a.length-1])}function f(a){var b=w(a),d=b==a;c[b]|=d?1:2}var c=new Uint8Array(b.size());return a.forEach(function(a){q.layerHasPaths(a)&&a.shapes.forEach(d)}),function(a){var b=w(a),d=b==a,e=c[b];return d?1==(1&e):2==(2&e)}},q.dissolveArcs=function(a){function i(a){for(var j,k,l,m,n,o,c=0,i=[],p=0,q=a.length;p<q;p++)k=a[p],l=w(k),n=k===l,b.arcIsDegenerate(k)||(0!==h[l]?j=null:(m=b.getArcLength(k),j&&d(a[p-1],k)?(m>0&&m--,j.push(k),h[l]=1):(j=[k],g[l]=e.length,e.push(j),h[l]=n?2:3),c+=m)),h[l]>1&&(o=g[l],(n&&3==h[l]||!n&&2==h[l])&&(o=~o),i.push(o));return f+=c,i}var b=a.arcs,c=a.layers.filter(q.layerHasPaths),d=q.getArcDissolveTest(c,b),e=[],f=0,g=new Int32Array(b.size()),h=new Uint8Array(b.size());c.forEach(function(a){a.shapes=a.shapes.map(function(a){return q.editPaths(a&&a.concat(),i)})}),q.dissolveArcCollection(b,e,f)},q.dissolveArcCollection=function(a,b,c){function k(a,b){var c=w(a),k=a<0,l=h.nn[c],m=h.ii[c],n=d[b];l>0&&(n>0&&(l--,k||m++),f.copyElements(h.xx,m,e,j,l,k),f.copyElements(h.yy,m,g,j,l,k),i&&f.copyElements(h.zz,m,i,j,l,k),d[b]+=l,j+=l)}var d=new Uint32Array(b.length),e=new Float64Array(c),g=new Float64Array(c),h=a.getVertexData(),i=h.zz?new Float64Array(c):null,j=0;b.forEach(function(a,b){a.forEach(function(a,c){k(a,b)})}),a.updateVertexData(d,e,g,i)},q.getArcDissolveTest=function(a,b){function h(a,b){f++,g=a}var f,g,c=q.getFilteredNodeCollection(a,b),d=a.filter(function(a){return"polyline"==a.geometry_type}),e=q.getPathEndpointTest(d,b);return function(a,b){return a==b||a==~b?(u("Unexpected arc sequence:",a,b),!1):(f=0,c.forEachConnectedArc(a,h),1==f&&g==~b&&!e(a)&&!e(~b))}},q.getFilteredNodeCollection=function(a,b){var c=q.countArcReferences(a,b),d=function(a){return c[w(a)]>0};return new sa(b,d)},q.countArcReferences=function(a,b){var c=new Uint32Array(b.size());return a.forEach(function(a){q.countArcsInShapes(a.shapes,c)}),c},p.filterFeatures=function(a,b,c){var k,d=a.data?a.data.getRecords():null,e=a.shapes||null,g=q.getFeatureCount(a),h=e?[]:null,i=d?[]:null,j=q.getOutputLayer(a,c);return c.expression&&(k=q.compileValueExpression(c.expression,a,b)),c.remove_empty&&(k=q.combineFilters(k,q.getNullGeometryFilter(a,b))),k||r("[filter] Missing a filter expression"),f.repeat(g,function(a){var b=k(a);b===!0?(e&&h.push(e[a]||null),d&&i.push(d[a]||null)):b!==!1&&r("[filter] Expression must return true or false")}),j.shapes=h,j.data=i?new wa(i):null,c.no_replace&&(j=q.copyLayer(j)),c.verbose!==!1&&t(f.format("[filter] Retained %,d of %,d features",q.getFeatureCount(j),g)),j},q.getNullGeometryFilter=function(a,b){var c=a.shapes;return"polygon"==a.geometry_type?q.getEmptyPolygonFilter(c,b):function(a){return!!c[a]}},q.getEmptyPolygonFilter=function(a,b){return function(c){var d=a[c];return!!d&&la.getPlanarShapeArea(a[c],b)>0}},q.combineFilters=function(a,b){return a&&b&&function(c){return a(c)&&b(c)}||a||b},p.filterIslands=function(a,b,c){var d=0;"polygon"==a.geometry_type&&(c.min_area||c.min_vertices?(c.min_area&&(d+=q.filterIslands(a,b,q.getMinAreaTest(c.min_area,b))),c.min_vertices&&(d+=q.filterIslands(a,b,q.getVertexCountTest(c.min_vertices,b))),c.remove_empty&&p.filterFeatures(a,b,{remove_empty:!0,verbose:!1}),t(f.format("Removed %'d island%s",d,f.pluralSuffix(d)))):t("[filter-islands] Missing a criterion for filtering islands; use min-area or min-vertices"))},q.getVertexCountTest=function(a,b){return function(c){return la.countVerticesInPath(c,b)<=a}},q.getMinAreaTest=function(a,b){var c=b.isPlanar()?la.getPlanarPathArea:la.getSphericalPathArea;return function(d){var e=c(d,b);return Math.abs(e)<a}},q.filterIslands=function(a,b,c){var d=0,e=new Uint8Array(b.size());q.countArcsInShapes(a.shapes,e);var f=function(a,f,g){if(1==a.length&&1===e[w(a[0])]&&(!c||c(a))&&!q.ringHasHoles(a,g,b))return d++,null};return q.filterShapes(a.shapes,f),d},q.ringIntersectsBBox=function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(c.arcIntersectsBBox(w(a[d]),b))return!0;return!1},q.ringHasHoles=function(a,b,c){for(var e,f,d=c.getSimpleShapeBounds2(a),g=0,h=b.length;g<h;g++)if(e=b[g],e&&e!=a&&q.ringIntersectsBBox(e,d,c)&&(f=c.getVertex(e[0],0),la.testPointInRing(f.x,f.y,a,c)))return!0;return!1},q.filterShapes=function(a,b){for(var c=function(a){return q.editPaths(a,b)},d=0,e=a.length;d<e;d++)a[d]=c(a[d])},p.filterSlivers=function(a,b,c){return"polygon"!=a.geometry_type?0:q.filterSlivers(a,b,c)},q.filterSlivers=function(a,b,c){var d=c&&c.min_area?q.getMinAreaTest(c.min_area,b):q.getSliverTest(b),e=0,f=function(a,b,c){if(d(a))return e++,null};return q.filterShapes(a.shapes,f),e},q.filterClipSlivers=function(a,b,c){var d=new Uint8Array(c.size()),e=q.getSliverTest(c),f=0,g=function(a){for(var b=0,c=0,g=0,h=a&&a.length||0;g<h;g++)d[w(a[g])]>0?c++:b++;if(c>0&&b>0&&e(a))return f++,null};return q.countArcsInShapes(b.shapes,d),q.filterShapes(a.shapes,g),f},q.getSliverTest=function(a){var b=q.calcMaxSliverArea(a);return function(c){return Math.abs(la.getPlanarPathArea(c,a))<=b}},q.calcMaxSliverArea=function(a){var b=2,c=a.getBounds().width()/b,d=a.getBounds().height()/b,e=0,f=0;return a.forEachSegment(function(a,b,g,h){var i=Math.abs(g[a]-g[b]),j=Math.abs(h[a]-h[b]);i<c&&j<d&&(f+=(Math.sqrt(i*i+j*j)-f)/++e)}),f*f},p.clipLayers=function(a,b,c,d){return q.clipLayers(a,b,c,"clip",d)},p.eraseLayers=function(a,b,c,d){return q.clipLayers(a,b,c,"erase",d)},p.clipLayer=function(a,b,c,d){return p.clipLayers([a],b,c,d)[0]},p.eraseLayer=function(a,b,c,d){return p.eraseLayers([a],b,c,d)[0]},q.clipLayers=function(a,b,c,d,e){var f,g;return e=e||{no_cleanup:!0},f=q.findClippingLayer(b,c),f?g=c:(g=e.bbox?q.convertClipBounds(e.bbox):q.loadExternalClipLayer(b,e),g&&1==g.layers.length||r("[clip/erase] Missing clipping data"),f=g.layers[0]),q.requirePolygonLayer(f,"["+d+"] Requires a polygon clipping layer"),q.clipLayersByLayer(a,c,f,g,d,e)},q.clipLayersByLayer=function(a,b,c,d,e,g){var l,m,n,h=f.some(a,q.layerHasPaths),i=b!=d,j=0,k=0;return i?(n=q.mergeDatasets([b,d]),p.buildTopology(n),b.arcs=n.arcs):n=b,h&&(l=q.divideArcs(n)),m=a.map(function(a){var f,h,d=a.shapes?a.shapes.length:0;return 0===d?a:(a===c?r("["+e+"] Can't clip a layer with itself"):"point"==a.geometry_type?f=q.clipPoints(a.shapes,c.shapes,n.arcs,e):"polygon"==a.geometry_type?f=q.clipPolygons(a.shapes,c.shapes,l,e):"polyline"==a.geometry_type?f=q.clipPolylines(a.shapes,c.shapes,l,e):r("["+e+"] Invalid target layer:",a.name),h=q.getOutputLayer(a,g),g.no_replace&&a.data&&(h.data=a.data.clone()),h.shapes=f,g.remove_slivers&&"polygon"==h.geometry_type&&(k+=q.filterClipSlivers(h,c,b.arcs)),p.filterFeatures(h,b.arcs,{remove_empty:!0,verbose:!1}),j+=d-h.shapes.length,h)}),g.no_replace?b.layers=b.layers.concat(m):q.replaceLayers(b,a,m),h&&!g.no_cleanup&&q.dissolveArcs(b),j&&k&&t(q.getClipMessage(e,j,k)),m},q.getClipMessage=function(a,b,c){var d=b?f.format("%,d null feature%s",b,f.pluralSuffix(b)):"",e=c?f.format("%,d sliver%s",c,f.pluralSuffix(c)):"";return d||e?f.format("[%s] Removed %s%s%s",a,d,d&&e?" and ":"",e):""},q.findClippingLayer=function(a,b){var c,d;return f.isObject(a)&&f.contains(b.layers,a)?d=a:f.isString(a)&&(c=q.findMatchingLayers(b.layers,a),c.length>1?r("[clip/erase] Received more than one source layer"):1==c.length&&(d=c[0])),d||null},q.loadExternalClipLayer=function(a,b){var c=p.importFile(a,f.defaults({no_topology:!0},b));return c||r("Unable to find file ["+a+"]"),1!=c.layers.length&&r("Clip/erase only supports clipping with single-layer datasets"),c},q.convertClipBounds=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=[[b,c],[b,e],[d,e],[d,c],[b,c]];return e>c&&d>b||r("[clip/erase] Invalid bbox (should be [xmin, ymin, xmax, ymax]):",a),{arcs:new pa([f]),layers:[{shapes:[[[0]]],geometry_type:"polygon"}]}};var Ia={};Ia.ID_FIELD="FID",Ia.typeLookup={LineString:"polyline",MultiLineString:"polyline",Polygon:"polygon",MultiPolygon:"polygon",Point:"point",MultiPoint:"point"},Ia.translateGeoJSONType=function(a){return Ia.typeLookup[a]||null},p.buildTopology=function(a){if(a.arcs){var b=a.arcs.getVertexData(),c=q.buildPathTopology(b.nn,b.xx,b.yy);a.arcs.updateVertexData(c.nn,c.xx,c.yy),a.layers.forEach(function(a){"polyline"!=a.geometry_type&&"polygon"!=a.geometry_type||(a.shapes=q.replaceArcIds(a.shapes,c.paths))})}},q.buildPathTopology=function(a,b,c){function l(){return!(!b.subarray||!c.subarray)}function m(a){for(var d,b=[],c=0,e=0,f=a.length;e<f;e++)d=a[e],b.push(d<2?null:q(c,c+d-1)),c+=d;return b}function n(b){var c=g[b],e=b+1;if(e<d&&g[e]===c)return b+1;var f=a[c];return p(b,b-f+1)?b-f+2:-1}function o(b){var c=g[b],d=b-1;if(d>=0&&g[d]===c)return b-1;var e=a[c];return p(b,b+e-1)?b+e-2:-1}function p(a,d){return b[a]==b[d]&&c[a]==c[d]}function q(a,b){for(var f,c=[],d=-1,g=a;g<b;g++)r(g)&&(d>-1?c.push(v(f,g)):d=g,f=g);return d==-1?c.push(w(a,b)):d==a?(r(b)||e("Topology error"),c.push(v(f,g))):c.push(u(f,b,a+1,d)),c}function r(a){var e,g,b=f[a],c=o(a),d=n(a);if(c==-1||d==-1)return!0;for(;a!=b;){if(e=o(b),g=n(b),e==-1||g==-1||s(c,d,e,g))return!0;b=f[b]}return!1}function s(a,d,e,f){var g=b[a],h=b[d],i=b[e],j=b[f],k=c[a],l=c[d],m=c[e],n=c[f];return!(g==j&&h==i&&k==n&&l==m||g==i&&h==j&&k==m&&l==n)}function t(a,b,c,d,e){var j,f=c-b+e-d+2,g=l()?Float64Array:Array,h=new g(f),i=0;for(j=b;j<=c;j++)h[i++]=a[j];for(j=d;j<=e;j++)h[i++]=a[j];return h}function u(a,d,e,f){var g=h.findMatchingArc(b,c,a,f,n,o);return null===g&&(g=h.addArc(t(b,a,d,e,f),t(c,a,d,e,f))),g}function v(a,d){var e=h.findMatchingArc(b,c,a,d,n,o);return null===e&&(e=h.addArc(i.call(b,a,d+1),i.call(c,a,d+1))),e}function w(d,i){for(var l,j=f[d],k=g[d];j!=d&&!(g[j]<k);)j=f[j];if(j==d)return v(d,i);for(var m=d;m<i;m++)if(l=h.findMatchingArc(b,c,m,m,n,o),null!==l)return l;e("Unmatched ring; id:",k,"len:",a[k])}var j,k,d=b.length,f=Na(b,c),g=Oa(d,a),h=new La(d),i=l()?b.subarray:Array.prototype.slice;return j=m(a),k=h.getVertexData(),k.paths=j,k},q.replaceArcIds=function(a,b){function c(a,b){return a?a.map(function(a){return d(a,b)}):null}function d(a,b){return a.reduce(function(a,c){var d=w(c),e=b[d];if(e){c<0&&(e=e.concat(),q.reversePath(e));for(var f=0,g=e.length;f<g;f++)a.push(e[f])}return a},[])}return a.map(function(a){return c(a,b)})},q.getHighPrecisionSnapInterval=function(a){var b=a.getBounds();if(!b.hasBounds())return 0;var c=Math.max(Math.abs(b.xmin),Math.abs(b.ymin),Math.abs(b.xmax),Math.abs(b.ymax));return 1e-14*c},q.snapCoords=function(a,b){var c=q.getAvgSegment(a),d=.0025*c,e=d;b>0&&(e=b,t(f.format("Applying snapping threshold of %s -- %.6f times avg. segment length",b,b/c)));var g=q.snapCoordsByInterval(a,e);g>0&&a.dedupCoords(),t(f.format("Snapped %s point%s",g,f.pluralSuffix(g)))},q.snapCoordsByInterval=function(a,b){function i(a,b,c,d,e){for(var k,l,m,f=a,g=c.length,h=d[c[a]],i=e[c[a]],j=0;++f<g&&(k=c[f],l=d[k]-h,!(l>b));)m=e[k]-i,0===l&&0===m||l*l+m*m>b*b||(d[k]=h,e[k]=i,j++);return j}for(var c=0,d=a.getVertexData(),e=f.sortCoordinateIds(d.xx),g=0,h=e.length;g<h;g++)c+=i(g,b,e,d.xx,d.yy);return c},f.sortCoordinateIds=function(a){for(var b=a.length,c=new Uint32Array(b),d=0;d<b;d++)c[d]=d;return f.quicksortIds(a,c,0,c.length-1),c},f.quicksortIds=function(a,b,c,d){if(d-c>24){for(var i,e=a[b[c+d>>1]],g=c,h=d;g<=h;){for(;a[b[g]]<e;)g++;for(;a[b[h]]>e;)h--;g<=h&&(i=b[g],b[g]=b[h],b[h]=i,g++,h--)}h>c&&f.quicksortIds(a,b,c,h),g<d&&f.quicksortIds(a,b,g,d)}else f.insertionSortIds(a,b,c,d)},f.insertionSortIds=function(a,b,c,d){var e,f,g;for(g=c+1;g<=d;g++){for(e=b[g],f=g-1;f>=c&&a[e]<a[b[f]];f--)b[f+1]=b[f];b[f+1]=e}},q.importGeoJSON=function(a,b){var h,i,j,k,c=f.isString(a)?JSON.parse(a):a,d=Object.keys(Ia.pathImporters),e=b.id_field||Ia.ID_FIELD,g=null;return i="Feature"==c.type?{type:"FeatureCollection",features:[c]}:f.contains(d,c.type)?{type:"GeometryCollection",geometries:[c]}:c,"FeatureCollection"==i.type?(g=[],h=i.features.map(function(a){var b=a.properties||{};return"id"in a&&(b[e]=a.id),g.push(b),a.geometry})):"GeometryCollection"==i.type?h=i.geometries:r("[i] Unsupported GeoJSON type:",i.type),h||r("[i] Missing geometry data"),j=new Qa(b),h.forEach(function(a){j.startShape(),a&&Ia.importGeometry(a,j)}),k=j.done(),g&&(k.layers[0].data=new wa(g)),q.importCRS(k,c),k},Ia.importGeometry=function(a,b){var c=a.type;c in Ia.pathImporters?Ia.pathImporters[c](a.coordinates,b):"GeometryCollection"==c?a.geometries.forEach(function(a){Ia.importGeometry(a,b)}):u("TopoJSON.importGeometryCollection() Unsupported geometry type:",a.type)},Ia.pathImporters={LineString:function(a,b){b.importLine(a)},MultiLineString:function(a,b){for(var c=0;c<a.length;c++)Ia.pathImporters.LineString(a[c],b)},Polygon:function(a,b){for(var c=0;c<a.length;c++)b.importRing(a[c],c>0)},MultiPolygon:function(a,b){for(var c=0;c<a.length;c++)Ia.pathImporters.Polygon(a[c],b)},Point:function(a,b){b.importPoints([a])},MultiPoint:function(a,b){b.importPoints(a)}},q.importCRS=function(a,b){"crs"in b&&(a.info.input_geojson_crs=b.crs)},q.getFormattedStringify=function(a){function g(a,d){if(a in b&&f.isArray(d)){var e=JSON.stringify(d);if(e.indexOf(!1))return c+e.replace(/,/g,", ")+c}return d}var b=f.arrayToIndex(a),c="",d=new RegExp('"'+c+"|"+c+'"',"g"),e="  ";return function(a){var b=JSON.stringify(a,g,e);return b.replace(d,"")}},q.exportPointData=function(a){var b,c;return a&&0!==a.length?(c={points:a,pointCount:a.length,bounds:la.getPathBounds(a)},b={bounds:c.bounds,pathData:[c],partCount:1,pointCount:c.pointCount}):b={partCount:0,pointCount:0},b},q.exportPathData=function(a,b,c){if("point"==c)return q.exportPointData(a);var d=0,e=new m,f=[];return!a||"polyline"!=c&&"polygon"!=c||a.forEach(function(a,g){var h=b.getShapeIter(a),i=q.exportPathCoords(h),j=!0;"polygon"==c?(i.area=la.getPlanarPathArea2(i.points),j=i.pointCount>3&&0!==i.area):"polyline"==c&&(j=i.pointCount>1),j?(d+=i.pointCount,i.bounds=la.getPathBounds(i.points),e.mergeBounds(i.bounds),f.push(i)):u("Skipping a collapsed",c,"path")}),{pointCount:d,pathData:f,pathCount:f.length,bounds:e}},q.exportPathCoords=function(a){for(var d,e,f,g,b=[],c=0;a.hasNext();)d=a.x,e=a.y,0!==c&&f==d&&g==e||(b.push([d,e]),c++),f=d,g=e;return{points:b,pointCount:b.length}},q.exportGeoJSON=function(a,b){var c="json";return b.output_file&&(c=f.getFileExtension(b.output_file)),a.layers.map(function(d){return{content:q.exportGeoJSONCollection(d,a,b,!0),filename:d.name?d.name+"."+c:""}})},q.exportGeoJSONCollection=function(a,b,c,d){c=c||{};var k,l,m,n,f=q.exportProperties(a.data,c),g=a.shapes,h=q.exportIds(a.data,c),i=!(!f&&!h),j={};return f&&g&&f.length!==g.length&&e("[-o] Mismatch between number of properties and number of shapes"),d&&(n=c.prettify?q.getFormattedStringify(["bbox","coordinates"]):JSON.stringify),i?(j.type="FeatureCollection",l="features"):(j.type="GeometryCollection",l="geometries"),q.exportCRS(b,j),c.bbox&&(m=q.getLayerBounds(a,b.arcs),m.hasBounds()&&(j.bbox=m.toArray())),k=(g||f||[]).reduce(function(c,e,j){var k=g?g[j]:null,l=Ia.exporters[a.geometry_type],m=k?l(k,b.arcs):null;if(i)m={type:"Feature",geometry:m,properties:f?f[j]:null},h&&(m.id=h[j]);else if(!m)return c;return d&&(m=n(m)),c.push(m),c},[]),d?(j[l]=["$"],j=JSON.stringify(j).replace('"$"',"\n"+k.join(",\n")+"\n")):j[l]=k,j},Ia.exportPointGeom=function(a,b){var c=null;return 1==a.length?c={type:"Point",coordinates:a[0]}:a.length>1&&(c={type:"MultiPoint",coordinates:a}),c},Ia.exportLineGeom=function(a,b){var c=q.exportPathData(a,b,"polyline");if(0===c.pointCount)return null;var d=c.pathData.map(function(a){return a.points});return 1==d.length?{type:"LineString",coordinates:d[0]}:{type:"MultiLineString",coordinates:d}},Ia.exportPolygonGeom=function(a,b){var c=q.exportPathData(a,b,"polygon");if(0===c.pointCount)return null;var d=q.groupPolygonRings(c.pathData),e=d.map(function(a){return a.map(function(a){return a.points})});return 1==e.length?{type:"Polygon",coordinates:e[0]}:{type:"MultiPolygon",coordinates:e}},Ia.exporters={polygon:Ia.exportPolygonGeom,polyline:Ia.exportLineGeom,point:Ia.exportPointGeom},q.exportCRS=function(a,b){var c=a.info||{};!c.crs&&"input_geojson_crs"in c?b.crs=c.input_geojson_crs:c.crs&&!c.crs.is_latlong&&(b.crs=null)},q.getIdField=function(a,b){var c=[];return f.isString(b)?c.push(b):f.isArray(b)&&(c=b),c.push(Ia.ID_FIELD),f.find(c,function(b){return f.contains(a,b)})},q.exportProperties=function(a,b){var g,h,c=a?a.getFields():[],d=q.getIdField(c,b.id_field),e=d==Ia.ID_FIELD;return b.drop_table||b.cut_table||0===c.length||e&&1==c.length?null:(h=a.getRecords(),g=e?h.map(function(a){return a=f.extend({},a),delete a[d],a}):h)},q.exportIds=function(a,b){var c=a?a.getFields():[],d=q.getIdField(c,b.id_field);return d?a.getRecords().map(function(a){return d in a?a[d]:null}):null};var Ra={};Ra.forEachPath=function(b,c){function e(a){a.type in d&&d[a.type](a)}function f(a){for(var b,d=0;d<a.length;d++)b=c(a[d]),b&&(a[d]=b)}var d={GeometryCollection:function(a){a.geometries.forEach(e)},LineString:function(a){var b=c(a.arcs);b&&(a.arcs=b)},MultiLineString:function(a){f(a.arcs)},Polygon:function(a){f(a.arcs)},MultiPolygon:function(a){a.arcs.forEach(f)}};e(b)},Ra.forEachArc=function(b,c){Ra.forEachPath(b,function(a){for(var b,d=0;d<a.length;d++)b=c(a[d]),f.isInteger(b)&&(a[d]=b)})},q.importTopoJSON=function(a,b){var d,e,c=[];return f.isString(a)&&(a=JSON.parse(a)),a.arcs&&a.arcs.length>0&&(a.transform&&Ra.decodeArcs(a.arcs,a.transform),b&&b.precision&&Ra.roundCoords(a.arcs,b.precision),e=new pa(a.arcs)),f.forEachProperty(a.objects,function(a,d){var f=Ra.importObject(a,b);q.layerHasPaths(f)&&q.cleanShapes(f.shapes,e,f.geometry_type),f.name=d,c.push(f)}),d={layers:c,arcs:e,info:{}},q.importCRS(d,a),d},Ra.decodeArcs=function(a,b){var c=b.scale[0],d=b.scale[1],e=b.translate[0],f=b.translate[1];a.forEach(function(a){for(var h,i,j,b=0,g=0,k=0,l=a.length;k<l;k++)h=a[k],i=h[0]+b,j=h[1]+g,h[0]=i*c+e,h[1]=j*d+f,b=i,g=j})},Ra.roundCoords=function(a,b){var d,c=E(b);a.forEach(function(a){for(var b=0,e=a.length;b<e;b++)d=a[b],d[0]=c(d[0]),d[1]=c(d[1])})},Ra.importObject=function(a,b){return"GeometryCollection"!=a.type&&(a={type:"GeometryCollection",geometries:[a]}),Ra.importGeometryCollection(a,b)},Ra.importGeometryCollection=function(a,b){var c=new Ra.GeometryImporter(b);return a.geometries.forEach(c.addGeometry,c),c.done()},Ra.GeometryImporter=function(a){var b=a&&a.id_field||Ia.ID_FIELD,c=[],d=[],e=null;this.addGeometry=function(a){var e=Ia.translateGeoJSONType(a.type),f=d.length,g=a.properties,h=null;"id"in a&&(g=g||{},g[b]=a.id),g&&(c[f]=g),"point"==e?h=this.importPointGeometry(a):a.type in Ra.pathImporters?h=Ra.pathImporters[a.type](a.arcs):a.type&&u("[TopoJSON] Unknown geometry type:",a.type),d.push(h),this.updateCollectionType(e)},this.importPointGeometry=function(a){var b=null;return"Point"==a.type?b=[a.coordinates]:"MultiPoint"==a.type?b=a.coordinates:r("Invalid TopoJSON point geometry:",a),b},this.updateCollectionType=function(a){e?a&&e!=a&&(e="mixed"):e=a},this.done=function(){var a={};return e&&(a.geometry_type=e,a.shapes=d),c.length>0&&(a.data=new wa(c)),a}},Ra.pathImporters={LineString:function(a){return[a]},MultiLineString:function(a){return a},Polygon:function(a){return a},MultiPolygon:function(a){return a.reduce(function(a,b){return a?a.concat(b):b},null)}},Ra.getPresimplifyFunction=function(a){var b=1e4,c=b/a;return function(a){return a===1/0?0:Math.ceil(a*c)}},p.explodeFeatures=function(a,b,c){var d=a.data?a.data.getRecords():null,e=d?[]:null,g=[],h=f.extend({},a);return a.shapes.forEach(function(c,i){var j;if(c?(j="polygon"==a.geometry_type&&c.length>1?q.explodePolygon(c,b):q.explodeShape(c),f.merge(g,j)):g.push(null),h.shapes=g,e)for(var k=0,l=j?j.length:1;k<l;k++)e.push(q.cloneProperties(d[i]))}),h.shapes=g,e&&(h.data=new wa(e)),h},q.explodeShape=function(a){return a.map(function(a){return[a.concat()]})},q.explodePolygon=function(a,b){var c=q.getPathMetadata(a,b,"polygon"),d=q.groupPolygonRings(c);return d.map(function(a){return a.map(function(a){return a.ids})})},q.cloneProperties=function(a){var b={};for(var c in a)b[c]=a[c];return b},q.exportTopoJSON=function(a,b){var c=Ra.exportTopology(a,b),d=JSON.stringify,e=b.output_file||f.getOutputFileBase(a)+".json";return b.prettify&&(d=q.getFormattedStringify("coordinates,arcs,bbox,translate,scale".split(","))),[{content:d(c),filename:e}]},Ra.exportTopology=function(a,b){var f,c=b.cloned?a:Ra.copyDatasetForExport(a),d=c.arcs,e={type:"Topology"};return q.datasetHasPaths(c)?(f=q.getDatasetBounds(c),b.bbox&&f.hasBounds()&&(e.bbox=f.toArray()),b.presimplify&&!c.arcs.getVertexData().zz&&p.simplify(c,b),b.no_quantization||(e.transform=Ra.transformDataset(c,f,b)),q.dissolveArcs(c),e.arcs=Ra.exportArcs(d,f,b),e.transform&&Ra.deltaEncodeArcs(e.arcs)):e.arcs=[],e.objects=c.layers.reduce(function(a,c,e){var f=c.name||"layer"+(e+1);return a[f]=Ra.exportLayer(c,d,b),a},{}),q.exportCRS(c,e),e},Ra.copyDatasetForExport=function(a){var b={info:a.info};return b.layers=a.layers.map(function(a){var b=a.shapes?a.shapes.concat():null;return f.defaults({shapes:b},a)}),a.arcs&&(b.arcs=a.arcs.getFilteredCopy()),b},Ra.transformDataset=function(a,b,c){var d=Ra.calcExportBounds(b,a.arcs,c),e=b.getTransform(d),f=e.invert();return a.arcs.transformPoints(function(a,b){var c=e.transform(a,b);return[Math.round(c[0]),Math.round(c[1])]}),{scale:[f.mx,f.my],translate:[f.bx,f.by]}},Ra.exportArcs=function(a,b,c){var d=null,e=[];return c.presimplify&&(d=Ra.getPresimplifyFunction(b.width())),a.forEach2(function(a,b,c,f,g){for(var i,h=[],j=a+b;a<j;a++)i=[c[a],f[a]],d&&i.push(d(g[a])),h.push(i);e.push(h.length>1?h:null)}),e},Ra.deltaEncodeArcs=function(a){a.forEach(function(a){for(var b,c,d,e,f,g=0,h=a.length;g<h;g++)f=a[g],d=f[0],e=f[1],g>0&&(f[0]=d-b,f[1]=e-c),b=d,c=e})},Ra.calcExportResolution=function(a,b){var c=q.getAvgSegment2(a);return[c[0]*b,c[1]*b]},Ra.calcExportBounds=function(a,b,c){var d,e,f;return d=c.topojson_precision>0?Ra.calcExportResolution(b,c.topojson_precision):c.quantization>0?[a.width()/(c.quantization-1),a.height()/(c.quantization-1)]:c.precision>0?[c.precision,c.precision]:Ra.calcExportResolution(b,.02),e=Math.ceil(a.width()/d[0]),f=Math.ceil(a.height()/d[1]),new m(0,0,e,f)},Ra.exportProperties=function(a,b,c){var d=q.exportProperties(b,c),e=q.exportIds(b,c);a.forEach(function(a,b){d&&(a.properties=d[b]),e&&(a.id=e[b])})},Ra.exportLayer=function(a,b,c){for(var d=q.getFeatureCount(a),e=[],f=0;f<d;f++)e[f]={type:null};return q.layerHasGeometry(a)&&Ra.exportGeometries(e,a.shapes,b,a.geometry_type),a.data&&Ra.exportProperties(e,a.data,c),{type:"GeometryCollection",geometries:e}},Ra.exportGeometries=function(a,b,c,d){var e=Ra.exporters[d];e&&b&&b.forEach(function(b,d){b&&b.length>0&&(a[d]=e(b,c))})},Ra.exportPolygonGeom=function(a,b){var c={};return a=q.filterEmptyArcs(a,b),a&&0!==a.length?a.length>1?(c.arcs=q.explodePolygon(a,b),1==c.arcs.length?(c.arcs=c.arcs[0],c.type="Polygon"):c.type="MultiPolygon"):(c.arcs=a,c.type="Polygon"):c.type=null,c},Ra.exportLineGeom=function(a,b){var c={};return a=q.filterEmptyArcs(a,b),a&&0!==a.length?1==a.length?(c.type="LineString",c.arcs=a[0]):(c.type="MultiLineString",c.arcs=a):c.type=null,c},Ra.exporters={polygon:Ra.exportPolygonGeom,polyline:Ra.exportLineGeom,point:Ia.exportPointGeom};var Sa={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULIPOINTM:28,MULTIPATCH:31};Sa.isPolygonType=function(a){return 5==a||15==a||25==a},Sa.isPolylineType=function(a){return 3==a||13==a||23==a},Sa.isMultiPartType=function(a){return Sa.isPolygonType(a)||Sa.isPolylineType(a)},Sa.isMultiPointType=function(a){return 8==a||18==a||28==a},Sa.isZType=function(a){return f.contains([11,13,15,18],a)},Sa.isMType=function(a){return Sa.isZType(a)||f.contains([21,23,25,28],a)},Sa.hasBounds=function(a){return Sa.isMultiPartType(a)||Sa.isMultiPointType(a)},q.translateShapefileType=function(a){return f.contains([Sa.POLYGON,Sa.POLYGONM,Sa.POLYGONZ],a)?"polygon":f.contains([Sa.POLYLINE,Sa.POLYLINEM,Sa.POLYLINEZ],a)?"polyline":f.contains([Sa.POINT,Sa.POINTM,Sa.POINTZ,Sa.MULTIPOINT,Sa.MULTIPOINTM,Sa.MULTIPOINTZ],a)?"point":null},q.isSupportedShapefileType=function(a){return f.contains([0,1,3,5,8,11,13,15,18,21,23,25,28],a)},q.getShapefileType=function(a){return{polygon:Sa.POLYGON,polyline:Sa.POLYLINE,point:Sa.MULTIPOINT}[a]||Sa.NULL};var Ta=function(){return{isNull:!0,pointCount:0,partCount:0,byteLength:12}};f.replaceFileExtension=function(a,b){var c=f.parseLocalPath(a);return c.pathbase+"."+b},f.getPathSep=function(a){return a.indexOf("/")==-1&&a.indexOf("\\")!=-1?"\\":"/"},f.parseLocalPath=function(a){var e,b={},c=f.getPathSep(a),d=a.split(c);return 1==d.length?(b.filename=d[0],b.directory=""):(b.filename=d.pop(),b.directory=d.join(c)),e=b.filename.lastIndexOf("."),e>-1?(b.extension=b.filename.substr(e+1),b.basename=b.filename.substr(0,e),b.pathbase=a.substr(0,a.lastIndexOf("."))):(b.extension="",b.basename=b.filename,b.pathbase=a),b},f.getFileBase=function(a){return f.parseLocalPath(a).basename},f.getFileExtension=function(a){return f.parseLocalPath(a).extension},f.getPathBase=function(a){return f.parseLocalPath(a).pathbase},f.getCommonFileBase=function(a){return a.reduce(function(a,b,c){return a=0===c?f.getFileBase(b):f.mergeNames(a,b)},"")},f.getOutputFileBase=function(a){var b=a.info&&a.info.input_files;return b&&f.getCommonFileBase(b)||"output"},q.guessInputFileType=function(a){var b=f.getFileExtension(a||"").toLowerCase(),c=null;return"dbf"==b||"shp"==b||"prj"==b?c=b:/json$/.test(b)&&(c="json"),c},q.guessInputContentType=function(a){var b=null;return f.isString(a)?b=q.stringLooksLikeJSON(a)?"json":"text":(f.isObject(a)&&a.type||f.isArray(a))&&(b="json"),b},q.guessInputType=function(a,b){return q.guessInputFileType(a)||q.guessInputContentType(b)},q.stringLooksLikeJSON=function(a){return/^\s*[{[]/.test(String(a))},q.couldBeDsvFile=function(a){var b=f.getFileExtension(a).toLowerCase();return/csv|tsv|txt$/.test(b)},q.inferOutputFormat=function(a,b){var c=f.getFileExtension(a).toLowerCase(),d=null;return"shp"==c?d="shapefile":"dbf"==c?d="dbf":"svg"==c?d="svg":/json$/.test(c)?(d="geojson","topojson"==c||"topojson"==b&&"geojson"!=c?d="topojson":"json"==c&&"json"==b&&(d="json")):q.couldBeDsvFile(a)?d="dsv":b&&(d=b),d},q.isZipFile=function(a){return/\.zip$/i.test(a)},q.isSupportedOutputFormat=function(a){var b=["geojson","topojson","json","dsv","dbf","shapefile","svg"];return b.indexOf(a)>-1},q.getFormatName=function(a){return{geojson:"GeoJSON",topojson:"TopoJSON",json:"JSON records",dsv:"CSV",dbf:"DBF",shapefile:"Shapefile",svg:"SVG"}[a]||""},q.isBinaryFile=function(a){var b=f.getFileExtension(a).toLowerCase();return"shp"==b||"dbf"==b||"zip"==b},q.filenameIsUnsupportedOutputType=function(a){var b=/\.(shx|prj|xls|xlsx|gdb|sbn|sbx|xml|kml)$/i;return b.test(a)};var Va={};Va.isFile=function(a){var b=Va.statSync(a);return b&&b.isFile()||!1},Va.fileSize=function(a){var b=Va.statSync(a);return b&&b.size||0},Va.isDirectory=function(a){var b=Va.statSync(a);return b&&b.isDirectory()||!1},Va.readFile=function(b,c){var d=a("/dev/stdin"==b?"rw":"fs"),e=d.readFileSync(b);return c&&(e=q.decodeString(e,c)),e},Va.writeFile=function(b,c){c instanceof ArrayBuffer&&(c=Va.convertArrayBuffer(c)),a("rw").writeFileSync(b,c)},Va.convertArrayBuffer=function(a){for(var b=new Uint8Array(a),d=new c(b.length),e=0,f=b.length;e<f;e++)d[e]=b[e];return d},Va.expandFileName=function(b){if(b.indexOf("*")==-1)return[b];var c=f.parseLocalPath(b),d=c.directory||".",e=a("fs").readdirSync(d),g=f.wildcardToRegExp(c.filename);return e.reduce(function(b,c){var e=a("path").join(d,c);return g.test(c)&&Va.isFile(e)&&b.push(e),b},[])},Va.validateInputFiles=function(a){return a=a.reduce(function(a,b){return a.concat(Va.expandFileName(b))},[]),a.forEach(Va.checkFileExists),a},Va.validateOutputDir=function(a){Va.isDirectory(a)||e("Output directory not found:",a)},Va.checkFileExists=function(a){Va.isFile(a)||"/dev/stdin"==a||r("File not found ("+a+")")},Va.statSync=function(b){var c=null;try{c=a("fs").statSync(b)}catch(a){}return c},Wa.prototype.type=function(){return this.header().type},Wa.prototype.getCounts=function(){var a={nullCount:0,partCount:0,shapeCount:0,pointCount:0};return this.forEachShape(function(b){b.isNull&&a.nullCount++,a.pointCount+=b.pointCount,a.partCount+=b.partCount,a.shapeCount++}),a},q.importShp=function(a,b){var c=new Wa(a),d=c.type(),e=q.translateShapefileType(d),g=f.defaults({type:e,reserved_points:Math.round(c.header().byteLength/16)},b),h=new Qa(g);return q.isSupportedShapefileType(d)||r("Unsupported Shapefile type:",d),Sa.isZType(d)?t("Warning: Shapefile Z data will be lost."):Sa.isMType(d)&&t("Warning: Shapefile M data will be lost."),c.forEachShape(function(a){h.startShape(),a.isNull||("point"==e?h.importPoints(a.readPoints()):a.stream(h));
}),h.done()},q.exportShapefile=function(a,b){return a.layers.reduce(function(c,d){var e=q.exportPrjFile(d,a);return c=c.concat(q.exportShpAndShxFiles(d,a,b)),c=c.concat(q.exportDbfFile(d,a,b)),e&&c.push(e),c},[])},q.exportPrjFile=function(a,b){var c=b.info&&!b.info.crs&&b.info.input_prj;return c?{content:c,filename:a.name+".prj"}:null},q.exportShpAndShxFiles=function(a,b,c){var d=a.geometry_type,e=q.getShapefileType(d),g=100,h=new m,i=a.shapes||f.initializeArray(new Array(q.getFeatureCount(a)),null),j=i.map(function(a,c){var f=q.exportPathData(a,b.arcs,d),i=q.exportShpRecord(f,c+1,e);return g+=i.buffer.byteLength,i.bounds&&h.mergeBounds(i.bounds),i.buffer}),k=new n(g,!1).writeInt32(9994).skipBytes(20).writeInt32(g/2).littleEndian().writeInt32(1e3).writeInt32(e);h.hasBounds()?k.writeFloat64(h.xmin||0).writeFloat64(h.ymin||0).writeFloat64(h.xmax||0).writeFloat64(h.ymax||0):k.skipBytes(32),k.skipBytes(32);var l=100+8*j.length,o=new n(l,!1).writeBuffer(k.buffer(),100).position(24).bigEndian().writeInt32(l/2).position(100);return j.forEach(function(a,b){var c=k.position()/2,d=(a.byteLength-8)/2;o.writeInt32(c),o.writeInt32(d),k.writeBuffer(a)}),[{content:k.buffer(),filename:a.name+".shp"},{content:o.buffer(),filename:a.name+".shx"}]},q.exportShpRecord=function(a,b,c){var d=null,f=null;if(a.pointCount>0){var g=Sa.isMultiPartType(c),h=52,i=g?h+4*a.pathCount:48,j=i+16*a.pointCount,k=0;d=a.bounds,f=new n(j,!1).writeInt32(b).writeInt32((j-8)/2).littleEndian().writeInt32(c).writeFloat64(d.xmin).writeFloat64(d.ymin).writeFloat64(d.xmax).writeFloat64(d.ymax),g?f.writeInt32(a.pathCount):a.pathData.length>1&&e("[exportShpRecord()] Tried to export multiple paths as type:",c),f.writeInt32(a.pointCount),a.pathData.forEach(function(a,b){g&&f.position(h+4*b).writeInt32(k),f.position(i+16*k);for(var c=a.points,d=0,e=c.length;d<e;d++)f.writeFloat64(c[d][0]),f.writeFloat64(c[d][1]);k+=d}),a.pointCount!=k&&e("Shp record point count mismatch; pointCount:",k,"data.pointCount:",a.pointCount)}else f=new n(12,!1).writeInt32(b).writeInt32(2).littleEndian().writeInt32(0);return{bounds:d,buffer:f.buffer()}},q.importDbfTable=function(a,b){var c=b||{};return new Za(a,c.encoding)},f.extend(Za.prototype,xa),q.exportDbf=function(a,b){return a.layers.reduce(function(c,d){return d.data&&(c=c.concat(q.exportDbfFile(d,a,b))),c},[])},q.exportDbfFile=function(a,b,c){var e,d=a.data;return(!d||c.cut_table||c.drop_table)&&(d=new wa(a.shapes.length)),0===d.getFields().length&&d.addIdField(),e=d.exportAsDbf(c.encoding||"utf8"),f.isInteger(c.ldid)&&(new Uint8Array(e)[29]=c.ldid),[{content:e,filename:a.name+".dbf"}]},p.svgStyle=function(a,b,c){var d=Object.keys(c),e=q.getStyleFields(d,q.svgStyles,q.invalidSvgTypes[a.geometry_type]);e.forEach(function(d){var g,h,e=c[d],f=null,i=q.svgStyleTypes[d];a.data||q.initDataTable(a),"number"==i&&q.isSvgNumber(e)?f=Number(e):"color"==i&&q.isSvgColor(e,a.data.getFields())?f=e:"classname"==i&&q.isSvgClassName(e,a.data.getFields())&&(f=e),null===f&&(h=q.compileValueExpression(e,a,b.arcs)),g=a.data.getRecords(),g.forEach(function(a,b){a[d]=h?h(b):f})})},q.isSvgClassName=function(a,b){return a=a.trim(),(!b||b.indexOf(a)==-1)&&/^( ?[_a-z][-_a-z0-9]*\b)+$/i.test(a)},q.isSvgNumber=function(a){return f.isFiniteNumber(a)||f.isString(a)&&/^-?[.0-9]+$/.test(a)},q.isSvgColor=function(a,b){return a=a.trim(),(!b||b.indexOf(a)==-1)&&/^[a-z]+$/i.test(a)||/^#[0-9a-f]+$/i.test(a)||/^rgba?\([0-9,. ]+\)$/.test(a)},q.getStyleFields=function(a,b,c){return a.reduce(function(a,d){return d in b&&(c&&c.indexOf(d)!=-1||a.push(d)),a},[])},q.getSvgStyleFields=function(a){var b=a.data?a.data.getFields():[];return q.getStyleFields(b,q.svgStyles,q.invalidSvgTypes[a.geometry_type])},q.layerHasSvgDisplayStyle=function(a){var b=q.getSvgStyleFields(a);return f.difference(b,["opacity","class"]).length>0},q.invalidSvgTypes={polygon:["r"],polyline:["r","fill"]},q.svgStyles={class:"class",opacity:"opacity",r:"radius",fill:"fillColor",stroke:"strokeColor",stroke_width:"strokeWidth"},q.svgStyleTypes={class:"classname",opacity:"number",r:"number",fill:"color",stroke:"color",stroke_width:"number"};var $a={};$a.importGeoJSONFeatures=function(a){return a.map(function(a,b){var e,c="Feature"==a.type?a.geometry:a,d=c&&c.type;return d?(e=$a.geojsonImporters[d](c.coordinates),a.properties&&$a.applyStyleAttributes(e,d,a.properties),"id"in a&&(e.properties||(e.properties={}),e.properties.id=a.id),e):{tag:"g"}})},$a.stringify=function(a){var b="<"+a.tag;return a.properties&&(b+=$a.stringifyProperties(a.properties)),a.children?(b+=">\n",b+=a.children.map($a.stringify).join("\n"),b+="\n</"+a.tag+">"):b+="/>",b},$a.stringEscape=function(){var a=/[&<>"']/g,b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return function(c){return String(c).replace(a,function(a){return b[a]})}}(),$a.stringifyProperties=function(a){return Object.keys(a).reduce(function(b,c,d){var e=a[c],g=f.isString(e)?e:JSON.stringify(e);return b+" "+c+'="'+$a.stringEscape(g)+'"'},"")},$a.applyStyleAttributes=function(a,b,c){for(var g,e=(a.properties,q.invalidSvgTypes[Ia.translateGeoJSONType(b)]),f=q.getStyleFields(Object.keys(c),q.svgStyles,e),h=0,i=f.length;h<i;h++)g=f[h],$a.setAttribute(a,g.replace("_","-"),c[g])},$a.setAttribute=function(a,b,c){var d,e;if("r"!=b&&"class"!=b||!a.children)a.properties||(a.properties={}),a.properties[b]=c;else{d=a.children;for(var f=0;f<d.length;f++)e=d[f],e.properties||(e.properties={}),e.properties[b]=c}},$a.importMultiGeometry=function(a,b){for(var c={tag:"g",children:[]},d=0;d<a.length;d++)c.children.push(b(a[d]));return c},$a.mapVertex=function(a){return a[0]+" "+-a[1]},$a.importLineString=function(a){var b="M "+a.map($a.mapVertex).join(" ");return{tag:"path",properties:{d:b}}},$a.importPoint=function(a){return{tag:"circle",properties:{cx:a[0],cy:-a[1]}}},$a.importPolygon=function(a){for(var b,c,d=0;d<a.length;d++)b=c?c.properties.d+" ":"",c=$a.importLineString(a[d]),c.properties.d=b+c.properties.d+" Z";return c},$a.geojsonImporters={Point:$a.importPoint,Polygon:$a.importPolygon,LineString:$a.importLineString,MultiPoint:function(a){return $a.importMultiGeometry(a,$a.importPoint)},MultiLineString:function(a){return $a.importMultiGeometry(a,$a.importLineString)},MultiPolygon:function(a){return $a.importMultiGeometry(a,$a.importPolygon)}},q.exportSVG=function(a,b){var d,e,c='<?xml version="1.0"?>\n<svg xmlns="http://www.w3.org/2000/svg" version="1.2" baseProfile="tiny" width="%d" height="%d" viewBox="%s %s %s %s" stroke-linecap="round" stroke-linejoin="round">\n%s\n</svg>';return b.cloned||(a=q.copyDataset(a)),d=q.transformCoordsForSVG(a,b),e=a.layers.map(function(c){return q.exportLayerAsSVG(c,a,b)}).join("\n"),e=f.format(c,d.width(),d.height(),0,0,d.width(),d.height(),e),[{content:e,filename:b.output_file||f.getOutputFileBase(a)+".svg"}]},q.transformCoordsForSVG=function(a,b){var g,h,i,c=b.width>0?b.width:800,d=b.margin>=0?b.margin:1,e=q.getDatasetBounds(a),f=b.precision||1e-4;return b.svg_scale>0&&(c=e.width()/b.svg_scale,d=0),q.padViewportBoundsForSVG(e,c,d),g=Math.ceil(c*e.height()/e.width()),h=new m(0,-g,c,0),i=e.getTransform(h),q.transformPoints(a,function(a,b){return i.transform(a,b)}),q.setCoordinatePrecision(a,f),h},q.padViewportBoundsForSVG=function(a,b,c){var e,d=a.width()||a.height()||1;c>=0==!1&&(c=1),e=d/(b-2*c)*c,a.padBounds(e,e,e,e)},q.exportLayerAsSVG=function(a,b,c){var d=q.exportGeoJSONCollection(a,b,c),e=d.features||d.geometries||(d.type?[d]:[]),f=$a.importGeoJSONFeatures(e),g={tag:"g",children:f,properties:{id:a.name}};return"polyline"==a.geometry_type&&(g.properties.fill="none",g.properties.stroke="black",g.properties["stroke-width"]=1),$a.stringify(g)},q.roundPoints=function(a,b){q.forEachPoint(a.shapes,function(a){a[0]=b(a[0]),a[1]=b(a[1])})},q.setCoordinatePrecision=function(a,b){var d,e,c=la.getRoundingFunction(b);return q.transformPoints(a,function(a,b){return[c(a),c(b)]}),a.arcs&&(e=q.divideArcs(a),d=q.getPolygonDissolver(e)),a.layers.forEach(function(a){"polygon"==a.geometry_type&&d&&(a.shapes=a.shapes.map(d))}),a},q.exportDelim=function(a,b){var c=q.getExportDelimiter(a.info,b),d=q.getDelimFileExtension(c,b);return a.layers.reduce(function(a,b){return b.data&&a.push({content:q.exportDelimTable(b,c),filename:(b.name||"output")+"."+d}),a},[])},q.exportDelimTable=function(b,c){for(var d=a("d3-dsv").dsvFormat(c),e=b.data.getFields(),f=q.getDelimRowFormatter(e,b.data),g=b.data.getRecords(),h=d.formatRows([e]),i=0,j=g.length;i<j;i++)h+="\n"+d.formatRows([f(g[i])]);return h},q.getDelimRowFormatter=function(a,b){var c=a.map(function(a){var c=q.getColumnType(a,b);return function(b){return"object"==c?JSON.stringify(b[a]):b[a]}});return function(a){for(var b=[],d=0;d<c.length;d++)b.push(c[d](a));return b}},q.getExportDelimiter=function(a,b){var c=",",d=b.output_file?f.getFileExtension(b.output_file):"";return b.delimiter?c=b.delimiter:"tsv"==d?c="\t":"csv"==d?c=",":a.input_delimiter&&(c=a.input_delimiter),c},q.getDelimFileExtension=function(a,b){var c="txt";return b.output_file?c=f.getFileExtension(b.output_file):"\t"==a?c="tsv":","==a&&(c="csv"),c},q.importJSONTable=function(a){return{layers:[{data:new wa(a)}],info:{}}},q.exportJSON=function(a,b){return a.layers.reduce(function(a,b){return b.data&&a.push({content:q.exportJSONTable(b),filename:(b.name||"output")+".json"}),a},[])},q.exportJSONTable=function(a){return JSON.stringify(a.data.getRecords())},q.exportFileContent=function(a,b){var c=b.format=q.getOutputFormat(a,b),d=q.exporters[c],g=[];return c?d||e("[o] Unknown export format:",c):e("[o] Missing output format"),a=f.defaults({layers:a.layers.map(function(a){return f.extend({},a)})},a),b.output_file&&"topojson"!=c&&a.layers.forEach(function(a){a.name=f.getFileBase(b.output_file)}),b.precision&&"svg"!=c&&(a=q.copyDatasetForExport(a),q.setCoordinatePrecision(a,b.precision)),q.validateLayerData(a.layers),q.assignUniqueLayerNames(a.layers),b.cut_table&&(g=q.exportDataTables(a.layers,b).concat(g)),g=d(a,b).concat(g),b.bbox_index&&g.push(q.createIndexFile(a)),q.validateFileNames(g),g},q.exporters={geojson:q.exportGeoJSON,topojson:q.exportTopoJSON,shapefile:q.exportShapefile,dsv:q.exportDelim,dbf:q.exportDbf,json:q.exportJSON,svg:q.exportSVG},q.getOutputFormat=function(a,b){var c=b.output_file||null,d=a.info&&a.info.input_format,e=null;return b.format?e=b.format:c?e=q.inferOutputFormat(c,d):d&&(e=d),e},q.createIndexFile=function(a){var b=a.layers.map(function(b){var c=q.getLayerBounds(b,a.arcs);return{bbox:c.toArray(),name:b.name}});return{content:JSON.stringify(b),filename:"bbox-index.json"}},q.validateLayerData=function(a){a.forEach(function(a){a.geometry_type?(f.contains(["polygon","polyline","point"],a.geometry_type)||e("[export] A layer has an invalid geometry type:",a.geometry_type),a.shapes||e("[export] A layer is missing shape data")):a.shapes&&f.some(a.shapes,function(a){return!!a})&&e("[export] A layer contains shape records and a null geometry type")})},q.validateFileNames=function(a){var b={};a.forEach(function(a,c){var d=a.filename;d||e("[o] Missing a filename for file"+c),d in b&&e("[o] Duplicate filename",d),b[d]=!0})},q.assignUniqueLayerNames=function(a){var b=a.map(function(a){return a.name||"layer"}),c=q.uniqifyNames(b);a.forEach(function(a,b){a.name=c[b]})},q.assignUniqueLayerNames2=function(a){var b=a.reduce(function(a,b){return a.concat(b.layers)},[]);q.assignUniqueLayerNames(b)},q.assignUniqueFileNames=function(a){var b=a.map(function(a){return a.filename}),c=q.uniqifyNames(b,q.formatVersionedFileName);a.forEach(function(a,b){a.filename=c[b]})},q.exportDataTables=function(a,b){var c=[];return a.forEach(function(a){a.data&&c.push({content:a.data.exportAsJSON(),filename:(a.name?a.name+"-":"")+"table.json"})}),c},q.formatVersionedName=function(a,b){var c=String(b);return/[0-9]$/.test(a)&&(c="-"+c),a+c},q.formatVersionedFileName=function(a,b){var d,e,c=a.split(".");return c.length<2?q.formatVersionedName(a,b):(d=c.pop(),e=c.join("."),q.formatVersionedName(e,b)+"."+d)},q.uniqifyNames=function(a,b){var c=f.countValues(a),d=b||q.formatVersionedName,e={};return Object.keys(c).forEach(function(a){c[a]>1&&(e[a]=!0)}),a.map(function(a){for(var f,b=1,c=a;c in e;){if(f=d(a,b),!f||f==c)throw new Error("Naming error");c=f,b++}return e[c]=!0,c})},p.evaluateEachFeature=function(a,b,c,d){var f,g,e=q.getFeatureCount(a);e>0&&!a.data&&(a.data=new wa(e)),d&&d.where&&(g=q.compileValueExpression(d.where,a,b)),f=q.compileFeatureExpression(c,a,b);for(var h=0;h<e;h++)g&&!g(h)||f(h)},p.calc=function(a,b,c){var e,d="calc "+c.expression;return c.where&&(a={shapes:a.shapes,data:a.data},p.filterFeatures(a,b,{expression:c.where}),d+=" where "+c.where),e=q.evalCalcExpression(a,b,c.expression),t(d+":  "+e),e},q.evalCalcExpression=function(a,b,c){var d=q.compileCalcExpression(c);return d(a,b)},q.compileCalcExpression=function(a){return function(b,c){var e,f,d=q.getCalcExpressionContext(b,c);try{e=new Function("env","with(env){return "+a+";}"),f=e.call(null,d)}catch(b){t("Error "+(e?"compiling":"running")+' expression: "'+a+'"'),r(b)}return f}},q.getCalcExpressionContext=function(a,b){var c=q.getBaseContext();return a.data&&a.data.getFields().forEach(function(a){c[a]=a}),q.initCalcFunctions(c,a,b),c},q.initCalcFunctions=function(a,b,c){var d=Object.keys((new _a).functions);d.forEach(function(d){a[d]=q.getCalcFunction(d,b,c)})},q.getCalcFunction=function(a,b,c){return function(d){var e=new _a,g=e.functions[a],h=q.compileValueExpression(d,b,c);return f.repeat(q.getFeatureCount(b),function(a){g(h(a))}),e.done()[a]}},q.importContent=function(a,b){var c,d,e,g;if(b=b||{},a.json){if(g=a.json,d=g.content,f.isString(d))try{d=JSON.parse(d)}catch(a){r("Unable to parse JSON")}"Topology"==d.type?(e="topojson",c=q.importTopoJSON(d,b)):d.type?(e="geojson",c=q.importGeoJSON(d,b)):f.isArray(d)&&(e="json",c=q.importJSONTable(d,b))}else a.text?(e="dsv",g=a.text,c=q.importDelim(g.content,b)):a.shp?(e="shapefile",g=a.shp,c=q.importShapefile(a,b)):a.dbf&&(e="dbf",g=a.dbf,c=q.importDbf(a,b));return c||r("Missing an expected input type"),c.arcs&&!b.no_topology&&"topojson"!=e&&(i.start(),p.buildTopology(c),i.stop("Process topology")),"topojson"!=e&&q.setLayerName(c.layers[0],q.filenameToLayerName(g.filename||"")),g.filename&&(c.info.input_files=[g.filename]),c.info.input_format=e,c},q.importFileContent=function(a,b,c){var d=q.guessInputType(b,a),e={};return e[d]={filename:b,content:a},q.importContent(e,c)},q.importShapefile=function(a,b){var g,c=a.shp.content||a.shp.filename,d=q.importShp(c,b),e=d.layers[0];return a.dbf&&(g=q.importDbf(a,b),f.extend(d.info,g.info),e.data=g.layers[0].data,e.shapes&&e.data.size()!=e.shapes.length&&t("[shp] Mismatched .dbf and .shp record count -- possible data loss.")),a.prj&&(d.info.input_prj=a.prj.content),d},q.importDbf=function(a,b){var c;return b=f.extend({},b),a.cpg&&!b.encoding&&(b.encoding=a.cpg.content),c=q.importDbfTable(a.dbf.content,b),{info:{},layers:[{data:c}]}},q.filenameToLayerName=function(a){var b="layer1",c=f.parseLocalPath(a);return c.basename&&c.extension&&(b=c.basename),b},q.setLayerName=function(a,b){a.name||(a.name=f.getFileBase(b))},p.importFiles=function(a){var c,b=a.files?Va.validateInputFiles(a.files):[];return(a.merge_files||a.combine_files)&&b.length>1?c=p.mergeFiles(b,a):1==b.length?c=p.importFile(b[0],a):a.stdin?c=p.importFile("/dev/stdin",a):r("Missing input file(s)"),c},p.importFile=function(a,b){Va.checkFileExists(a);var h,i,c=q.isBinaryFile(a),d="shp"==q.guessInputFileType(a),g={};if(i=d?null:c?Va.readFile(a):Va.readFile(a,b&&b.encoding||"utf-8"),h=q.guessInputFileType(a)||q.guessInputContentType(i)){if("json"==h)try{i=JSON.parse(i)}catch(a){r("Unable to parse JSON")}}else e("Unkown file type:",a);return g[h]={filename:a,content:i},i=null,"shp"!=h&&"dbf"!=h||q.readShapefileAuxFiles(a,g),"shp"!=h||g.dbf||t(f.format("[%s] .dbf file is missing - shapes imported without attribute data.",a)),q.importContent(g,b)},p.importDataTable=function(a,b){var c=p.importFile(a,b);return c.layers[0].data},q.readShapefileAuxFiles=function(a,b){var c=f.replaceFileExtension(a,"dbf"),d=f.replaceFileExtension(a,"cpg"),e=f.replaceFileExtension(a,"prj");Va.isFile(e)&&(b.prj={filename:e,content:Va.readFile(e,"utf-8")}),!b.dbf&&Va.isFile(c)&&(b.dbf={filename:c,content:Va.readFile(c)}),b.dbf&&Va.isFile(d)&&(b.cpg={filename:d,content:Va.readFile(d,"utf-8").trim()})},p.exportFiles=function(a,b){q.writeFiles(q.exportFileContent(a,b),b)},q.writeFiles=function(a,b,c){if(a.length>0==!1)t("No files to save");else if(b.dry_run);else if(b.stdout)Va.writeFile("/dev/stdout",a[0].content);else{var d=q.getOutputPaths(f.pluck(a,"filename"),b);a.forEach(function(a,b){var c=d[b];Va.writeFile(c,a.content),t("Wrote "+c)})}c&&c(null)},q.getOutputPaths=function(b,c){var d=c.output_dir;return d&&(b=b.map(function(b){return a("path").join(d,b)})),c.force||(b=ab(b)),b},p.filterFields=function(a,b){var c=a.data;q.requireDataFields(c,b,"filter-fields"),f.difference(c.getFields(),b).forEach(c.deleteField,c)},p.renameFields=function(a,b){var c=q.mapFieldNames(b);q.requireDataFields(a.data,Object.keys(c),"rename-fields"),f.defaults(c,q.mapFieldNames(a.data.getFields())),a.data.update(q.getRecordMapper(c))},q.mapFieldNames=function(a){return a.reduce(function(a,b){var c=b.split("="),d=c[0],e=c[1]||d;return e&&d||r("[rename-fields] Invalid field description:",b),a[e]=d,a},{})},q.getRecordMapper=function(a){var b=Object.keys(a);return function(c){for(var e,d={},f=0,g=b.length;f<g;f++)e=b[f],d[a[e]]=c[e];return d}},db.prototype.transformXY=function(a,b,c){return c=c||{},c.x=a*this.a+b*this.c+this.tx,c.y=a*this.b+b*this.d+this.ty,c},db.prototype.translate=function(a,b){this.tx+=a,this.ty+=b},db.prototype.rotate=function(a,b,c){var d=Math.cos(a),e=Math.sin(a);b=b||0,c=c||0,this.a=d,this.c=-e,this.b=e,this.d=d,this.tx+=b-b*d+c*e,this.ty+=c-b*e-c*d},db.prototype.scale=function(a,b){this.a*=a,this.c*=a,this.b*=b,this.d*=b},q.projectionIndex={robinson:"+proj=robin +datum=WGS84",webmercator:"+proj=merc +ellps=sphere",wgs84:"+proj=longlat +datum=WGS84",albersusa:fb},q.getProjInfo=function(b){var c,d;try{c=q.getDatasetProjection(b),c&&(d=a("mproj").internal.get_proj_defn(c)),d||(d="unknown")}catch(a){d=a.message}return d},q.getProjDefn=function(b){var d,c=a("mproj");return b in q.projectionIndex?d=q.projectionIndex[b]:b in c.internal.pj_list?d="+proj="+b:/^\+/.test(b)?d=b:r("Unknown projection definition:",b),d},q.getProjection=function(b){var d,c=q.getProjDefn(b);if("function"==typeof c)d=c();else try{d=a("mproj").pj_init(c)}catch(a){r("Unable to use projection",c,"("+a.message+")")}return d||null},q.getDatasetProjection=function(a){var b=a.info||{},c=b.crs;return!c&&b.input_prj&&(c=q.parsePrj(b.input_prj)),!c&&q.probablyDecimalDegreeBounds(q.getDatasetBounds(a))&&(c=q.getProjection("wgs84")),c},q.printProjections=function(){var b=a("mproj").internal.pj_list;t("Proj4 projections"),Object.keys(b).sort().forEach(function(a){t("  "+f.rpad(a,7," ")+"  "+b[a].name)}),t("\nAliases"),Object.keys(q.projectionIndex).sort().forEach(function(a){t("  "+a)})},q.parsePrj=function(b){var c;try{c=a("mproj").internal.wkt_to_proj4(b)}catch(a){r("Unusable .prj file ("+a.message+")")}return q.getProjection(c)},p.mergeLayers=function(a){function d(a){var b=a.geometry_type||"";return a.data&&(b+="~"+a.data.getFields().sort().join(",")),b}var b={},c=[];return a.forEach(function(a){var g,h,e=d(a);e in b==!1?(b[e]=a,c.push(a)):(g=b[e],g.name=f.mergeNames(g.name,a.name),g.shapes=g.shapes.concat(a.shapes),g.data&&(h=g.data.getRecords().concat(a.data.getRecords()),g.data=new wa(h)))}),c.length>=2&&r("[merge-layers] Unable to merge "+(c.length<a.length?"some ":"")+"layers. Geometry and data fields must be compatible."),c},q.mergeDatasetsForExport=function(a){var b=a.map(function(a){return f.defaults({layers:a.layers.map(q.copyLayerShapes)},a)});return q.mergeDatasets(b)},q.mergeDatasets=function(a){var f,b=[],c=0,d=[];return a.forEach(function(a){var e=a.arcs?a.arcs.size():0;e>0&&b.push(a.arcs),a.layers.forEach(function(a){"polygon"!=a.geometry_type&&"polyline"!=a.geometry_type||q.forEachArcId(a.shapes,function(a){return a<0?a-c:a+c}),d.push(a)}),c+=e}),f=q.mergeArcs(b),f.size()!=c&&e("[mergeDatasets()] Arc indexing error"),{arcs:f,layers:d}},q.mergeArcs=function(a){var b=a.map(function(a){return a.getRetainedInterval()>0&&(u("Baking-in simplification setting."),a.flatten()),a.getVertexData()}),c=f.mergeArrays(f.pluck(b,"xx"),Float64Array),d=f.mergeArrays(f.pluck(b,"yy"),Float64Array),e=f.mergeArrays(f.pluck(b,"nn"),Int32Array);return new pa(e,c,d)},f.countElements=function(a){return a.reduce(function(a,b){return a+(b.length||0)},0)},f.mergeArrays=function(a,b){var c=f.countElements(a),d=b||Array,e=new d(c),g=0;return a.forEach(function(a){for(var b=a.length,c=0;c<b;c++)e[c+g]=a[c];g+=b}),e},p.graticule=function(a,b){var d,e,c=q.createGraticule(b);return a?(d=q.getDatasetProjection(a),e=q.getProjection("wgs84"),d||r("[graticule] Coordinate system is unknown, unable to create a graticule"),q.projectDataset(c,e,d,{}),f.extend(a,q.mergeDatasets([a,c]))):a=c,a},q.createGraticule=function(a){var b=1,c=10,d=90,e=Math.round(360/c)+1,g=Math.round(180/c)+1,h=f.range(e,-180,c),i=f.range(g,-90,c),j=h.map(function(a){var e=-90,f=90;return a%d!==0&&(e+=c,f-=c),q.createMeridian(a,e,f,b)}),k=i.map(function(a){return q.createParallel(a,-180,180,b)}),l={type:"FeatureCollection",features:j.concat(k)},m=q.importGeoJSON(l,{});return m.layers[0].name="graticule",m},q.graticuleFeature=function(a,b){return{type:"Feature",properties:b,geometry:{type:"LineString",coordinates:a}}},q.createMeridian=function(a,b,c,d){for(var e=[],f=b;f<c;f+=d)e.push([a,f]);return e.push([a,c]),q.graticuleFeature(e,{type:"meridian",value:a})},q.createParallel=function(a,b,c,d){for(var e=[],f=b;f<c;f+=d)e.push([f,a]);return e.push([c,a]),q.graticuleFeature(e,{type:"parallel",value:a})},p.printInfo=function(a,b){var c=a.layers.map(function(b,c){var d=q.getLayerInfo(b,a);return a.layers.length>1&&(d="Layer "+(c+1)+"\n"+d),d}).join("\n\n");t(c)},q.countNullShapes=function(a){for(var b=0,c=0;c<a.length;c++)a[c]&&0!==a[c].length||b++;return b},q.getLayerInfo=function(a,b){var c="Layer name: "+(a.name||"[unnamed]")+"\n";return c+=f.format("Records: %,d\n",q.getFeatureCount(a)),c+=q.getGeometryInfo(a,b),c+=q.getTableInfo(a)},q.getGeometryInfo=function(a,b){var e,c=a.shapes?a.shapes.length:0,d=c>0?q.countNullShapes(a.shapes):0;return a.geometry_type?(e=["Geometry","Type: "+a.geometry_type],d>0&&e.push(f.format("Null shapes: %'d",d)),c>d&&(e.push("Bounds: "+q.getLayerBounds(a,b.arcs).toArray().join(" ")),e.push("Proj.4: "+q.getProjInfo(b)))):e=["Geometry: [none]"],e.join("\n  ")+"\n"},q.getTableInfo=function(a,b){return a.data&&0!==a.data.size()?q.getAttributeInfo(a.data,b):"Attribute data: [none]"},q.getAttributeInfo=function(a,b){var c=b||0,d=b>=0?"Value":"First value",e=a.getFields().sort(),g=e.reduce(function(a,b){return Math.max(a,b.length)},5)+2,h=e.map(function(b){return a.getRecordAt(c)[b]}),i=h.reduce(function(a,b){return f.isNumber(b)&&(a=Math.max(a,q.countIntegralChars(b))),a},0),j=h.map(function(a,b){return"  "+q.formatTableItem(e[b],a,g,i)}).join("\n");return"Attribute data\n  "+f.rpad("Field",g," ")+d+"\n"+j},q.formatNumber=function(a){return a+""},q.formatString=function(a){var b={"\n":"\\n","\r":"\\r","\t":"\\t"},c=function(a){return a in b?b[a]:""};return a=a.replace(/[\r\t\n]/g,c),"'"+a+"'"},q.countIntegralChars=function(a){return f.isNumber(a)?(q.formatNumber(a)+".").indexOf("."):0},q.formatTableItem=function(a,b,c,d){var e=f.rpad(a,c," ");return e+=f.isNumber(b)?f.lpad("",d-q.countIntegralChars(b)," ")+q.formatNumber(b):f.isString(b)?q.formatString(b):f.isObject(b)?JSON.stringify(b):String(b)},q.getSimplificationInfo=function(a){new sa(a).size(),q.countInteriorVertices(a)},q.countInteriorVertices=function(a){var b=0;return a.forEach2(function(a,c){c>2&&(b+=c-2)}),b},p.innerlines=function(a,b,c){q.requirePolygonLayer(a,"[innerlines] Command requires a polygon layer");var d=q.getArcClassifier(a.shapes,b),e=q.extractInnerLines(a.shapes,d),f=q.createLineLayer(e,null);return 0===e.length&&t("[innerlines] No shared boundaries were found"),f.name=c&&c.no_replace?null:a.name,f},p.lines=function(a,b,c){function k(a){var b=a.map(function(a,b){return{TYPE:g}});h=f.merge(a,h),i=f.merge(b,i),g++}c=c||{};var j,d=q.getArcClassifier(a.shapes,b),e=f.isArray(c.fields)?c.fields:[],g=0,h=[],i=[];return q.requirePolygonLayer(a,"[lines] Command requires a polygon layer"),e.length>0&&!a.data&&r("[lines] Missing a data table"),k(q.extractOuterLines(a.shapes,d)),e.forEach(function(b){var c=a.data.getRecords(),e=function(a,d){var e=c[a],f=c[d];return e&&f&&e[b]!==f[b]?a+"-"+d:""};a.data.fieldExists(b)||r("[lines] Unknown data field:",b),k(q.extractLines(a.shapes,d(e)))}),k(q.extractInnerLines(a.shapes,d)),j=q.createLineLayer(h,i),j.name=c.no_replace?null:a.name,j},q.createLineLayer=function(a,b){return{geometry_type:"polyline",shapes:a,data:b?new wa(b):null}},q.extractOuterLines=function(a,b){var c=function(a,b){return b==-1?String(a):""};return q.extractLines(a,b(c))},q.extractInnerLines=function(a,b){var c=function(a,b){return b>-1?a+"-"+b:""};return q.extractLines(a,b(c))},q.extractLines=function(a,b){function h(a){var j,k,h=a.arcId,i=b(w(h));i&&(k=i in d?d[i]:null,j=i==f&&a.shapeId==e.shapeId&&a.partId==e.partId,k?j?k[k.length-1].push(h):k.push([h]):(k=[[h]],d[i]=k,c.push(k)),a.i==g.arcs.length-1&&k.length>1&&k[0][0]==g.arcs[0]&&(k[0]=k.pop().concat(k[0]))),e=a,f=i}function i(a){g=a}var g,c=[],d={},e=null,f="";return q.traversePaths(a,h,i),c},q.getArcClassifier=function(a,b){function g(a,b){var c="";return d[a]>-1&&(c=b(d[a],e[a]),c&&(d[a]=-1,e[a]=-1)),c}var c=b.size(),d=new Int32Array(c),e=new Int32Array(c);return f.initializeArray(d,-1),f.initializeArray(e,-1),q.traversePaths(a,function(a){var b=w(a.arcId),c=a.shapeId,f=d[b];f==-1?d[b]=c:c<f?(e[b]=f,d[b]=c):e[b]=c}),function(a){return function(b){return g(b,a)}}},p.inspect=function(a,b,c){var e,d=q.selectFeatures(a,b,c);e=1==d.length?q.getFeatureInfo(d[0],a,b):f.format("[inspect] Expression matched %d feature%s. Select one feature for details",d.length,f.pluralSuffix(d.length)),t(e)},q.getFeatureInfo=function(a,b,c){var d="Feature "+a+"\n";return d+=q.getShapeInfo(a,b,c),d+=q.getTableInfo(b,a)},q.getShapeInfo=function(a,b,c){var g,h,d=b.shapes?b.shapes[a]:null,e=b.geometry_type;return d&&e?(h="Geometry\n  Type: "+e+"\n","point"==e?h+="  Points: "+d.length+"\n":"polyline"==e?h+="  Parts: "+d.length+"\n":"polygon"==e&&(g=q.getPolygonInfo(d,c),h+=f.format("  Rings: %d cw, %d ccw\n",g.cw,g.ccw),h+="  Planar area: "+g.area+"\n",g.sph_area&&(h+="  Spherical area: "+g.sph_area+" sq. meters\n")),h):"Geometry: [null]\n"},q.getPolygonInfo=function(a,b){for(var d,c={rings:a.length,cw:0,ccw:0,area:0},e=0;e<a.length;e++)d=la.getPlanarPathArea(a[e],b),d>0?c.cw++:d<0&&c.ccw++,c.area+=d;return b.isPlanar()||(c.sph_area=la.getSphericalShapeArea(a,b)),c},q.selectFeatures=function(a,b,c){var g,d=q.getFeatureCount(a),e=[];return c.expression||r("[inspect] Missing a JS expression for selecting a feature"),g=q.compileValueExpression(c.expression,a,b),f.repeat(d,function(a){var b=g(a);b===!0?e.push(a):b!==!1&&r("[inspect] Expression must return true or false")}),e},q.importDelim=function(a,b){var c=q.guessDelimiter(a);return{layers:[{data:q.importDelimTable(a,c,b)}],info:{input_delimiter:c}}},q.importDelimTable=function(b,c,d){var f,e=a("d3-dsv").dsvFormat(c).parse(b);return 0===e.length&&r("[dsv] Unable to read any records"),delete e.columns,q.adjustRecordTypes(e,d&&d.field_types),f=new wa(e),q.deleteFields(f,q.isInvalidFieldName),f},q.supportedDelimiters=["|","\t",",",";"],q.isSupportedDelimiter=function(a){return f.contains(q.supportedDelimiters,a)},q.guessDelimiter=function(a){return f.find(q.supportedDelimiters,function(b){var c=q.getDelimiterRxp(b);return c.test(a)})||","},q.getDelimiterRxp=function(a){var b="^[^\\n\\r]+"+f.regexEscape(a);return new RegExp(b)},q.adjustRecordTypes=function(a,b){var e,c={},d=Object.keys(a[0]||[]);b&&q.parseFieldHeaders(b,c),d.forEach(function(b){e=c[b]||q.detectConversionType(b,a),"number"==e?q.convertDataField(a,b,f.parseNumber):"string"==e&&q.convertDataField(a,b,f.parseString)})},q.convertDataField=function(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d][b]=c(a[d][b])},q.detectConversionType=function(a,b){for(var d,c=null,e=0,g=b.length;e<g;e++)if(d=b[e][a],d&&f.isString(d)){c=f.stringIsNumeric(d)?"number":"string";break}return c},q.validateFieldType=function(a){var b=a.toLowerCase(),c=null;return"n"==b[0]?c="number":"s"==b[0]&&(c="string"),c},q.removeTypeHints=function(a){return q.parseFieldHeaders(a,{})},q.parseFieldHeaders=function(a,b){var c=a.map(function(a){var c,d,e;return a.indexOf(":")!=-1?(c=a.split(":"),d=c[0],e=q.validateFieldType(c[1]),e||t("Invalid type hint (expected :str or :num) ["+a+"]")):"+"===a[0]?(d=a.substr(1),e="number"):d=a,e&&(b[d]=e),d});return c},f.stringIsNumeric=function(a){var b=f.parseNumber(a);return!isNaN(b)&&b==Number(f.cleanNumericString(a))},f.cleanNumericString=function(a){return String(a).replace(/,/g,"")},f.parseString=function(a){return a?a:""},f.parseNumber=function(a){var b=a?parseFloat(f.cleanNumericString(a)):NaN;return isNaN(b)?null:b},p.joinPointsToPolygons=function(a,b,c,d){var e=q.getPolygonToPointsFunction(a,b,c,d);return q.prepJoinLayers(a,c),q.joinTables(a.data,c.data,e,d)},p.joinPolygonsToPoints=function(a,b,c,d){var e=q.getPointToPolygonFunction(a,b,c,d);return q.prepJoinLayers(a,b),q.joinTables(a.data,b.data,e,d)},q.prepJoinLayers=function(a,b){a.data||(a.data=new wa(a.shapes.length)),b.data||r("[join] Can't join a layer that is missing attribute data")},q.getPolygonToPointsFunction=function(a,b,c,d){for(var g,h,e=q.getPointToPolygonFunction(c,a,b,d),f=[],i=0,j=c.shapes.length;i<j;i++)g=e(i),g&&(h=g[0],h in f?f[h].push(i):f[h]=[i]);return function(a){return f[a]||null}},q.getPointToPolygonFunction=function(a,b,c,d){var e=new ra(b.shapes,c),f=a.shapes;return function(a){var b=f[a],c=-1;return b&&(c=e.findEnclosingShape(b[0])),c==-1?null:[c]}},p.join=function(a,b,c){var d,e,g,h,i;c.keys?(2!=c.keys.length&&r("[join] Expected two key fields: a target field and a source field"),d=q.getJoinTable(b,c),i=p.joinAttributesToFeatures(a,d,c)):(d=q.getJoinDataset(b,c),d||r("[join] Missing a joinable data source"),e=d.layers[0],g=e.geometry_type,h=a.geometry_type,"point"==g&&"polygon"==h?i=p.joinPointsToPolygons(a,b.arcs,e,c):"polygon"==g&&"point"==h?i=p.joinPolygonsToPoints(a,e,d.arcs,c):r(f.format("[join] Unable to join %s geometry to %s geometry",g||"null",h||"null"))),i.unmatched&&b.layers.push(i.unmatched),i.unjoined&&b.layers.push(i.unjoined)},q.getJoinTable=function(a,b){var d,c=q.findMatchingLayers(a.layers,b.source);return d=c.length>0?c[0].data:p.importJoinTable(b.source,b)},q.getJoinDataset=function(a,b){var c=q.findMatchingLayers(a.layers,b.source);return c.length||(a=p.importFile(b.source,b),c=a.layers),c.length?{arcs:a.arcs,layers:[c[0]]}:null},p.importJoinTable=function(a,b){var c=[];b.keys&&c.push(b.keys[1]),b.fields&&(c=c.concat(b.fields)),b.field_types&&(c=c.concat(b.field_types));var d=f.defaults({field_types:c},b);return p.importDataTable(a,d)},p.joinAttributesToFeatures=function(a,b,c){var d=q.removeTypeHints(c.keys),e=d[0],g=d[1],h=a.data,i=c.fields||f.difference(b.getFields(),[g]),j=q.getJoinByKey(h,e,b,g);return c=f.defaults({fields:i},c),q.joinTables(h,b,j,c)},q.joinTables=function(a,b,c,d){var t,u,v,x,y,z,e=b.getRecords(),g=a.getRecords(),h=[],i=q.getFieldsToJoin(a,b,d),j=d.sum_fields||[],k=f.difference(i,j),l=q.getCountFieldName(a.getFields()),m=j.length>0,n=new Uint32Array(e.length),o=0,p=0,s={};d.where&&(z=q.getJoinFilter(b,d.where));for(var A=0,B=g.length;A<B;A++){v=g[A],x=c(A),y=0;for(var C=0,D=x?x.length:0;C<D;C++)u=x[C],z&&!z(u)||(t=e[u],k.length>0&&(0===y?q.joinByCopy(v,t,k):p++),j.length>0&&q.joinBySum(v,t,j),n[u]++,y++);y>0?o++:v&&(d.unmatched&&h.push(f.extend({},v)),q.updateUnmatchedRecord(v,k,j)),
m&&(v[l]=y)}return 0===o&&r("[join] No records could be joined"),q.printJoinMessage(o,g.length,q.countJoins(n),e.length,p),d.unjoined&&(s.unjoined={name:"unjoined",data:new wa(e.filter(function(a,b){return 0===n[b]}))}),d.unmatched&&(s.unmatched={name:"unmatched",data:new wa(h)}),s},q.countJoins=function(a){for(var b=0,c=0,d=a.length;c<d;c++)a[c]>0&&b++;return b},q.updateUnmatchedRecord=function(a,b,c){q.joinByCopy(a,{},b),q.joinBySum(a,{},c)},q.getCountFieldName=function(a){var b=q.getUniqFieldNames(a.concat("joins"));return b.pop()},q.joinByCopy=function(a,b,c){for(var d,e=0,f=c.length;e<f;e++)d=c[e],Object.prototype.hasOwnProperty.call(b,d)?a[d]=b[d]:Object.prototype.hasOwnProperty.call(a,d)||(a[d]=null)},q.joinBySum=function(a,b,c){for(var d,e=0;e<c.length;e++)d=c[e],a[d]=(a[d]||0)+(b[d]||0)},q.printJoinMessage=function(a,b,c,d,e){t(f.format("[join] Joined %'d data record%s",c,f.pluralSuffix(c))),a<b&&t(f.format("[join] %d/%d target records received no data",b-a,b)),c<d&&t(f.format("[join] %d/%d source records could not be joined",d-c,d)),e>0&&t(f.format("[join] %'d collision%s occured; data was copied from the first matching source record",e,f.pluralSuffix(e)))},q.getFieldsToJoin=function(a,b,c){var d;return d=c.fields?q.removeTypeHints(c.fields):b.getFields(),c.force||(d=f.difference(d,a.getFields())),d},q.getJoinByKey=function(a,b,c,d){var e=a.getRecords(),f=q.createTableIndex(c.getRecords(),d);return c.fieldExists(d)===!1&&r("[join] External table is missing a field named:",d),a&&a.fieldExists(b)||r("[join] Target layer is missing key field:",b),function(a){var c=e[a],d=c&&c[b],g=null;return c&&d in f&&(g=f[d]),g}},q.getJoinFilter=function(a,b){var c=q.compileValueExpression(b,{data:a},null);return function(a){var b=c(a);return b!==!0&&b!==!1&&r('[join] "where" expression must return true or false'),b}},q.createTableIndex=function(a,b){for(var d,e,c={},f=0,g=a.length;f<g;f++)d=a[f],e=d[b],e in c?c[e].push(f):c[e]=[f];return c},p.keepEveryPolygon=q.keepEveryPolygon=function(a,b){i.start(),b.forEach(function(b){"polygon"==b.geometry_type&&q.protectLayerShapes(a,b.shapes)}),i.stop("Protect shapes")},q.protectLayerShapes=function(a,b){b.forEach(function(b){q.protectShape(a,b)})},q.protectShape=function(a,b){for(var e,f,c=0,d=b?b.length:0,g=0;g<d;g++)f=a.getSimpleShapeBounds(b[g]).area(),f>c&&(e=b[g],c=f);e&&0!==e.length?1==e.length?q.protectIslandRing(a,e):q.protectMultiRing(a,e):u("[protectShape()] Invalid shape:",b)},q.protectIslandRing=function(a,b){var c=q.lockMaxThreshold(a,b);1==c&&(c+=q.lockMaxThreshold(a,b)),c<2&&u("[protectIslandRing()] Failed on ring:",b)},q.protectMultiRing=function(a,b){var e,f,c=a.getRetainedInterval(),d=0;for(a.setRetainedInterval(1/0),e=la.getPlanarPathArea(b,a);e<=d;){if(f=q.lockMaxThreshold(a,b),0===f){u("[protectMultiRing()] Failed on ring:",b);break}e=la.getPlanarPathArea(b,a)}a.setRetainedInterval(c)},q.lockMaxThreshold=function(a,b){for(var d,f,g,h,i,j,c=0,e=a.getVertexData(),k=0;k<b.length;k++)f=b[k],f<0&&(f=~f),i=e.ii[f],j=i+e.nn[f]-1,g=q.findNextRemovableVertex(e.zz,1/0,i,j),g!=-1&&(h=e.zz[g],h>c&&(c=h,d=f));return c>0?(i=e.ii[d],j=i+e.nn[d]-1,q.replaceInArray(e.zz,c,1/0,i,j)):0},q.replaceInArray=function(a,b,c,d,e){for(var f=0,g=d;g<=e;g++)a[g]===b&&(a[g]=c,f++);return f},p.stitch=function(a){var d,f,b=a.arcs;b&&!b.isPlanar()||e("[stitch] Requires lat-lng dataset"),q.snapEdgeArcs(b)&&(f=q.divideArcs(a),d=q.getPolygonDissolver(f,!0),a.layers.forEach(function(a){if("polygon"==a.geometry_type){var c=a.shapes,e=q.findEdgeShapes(c,b);e.forEach(function(a){c[a]=d(c[a])})}}))},q.findEdgeArcs=function(a){for(var b=q.getWorldBounds(),c=[],d=0,e=a.size();d<e;d++)a.arcIsContained(d,b)||c.push(d);return c},q.findEdgeShapes=function(a,b){var c=q.findEdgeArcs(b);return q.findShapesByArcId(a,c,b.size())},q.snapEdgeArcs=function(a){for(var k,l,b=a.getVertexData(),c=b.xx,d=b.yy,e=!1,f=1e-10,g=-180,h=180,i=-90,j=90,m=0,n=c.length;m<n;m++)k=d[m],l=c[m],(l<=g+f||l>=h-f)&&(e=!0,c[m]=g),k<=i+f?(e=!0,d[m]=i,c[m]=g):k>=j-f&&(e=!0,d[m]=j,c[m]=g);return e},p.mergeFiles=function(a,b){var c=a.map(function(a){var c=f.defaults({no_topology:!0,auto_snap:!1,snap_interval:null,files:[a]},b);return p.importFile(a,c)}),d=c.map(function(a){return a.info.input_format});1!=f.uniq(d).length&&r("Importing files with different formats is not supported");var e=q.mergeDatasets(c);return e.info=c[0].info,e.info.input_files=a,b.no_topology||"topojson"==e.info.input_format||((b.auto_snap||b.snap_interval)&&(i.start(),q.snapCoords(e.arcs,b.snap_interval),i.stop("Snapping points")),p.buildTopology(e)),b.merge_files&&(e.layers=p.mergeLayers(e.layers)),e},p.createPointLayer=function(a,b,c){var d=q.getOutputLayer(a,c);d.shapes=c.x||c.y?q.pointsFromDataTable(a.data,c):q.pointsFromPolygons(a,b,c),d.geometry_type="point";var e=d.shapes.reduce(function(a,b){return b||a++,a},0);return e>0&&t(f.format("[points] %,d of %,d points are null",e,d.shapes.length)),a.data&&(d.data=c.no_replace?a.data.clone():a.data),d},q.pointsFromPolygons=function(a,b,c){"polygon"!=a.geometry_type&&r("[points] Expected a polygon layer");var d=c.inner?la.findInteriorPoint:la.getShapeCentroid;return a.shapes.map(function(a){var c=d(a,b);return c?[[c.x,c.y]]:null})},q.pointsFromDataTable=function(a,b){return a||r("[points] Layer is missing a data table"),b.x&&b.y&&a.fieldExists(b.x)&&a.fieldExists(b.y)||r("[points] Missing x,y data fields"),a.getRecords().map(function(a){var c=a[b.x],d=a[b.y];return f.isFiniteNumber(c)&&f.isFiniteNumber(d)?[[c,d]]:null})},q.editArcs=function(a,b){function h(a){d.push(a[0]),f.push(a[1]),g++}function i(a,b){var d,f,i,j,k=0;for(g=0;a.hasNext();)d=a.x,f=a.y,b(h,d,f,i,j,k++),i=d,j=f;1==g&&e("An invalid arc was created"),c.push(g)}var g,c=[],d=[],f=[];a.forEach(function(a,c){i(a,b)}),a.updateVertexData(c,d,f)},p.proj=function(a,b){var d,e,g,c=!!p.gui;b&&b.from?(e=q.getProjection(b.from,b),e||r("[proj] Unknown source projection:",b.from)):(e=q.getDatasetProjection(a),e||r("[proj] Unable to project -- source coordinate system is unknown")),g=q.getProjection(b.projection,b),g||r("[proj] Unknown projection:",b.projection),c?(d={},a.arcs&&(d.arcs=a.arcs.getCopy()),d.layers=a.layers.map(function(a){return q.layerHasPoints(a)&&(a=f.extend({},a),a.shapes=q.cloneShapes(a.shapes)),a})):d=a;try{q.projectDataset(d,e,g,b)}catch(a){r(f.format("[proj] Projection failure%s (%s)",a.point?" at "+a.point.join(" "):"",a.message))}c&&(a.arcs=d.arcs,a.layers=d.layers),a.info&&(a.info.crs=g)},q.projectDataset=function(a,b,c,d){var e=q.getProjTransform(b,c);a.layers.forEach(function(a){q.layerHasPoints(a)&&q.projectPointLayer(a,e)}),a.arcs&&(d.densify?q.projectAndDensifyArcs(a.arcs,e):q.projectArcs(a.arcs,e))},q.getProjTransform=function(b,c){var d=a("mproj"),e=b.is_latlong;return function(a,f){var g;return e&&(a<-180?a=-180:a>180&&(a=180)),g=[a,f],d.pj_transform_point(b,c,g),g}},q.projectPointLayer=function(a,b){q.forEachPoint(a.shapes,function(a){var c=b(a[0],a[1]);a[0]=c[0],a[1]=c[1]})},q.projectArcs=function(a,b){for(var g,c=a.getVertexData(),d=c.xx,e=c.yy,f=c.zz,h=0,i=d.length;h<i;h++)g=b(d[h],e[h]),d[h]=g[0],e[h]=g[1];a.updateVertexData(c.nn,d,e,f)},q.getDefaultDensifyInterval=function(a,b){var c=q.getAvgSegment2(a),d=a.getBounds(),e=b(d.centerX(),d.centerY()),f=b(d.centerX()+c[0],d.centerY()+c[1]);return C(e[0],e[1],f[0],f[1])},q.densifySegment=function(a,b,c,d,e,f,g,h,i,j,k){var l=(a+e)/2,m=(b+f)/2,n=i(l,m),o=la.pointSegDistSq(n[0],n[1],c,d,g,h);return k=k||[],o>j*j*.25&&C(a,b,e,f)>.01&&(q.densifySegment(a,b,c,d,l,m,n[0],n[1],i,j,k),k.push(n),q.densifySegment(l,m,n[0],n[1],e,f,g,h,i,j,k)),k},q.projectAndDensifyArcs=function(a,b){function e(a,e,f,g,h,i){var j=d[0],k=d[1];d=b(e,f),i>0&&B(d[0],d[1],j,k)>c*c*25&&q.densifySegment(g,h,j,k,e,f,d[0],d[1],b,c).forEach(a),a(d)}var c=q.getDefaultDensifyInterval(a,b),d=[0,0];q.editArcs(a,e)},p.renameLayers=function(a,b){var c=b&&b.length||0;a.forEach(function(d,e){var f;0===c?f="layer"+(e+1):(f=e<c-1?b[e]:b[c-1],c<a.length&&e>=c-2&&(f+=e-c+2)),d.name=f})};var hb={};hb.getArcCalculator=function(a,b){var c=new gb,d=f.expandoBuffer(Int32Array),g=f.expandoBuffer(Int32Array),h=b?function(b,c,d,e,f,g){return a(e[b],f[b],g[b],e[c],f[c],g[c],e[d],f[d],g[d])}:function(b,c,d,e,f){return a(e[b],f[b],e[c],f[c],e[d],f[d])};return function(f,i,j,k){var o,q,r,s,l=f.length,m=d(l),n=g(l),p=-(1/0);for(k&&!b?e("[visvalingam] Received z-axis data for 2D simplification"):!k&&b?e("[visvalingam] Missing z-axis data for 3D simplification"):f.length>i.length&&e("[visvalingam] Incompatible data arrays:",f.length,i.length),r=0;r<l;r++)q=r-1,s=r+1,o=q<0||s>=l?1/0:h(q,r,s,i,j,k),f[r]=o,n[r]=s,m[r]=q;for(c.init(f);c.size()>0&&(r=c.pop(),o=f[r],o!==1/0);)o<p?f[r]=p:p=o,q=m[r],s=n[r],q>0&&(o=h(m[q],q,s,i,j,k),c.updateValue(q,o)),s<l-1&&(o=h(q,s,n[s],i,j,k),c.updateValue(s,o)),n[q]=s,m[s]=q}},hb.standardMetric=aa,hb.standardMetric3D=ea,hb.getWeightedMetric=function(a){var b=hb.getWeightFunction(a);return function(a,c,d,e,f,g){var h=aa(a,c,d,e,f,g),i=ca(a,c,d,e,f,g);return b(i)*h}},hb.getWeightedMetric3D=function(a){var b=hb.getWeightFunction(a);return function(a,c,d,e,f,g,h,i,j){var k=ea(a,c,d,e,f,g,h,i,j),l=da(a,c,d,e,f,g,h,i,j);return b(l)*k}},hb.getWeightCoefficient=function(a){return a&&f.isNumber(a&&a.weighting)?a.weighting:.7},hb.getWeightFunction=function(a){var b=hb.getWeightCoefficient(a);return function(a){return-a*b+1}},hb.weight=function(a){var b=.7;return-a*b+1},hb.getEffectiveAreaSimplifier=function(a){var b=a?hb.standardMetric3D:hb.standardMetric;return hb.getPathSimplifier(b,a)},hb.getWeightedSimplifier=function(a,b){var c=b?hb.getWeightedMetric3D(a):hb.getWeightedMetric(a);return hb.getPathSimplifier(c,b)},hb.getPathSimplifier=function(a,b){return hb.scaledSimplify(hb.getArcCalculator(a,b))},hb.scaledSimplify=function(a){return function(b,c,d,e){a(b,c,d,e);for(var f=1,g=b.length-1;f<g;f++)b[f]=.65*Math.sqrt(b[f])}};var ib={};ib.metricSq3D=la.pointSegDistSq3D,ib.metricSq=la.pointSegDistSq,ib.calcArcData=function(a,b,c,d){function g(e,h,i,j){var o,p,k=b[e],l=c[e],m=b[h],n=c[h];f&&(o=d[e],p=d[h]);for(var u,q=0,r=0,s=0,t=0,v=e+1;v<h;v++)u=f?ib.metricSq3D(b[v],c[v],d[v],k,l,o,m,n,p):ib.metricSq(b[v],c[v],k,l,m,n),u>=q&&(q=u,r=v);return j<q&&(q=j),r-e>1&&(s=g(e,r,i+1,q)),h-r>1&&(t=g(r,h,i+1,q)),1==i&&k==m&&l==n&&(q=Math.max(s,t)),a[r]=Math.sqrt(q),q}var e=a.length,f=!!d;a[0]=a[e-1]=1/0,e>2&&g(0,e-1,1,Number.MAX_VALUE)},p.findAndRepairIntersections=function(a){i.start();var h,b=q.findSegmentIntersections(a),c=q.repairIntersections(a,b),d=b.length,e=c.length,g=d>e?d-e:0;i.stop("Find and repair intersections"),d>0&&(h=f.format("[simplify] Repaired %'i intersection%s",g,f.pluralSuffix(g)),e>0&&(h+=f.format("; %'i intersection%s could not be repaired",e,f.pluralSuffix(e))),t(h))},q.repairIntersections=function(a,b){for(;q.unwindIntersections(a,b)>0;)b=q.findSegmentIntersections(a);return b},q.unwindIntersections=function(a,b){var h,i,j,k,c=a.getVertexData(),d=a.getRetainedInterval(),e=0,g=0;for(i=q.getUnwindTargets(b,d,c.zz),f.sortOn(i,"z",!0);i.length>0;)for(j=i.pop(),h=q.redetectIntersectionTarget(j,d,c.xx,c.yy,c.zz),1==h.length&&(h=q.unwindIntersection(h[0],d,c.zz),e++),k=0;k<h.length;k++)q.insertUnwindTarget(i,h[k]);return++g>5e5?(u("Caught an infinite loop at intersection:",j),0):e},q.getUnwindTargets=function(a,b,c){return a.reduce(function(a,d){var e=q.getUnwindTarget(d,b,c);return null!==e&&a.push(e),a},[])},q.getUnwindTarget=function(a,b,c){var f,d=q.findNextRemovableVertex(c,b,a.a[0],a.a[1]),e=q.findNextRemovableVertex(c,b,a.b[0],a.b[1]);return f=d==-1&&e==-1?null:e==-1||d!=-1&&c[d]>c[e]?{a:a.a,b:a.b,z:c[d]}:{a:a.b,b:a.a,z:c[e]}},q.insertUnwindTarget=function(a,b){for(var c=a.length;c>0&&!(a[c-1].z<=b.z);)a[c]=a[c-1],c--;a[c]=b},q.unwindIntersection=function(a,b,c){for(var d=[],f=a.a[0],g=a.a[1],h=a.z,i=f+1;i<=g;i++)c[i]!=h&&i!=g||(d.push({a:[f,i],b:a.b,z:h}),i!=g&&(c[i]=b),f=i);return d.length<2&&e("Error in unwindIntersection()"),d},q.redetectIntersectionTarget=function(a,b,c,d,e){var f=q.getIntersectionCandidates(a,b,c,d,e),g=q.intersectSegments(f,c,d);return q.getUnwindTargets(g,b,e)},q.getIntersectionCandidates=function(a,b,c,d,e){var f=q.getSegmentVertices(a.a,b,c,d,e);return f=f.concat(q.getSegmentVertices(a.b,b,c,d,e))},q.getSegmentVertices=function(a,b,c,d,e){var f,g,h,i=[];a[0]<=a[1]?(f=a[0],g=a[1]):(f=a[1],g=a[0]),h=f;for(var j=f+1;j<=g;j++)e[j]>=b&&(c[h]<c[j]?i.push(h,j):i.push(j,h),h=j);return i},q.calcSimplifyStats=function(a,b){function t(a,b,c,d,e,f){var g=[],h=[],i=[];return la.convLngLatToSph([a,c,e],[b,d,f],g,h,i),la.pointSegDistSq3D(g[0],h[0],i[0],g[1],h[1],i[1],g[2],h[2],i[2])}var s,c=b?t:la.pointSegDistSq,d=b?la.signedAngleSph:la.signedAngle,e=0,g=0,h=0,i=0,j=0,k=0,l=-1,m=-1,n=[],o=[],p=a.getVertexData().zz;return a.forEachSegment(function(a,b,f,q){var r,s,t,u,v,w,x,y,z;if(r=f[a],s=q[a],t=f[b],u=q[b],a==m&&(y=d(f[l],q[l],r,s,t,u),y>Math.PI&&(y=2*Math.PI-y),isNaN(y)||o.push(180*y/Math.PI)),l=a,m=b,p[a]<1/0&&g++,x=b-a-1,!(x<1))if(e+=x,r==t&&s==u)h++;else{for(v=0;++a<b;)z=c(f[a],q[a],r,s,t,u),v=Math.max(v,z);k+=v,w=Math.sqrt(v),j+=w,n.push(w),i=Math.max(i,w)}}),s={angleMean:0,displacementMean:0,displacementMax:i,collapsedRings:h,removed:e,retained:g,uniqueCount:q.countUniqueVertices(a),removableCount:e+g},o.length>0&&(s.angleMean=f.sum(o)/o.length,s.angleQuartiles=[f.findValueByPct(o,.75),f.findValueByPct(o,.5),f.findValueByPct(o,.25)]),n.length>0&&(s.displacementMean=j/n.length,s.displacementQuartiles=[f.findValueByPct(n,.75),f.findValueByPct(n,.5),f.findValueByPct(n,.25)]),s},q.countUniqueVertices=function(a){var b=2*a.size(),c=new sa(a).size();return a.getPointCount()-b+c},q.getSimplifyMethodLabel=function(a){return{dp:"Ramer-Douglas-Peucker",visvalingam:"Visvalingam",weighted_visvalingam:"Weighted Visvalingam"}[a]||"Unknown"},q.printSimplifyInfo=function(a,b){var c=q.getSimplifyMethod(b),d=q.getSimplifyMethodLabel(c),e=q.useSphericalSimplify(a,b),g=q.calcSimplifyStats(a,e),h=(g.removed+g.collapsedRings)/g.uniqueCount||0,i=g.removed/g.removableCount||0,j=g.angleQuartiles,k=g.displacementQuartiles,l=["Simplification statistics"];l.push(f.format("Method: %s (%s) %s",d,e?"spherical":"planar","weighted_visvalingam"==c?"(weighting="+hb.getWeightCoefficient(b)+")":"")),l.push(f.format("Removed vertices: %,d",g.removed+g.collapsedRings)),l.push(f.format("   %.1f% of %,d unique coordinate locations",100*h,g.uniqueCount)),l.push(f.format("   %.1f% of %,d filterable coordinate locations",100*i,g.removableCount)),l.push(f.format("Simplification threshold: %.4f %s",a.getRetainedInterval(),e?"meters":"")),l.push(f.format("Collapsed rings: %,d",g.collapsedRings)),l.push("Displacement statistics"),l.push(f.format("   Mean displacement: %.4f",g.displacementMean)),l.push(f.format("   Max displacement: %.4f",g.displacementMax)),l.push(f.format("   Quartiles: %.2f, %.2f, %.2f",k[0],k[1],k[2])),l.push("Vertex angle statistics"),l.push(f.format("   Mean angle: %.2f degrees",g.angleMean)),l.push(f.format("   Quartiles: %.2f, %.2f, %.2f",j[0],j[1],j[2])),t(l.join("\n   "))},p.simplify=function(a,b){var c=a.arcs;c||r("[simplify] Missing path data"),b=q.getStandardSimplifyOpts(a,b),a.info=f.defaults({simplify:b},a.info),i.start(),q.simplifyPaths(c,b),f.isNumber(b.pct)?c.setRetainedPct(b.pct):f.isNumber(b.interval)?c.setRetainedInterval(b.interval):b.resolution&&c.setRetainedInterval(q.calcSimplifyInterval(c,b)),i.stop("Calculate simplification"),b.keep_shapes&&p.keepEveryPolygon(c,a.layers),!b.no_repair&&c.getRetainedInterval()>0&&p.findAndRepairIntersections(c),b.stats&&q.printSimplifyInfo(c,b)},q.getStandardSimplifyOpts=function(a,b){return b=b||{},f.defaults({method:q.getSimplifyMethod(b),spherical:q.useSphericalSimplify(a.arcs,b)},b)},q.useSphericalSimplify=function(a,b){return!b.planar&&!a.isPlanar()},q.simplifyPaths=function(a,b){var c=q.getSimplifyFunction(b);a.setThresholds(new Float64Array(a.getPointCount())),b.spherical?(q.simplifyPaths3D(a,c),q.protectWorldEdges(a)):q.simplifyPaths2D(a,c)},q.simplifyPaths2D=function(a,b){a.forEach3(function(a,c,d,e){b(d,a,c)})},q.simplifyPaths3D=function(a,b){var c=f.expandoBuffer(Float64Array),d=f.expandoBuffer(Float64Array),e=f.expandoBuffer(Float64Array);a.forEach3(function(a,f,g,h){var i=a.length,j=c(i),k=d(i),l=e(i);la.convLngLatToSph(a,f,j,k,l),b(g,j,k,l)})},q.getSimplifyMethod=function(a){var b=a.method;return(!b||"weighted"==b||"visvalingam"==b&&a.weighting)&&(b="weighted_visvalingam"),b},q.getSimplifyFunction=function(a){var b;return"dp"==a.method?b=ib.calcArcData:"visvalingam"==a.method?b=hb.getEffectiveAreaSimplifier(a.spherical):"weighted_visvalingam"==a.method?b=hb.getWeightedSimplifier(a,a.spherical):r("[simplify] Unsupported simplify method:",method),b},q.protectWorldEdges=function(a){var b=q.getWorldBounds(1e-12),c=a.getBounds().toArray();ja(b,c)!==!0&&a.forEach3(function(a,c,d){for(var f,g,e=0,h=0,i=d.length;h<i;h++)f=a[h],g=c[h],(f>b[2]||f<b[0]||g<b[1]||g>b[3])&&(0===e&&(e=q.findMaxThreshold(d)),d[h]!==1/0&&(d[h]=e))})},q.findMaxThreshold=function(a){for(var b,c=0,d=0,e=a.length;d<e;d++)b=a[d],b>c&&b<1/0&&(c=b);return c},q.parseSimplifyResolution=function(a){var b,c,d;return f.isNumber(a)?(c=a,d=a):f.isString(a)&&(b=a.split("x"),c=Number(b[0])||0,d=2==b.length?Number(b[1])||0:c),c>=0&&d>=0&&c+d>0||r("Invalid simplify resolution:",a),[c,d]},q.calcPlanarInterval=function(a,b,c,d){var e=0!==a&&c/d>a/b||0===b;return e?c/a:d/b},q.calcSphericalInterval=function(a,b,c){var d=la.degreesToMeters(c.width())*Math.cos(c.centerY()*la.D2R),e=la.degreesToMeters(c.height());return q.calcPlanarInterval(a,b,d,e)},q.calcSimplifyInterval=function(a,b){var c,d,e;return b.interval?d=b.interval:b.resolution&&(c=q.parseSimplifyResolution(b.resolution),e=a.getBounds(),d=q.useSphericalSimplify(a,b)?q.calcSphericalInterval(c[0],c[1],e):q.calcPlanarInterval(c[0],c[1],e.width(),e.height()),d*=.5),d},p.splitLayer=function(a,b,c){var j,d=c&&c.no_replace?q.copyLayer(a):a,e=d.data?d.data.getRecords():null,g=d.shapes,h={},i=[];return!b||e&&d.data.fieldExists(b)||r("[split] Missing attribute field:",b),j=d.name||(b?"":"split"),f.repeat(q.getFeatureCount(d),function(a){var k,c=String(b?e[a][b]:a+1);c in h==!1?(h[c]=i.length,k=f.defaults({name:q.getSplitLayerName(j,c),data:e?new wa:null,shapes:g?[]:null},d),i.push(k)):k=i[h[c]],g&&k.shapes.push(g[a]),e&&k.data.getRecords().push(e[a])}),i},q.getSplitLayerName=function(a,b){return(a?a+"-":"")+b},p.splitLayerOnGrid=function(a,b,c,d){function o(a){var b=Math.floor((a.centerX()-h)/j*d),e=Math.floor((a.centerY()-i)/k*c);return b=f.clamp(b,0,d-1),e=f.clamp(e,0,c-1),e*d+b}function p(a){var b=a%d+1,c=Math.floor(a/d)+1;return"r"+c+"c"+b}var e=a.shapes,g=b.getBounds(),h=g.xmin,i=g.ymin,j=g.width(),k=g.height(),l=a.data?a.data.getRecords():null,n=[];e.forEach(function(c,d){var e=b.getMultiShapeBounds(c),f=o(e),g=n[f];g||(g=n[f]={shapes:[],properties:l?[]:null,bounds:new m,name:q.getSplitLayerName(a.name,p(f))}),g.shapes.push(c),g.bounds.mergeBounds(e),g.properties&&g.properties.push(l[d])});var r=[];return n.forEach(function(b,c){if(b){var d={shapes:b.shapes,name:b.name};f.defaults(d,a),b.properties&&(d.data=new wa(b.properties)),r.push(d)}}),r},p.subdivideLayer=function(a,b,c){return q.subdivide(a,b,q.compileCalcExpression(c))},q.subdivide=function(a,b,c){var g,h,i,j,d=c(a,b),e=[];return f.isBoolean(d)||r("[subdivide] Expression must evaluate to true or false"),d?(h=q.getLayerBounds(a,b),g=q.divideLayer(a,b,h),i=g[0],i.shapes.length>1&&i.shapes.length<a.shapes.length?f.merge(e,q.subdivide(i,b,c)):e.push(i),j=g[1],j.shapes.length>1&&j.shapes.length<a.shapes.length?f.merge(e,q.subdivide(j,b,c)):e.push(j)):e.push(a),e.forEach(function(b,c){b.name=q.getSplitLayerName(a.name||"split",c+1),f.defaults(b,a)}),e},q.divideLayer=function(a,b,c){var g,h,d=a.data?a.data.getRecords():null,e=a.shapes;g={geometry_type:a.geometry_type,shapes:[],data:d?[]:null},h={geometry_type:a.geometry_type,shapes:[],data:d?[]:null};var i=c&&c.width()>c.height(),j=e.map(function(a){var c=b.getMultiShapeBounds(a);return i?c.centerX():c.centerY()}),k=f.range(j.length);return k.sort(function(a,b){return j[a]-j[b]}),k.forEach(function(a,b){var c=b<e.length/2?g:h;c.shapes.push(e[a]),d&&c.data.push(d[a])}),d&&(g.data=new wa(g.data),h.data=new wa(h.data)),[g,h]},p.sortFeatures=function(a,b,c){var d=q.getFeatureCount(a),e=!c.descending,g=q.compileValueExpression(c.expression,a,b),h=[];f.repeat(d,function(a){h.push(g(a))});var i=f.getSortedIds(h,e);a.shapes&&f.reorderArray(a.shapes,i),a.data&&f.reorderArray(a.data.getRecords(),i)},p.uniq=function(a,b,c){var d=q.getFeatureCount(a),e=q.compileValueExpression(c.expression,a,b),g={},h=[],i=function(a,b){return!h[b]};f.repeat(d,function(a){var b=e(a);h[a]=b in g,g[b]=!0}),a.shapes&&(a.shapes=a.shapes.filter(i)),a.data&&(a.data=new wa(a.data.getRecords().filter(i)))},p.runCommand=function(a,b,c){function m(a,e){i.stop("-"+d),c(a,a?null:e||b)}var h,j,k,l,d=a.name,g=a.options;try{if(i.start(),b)l=b.arcs,b.layers.length>0==!1&&e("Dataset contains 0 layers"),g.target?(h=q.findMatchingLayers(b.layers,g.target),h.length||r(f.format("[%s] Missing target layer: %s\nAvailable layers: %s",d,g.target,q.getFormattedLayerList(b.layers)))):h=b.layers;else if("graticule"!=d&&"i"!=d)throw new s("Missing a -i command");if("calc"==d)q.applyCommand(p.calc,h,l,g);else if("clip"==d)p.clipLayers(h,g.source,b,g);else if("dissolve"==d)j=q.applyCommand(p.dissolve,h,l,g);else if("dissolve2"==d)j=q.applyCommand(p.dissolve2,h,b,g);else if("each"==d)q.applyCommand(p.evaluateEachFeature,h,l,g.expression,g);else if("erase"==d)p.eraseLayers(h,g.source,b,g);else if("explode"==d)j=q.applyCommand(p.explodeFeatures,h,l,g);else if("filter"==d)j=q.applyCommand(p.filterFeatures,h,l,g);else if("filter-fields"==d)q.applyCommand(p.filterFields,h,g.fields);else if("filter-islands"==d)q.applyCommand(p.filterIslands,h,l,g);else if("filter-slivers"==d)q.applyCommand(p.filterSlivers,h,l,g);else if("flatten"==d)j=q.applyCommand(p.flattenLayer,h,b,g);else if("graticule"==d)b=p.graticule(b,g);else if("i"==d)b=p.importFiles(a.options);else if("info"==d)p.printInfo(b);else if("inspect"==d)q.applyCommand(p.inspect,h,l,g);else if("innerlines"==d)j=q.applyCommand(p.innerlines,h,l,g);else if("join"==d)q.applyCommand(p.join,h,b,g);else if("lines"==d)j=q.applyCommand(p.lines,h,l,g);else if("stitch"==d)p.stitch(b);else if("merge-layers"==d)j=p.mergeLayers(h);else{if("o"==d)return k=q.exportFileContent(f.defaults({layers:h},b),g),void(g.__nowrite?m(null,k):q.writeFiles(k,g,m));"points"==d?j=q.applyCommand(p.createPointLayer,h,l,g):"proj"==d?p.proj(b,g):"rename-fields"==d?q.applyCommand(p.renameFields,h,g.fields):"rename-layers"==d?p.renameLayers(h,g.names):"simplify"==d?p.simplify(b,g):"sort"==d?q.applyCommand(p.sortFeatures,h,l,g):"split"==d?j=q.applyCommand(p.splitLayer,h,g.field,g):"split-on-grid"==d?j=q.applyCommand(p.splitLayerOnGrid,h,l,g.rows,g.cols):"subdivide"==d?j=q.applyCommand(p.subdivideLayer,h,l,g.expression):"svg-style"==d?q.applyCommand(p.svgStyle,h,b,g):"uniq"==d?q.applyCommand(p.uniq,h,l,g):e("Unhandled command: ["+d+"]")}"name"in g&&(j||h||b.layers).forEach(function(a){a.name=g.name}),j&&(g.no_replace?b.layers=b.layers.concat(j):q.replaceLayers(b,h,j))}catch(a){return void m(a)}m(null)},q.applyCommand=function(a,b){var c=f.toArray(arguments).slice(2);return b.reduce(function(b,d){var e=a.apply(null,[d].concat(c));return f.isArray(e)?b=b.concat(e):e&&b.push(e),b},[])},q.getFormattedLayerList=function(a){return a.reduce(function(a,b,c){return a+"\n  ["+c+"]  "+(b.name||"[unnamed]")},"")||"[none]"},q.cleanArgv=function(a){return a=a.map(function(a){return a.trim()}),a=a.filter(function(a){return""!==a}),a=a.map(f.trimQuotes)},q.splitShellTokens=function(a){var b="([^\\s'\"])+",c='"((\\\\"|[^"])*?)"',d="'((\\\\'|[^'])*?)'",e=new RegExp("("+b+"|"+c+"|"+d+")*","g"),g=a.match(e)||[],h=g.filter(function(a){return!!a&&"\\"!=a}).map(f.trimQuotes);return h},f.trimQuotes=function(a){var c,d,b=a.length;return b>=2&&(c=a.charAt(0),d=a.charAt(b-1),'"'==c&&'"'==d||"'"==c&&"'"==d)?a.substr(1,b-2):a},q.getOptionParser=function(){var a={describe:"layer(s) to target (comma-sep. list); default is all layers"},b={describe:"rename the edited layer(s)"},c={alias:"+",type:"flag",describe:"retain the original layer(s) instead of replacing"},d={describe:"text encoding (applies to .dbf and delimited text files)"},f={alias:"snap",describe:"snap nearly identical points to fix minor topology errors",type:"flag"},g={describe:"specify snapping distance in source units",type:"number"},h={describe:"fields to sum when dissolving  (comma-sep. list)",type:"comma-sep"},i={describe:"fields to copy when dissolving (comma-sep. list)",type:"comma-sep"},j={label:"<field>",describe:"(optional) name of a data field to dissolve on"},k={type:"comma-sep",describe:"comma-sep. bounding box: xmin,ymin,xmax,ymax"},l=new jb;return l.usage("Usage:  mapshaper -<command> [options] ..."),l.note("Enter mapshaper -help <command> to view options for a single command"),l.default("i"),l.command("i").title("I/O commands").describe("input one or more files").validate(mb).option("files",{label:"<file(s)>",describe:"files to import (separated by spaces), or - to use stdin"}).option("merge-files",{describe:"merge features from compatible files into the same layer",type:"flag"}).option("combine-files",{describe:"import files to separate layers with shared topology",type:"flag"}).option("no-topology",{describe:"treat each shape as topologically independent",type:"flag"}).option("precision",{describe:"coordinate precision in source units, e.g. 0.001",type:"number"}).option("auto-snap",f).option("snap-interval",g).option("encoding",d).option("id-field",{describe:"import Topo/GeoJSON id property to this field"}).option("field-types",{describe:"type hints for csv files, e.g. FIPS:str,STATE_FIPS:str",type:"comma-sep"}).option("name",{describe:"Rename the imported layer(s)"}),l.command("o").describe("output edited content").validate(Ab).option("_",{label:"<file|dir|->",describe:"(optional) name of output file or directory, or - for stdout"}).option("format",{describe:"options: shapefile,geojson,topojson,json,dbf,csv,tsv,svg"}).option("target",a).option("force",{type:"flag",describe:"let output files overwrite existing files"}).option("dry-run",{type:"flag"}).option("encoding",{describe:"text encoding of output dbf file"}).option("ldid",{type:"number"}).option("bbox-index",{describe:"export a .json file with bbox of each layer",type:"flag"}).option("cut-table",{describe:"detach data attributes from shapes and save as a JSON file",type:"flag"}).option("drop-table",{describe:"remove data attributes from output",type:"flag"}).option("precision",{describe:"coordinate precision in source units, e.g. 0.001",type:"number"}).option("bbox",{type:"flag",describe:"(Topo/GeoJSON) add bbox property"}).option("prettify",{type:"flag",describe:"(Topo/GeoJSON) format output for readability"}).option("id-field",{describe:"(Topo/GeoJSON/SVG) field to use for id property",type:"comma-sep"}).option("quantization",{describe:"(TopoJSON) specify quantization (auto-set by default)",type:"integer"}).option("no-quantization",{describe:"(TopoJSON) export arc coordinates without quantization",type:"flag"}).option("presimplify",{describe:"(TopoJSON) add per-vertex data for dynamic simplification",type:"flag"}).option("topojson-precision",{type:"number"}).option("width",{describe:"(SVG) width of the SVG viewport (default is 800)",type:"number"}).option("margin",{describe:"(SVG) margin between data and viewport bounds (default is 1)",type:"number"}).option("svg-scale",{type:"number"}).option("delimiter",{describe:"(CSV) field delimiter"}),l.command("clip").title("\nEditing commands").describe("use a polygon layer to clip another layer").example("$ mapshaper states.shp -clip land_area.shp -o clipped.shp").validate(qb).option("source",{label:"<file|layer>",describe:"file or layer containing clip polygons"}).option("remove-slivers",{describe:"remove sliver polygons created by clipping",type:"flag"}).option("cleanup",{type:"flag"}).option("bbox",k).option("name",b).option("no-replace",c).option("target",a),l.command("dissolve").validate(rb).describe("merge polygon or point features").example("Dissolve all polygons in a feature layer into a single polygon\n$ mapshaper states.shp -dissolve -o country.shp").example("Generate state-level polygons by dissolving a layer of counties\n(STATE_FIPS, POPULATION and STATE_NAME are attribute field names)\n$ mapshaper counties.shp -dissolve STATE_FIPS copy-fields=STATE_NAME sum-fields=POPULATION -o states.shp").option("field",j).option("sum-fields",h).option("copy-fields",i).option("weight",{describe:"[points] field or expression to use for weighting centroid"}).option("planar",{type:"flag",describe:"[points] use 2D math to find centroids of latlong points"}).option("name",b).option("no-replace",c).option("target",a),l.command("dissolve2").validate(rb).describe("merge adjacent and overlapping polygons").option("field",j).option("sum-fields",h).option("copy-fields",i).option("name",b).option("no-replace",c).option("target",a),l.command("each").describe("create/update/delete data fields using a JS expression").example("Add two calculated data fields to a layer of U.S. counties\n$ mapshaper counties.shp -each 'STATE_FIPS=CNTY_FIPS.substr(0, 2), AREA=$.area'").validate(zb).option("expression",{label:"<expression>",describe:"JS expression to apply to each target feature"}).option("where",{describe:"use a JS expression to select a subset of features"}).option("target",a),l.command("erase").describe("use a polygon layer to erase another layer").example("$ mapshaper land_areas.shp -erase water_bodies.shp -o erased.shp").validate(qb).option("source",{label:"<file|layer>",describe:"file or layer containing erase polygons"}).option("remove-slivers",{describe:"remove sliver polygons created by erasing",type:"flag"}).option("cleanup",{type:"flag"}).option("bbox",k).option("name",b).option("no-replace",c).option("target",a),l.command("explode").describe("divide multi-part features into single-part features").option("convert-holes",{type:"flag"}).option("target",a),l.command("filter").describe("delete features using a JS expression").validate(zb).option("expression",{label:"<expression>",describe:"delete features that evaluate to false"}).option("remove-empty",{type:"flag",describe:"delete features with null geometry"}).option("keep-shapes",{type:"flag"}).option("name",b).option("no-replace",c).option("target",a),l.command("filter-fields").describe("retain a subset of data fields").validate(yb).option("fields",{label:"<field(s)>",describe:"fields to retain (comma-sep.), e.g. 'fips,name'"}).option("target",a),l.command("filter-islands").describe("remove small detached polygon rings (islands)").validate(zb).option("min-area",{type:"number",describe:"remove small-area islands (sq meters or projected units)"}).option("min-vertices",{type:"integer",describe:"remove low-vertex-count islands"}).option("remove-empty",{type:"flag",describe:"delete features with null geometry"}).option("target",a),l.command("filter-slivers").describe("remove small polygon rings").validate(zb).option("min-area",{type:"number",describe:"remove small-area rings (sq meters or projected units)"}).option("target",a),l.command("flatten").option("target",a),l.command("graticule").describe("create a graticule layer"),l.command("innerlines").describe("convert polygons to polylines along shared edges").validate(wb).option("name",b).option("no-replace",c).option("target",a),l.command("join").describe("join data records from a file or layer to a layer").example("Join a csv table to a Shapefile\n(The :str suffix prevents FIPS field from being converted from strings to numbers)\n$ mapshaper states.shp -join data.csv keys=STATE_FIPS,FIPS -field-types=FIPS:str -o joined.shp").validate(ob).option("source",{label:"<file>",describe:"file containing data records"}).option("keys",{describe:"join by matching target,source key fields; e.g. keys=FIPS,GEOID",
type:"comma-sep"}).option("fields",{describe:"fields to join, e.g. fields=FIPS,POP (default is all fields)",type:"comma-sep"}).option("field-types",{describe:"type hints for importing csv files, e.g. FIPS:str,STATE_FIPS:str",type:"comma-sep"}).option("sum-fields",{describe:"fields to sum when multiple source records match the same target",type:"comma-sep"}).option("where",{describe:"use a JS expression to filter source records"}).option("force",{describe:"replace values from same-named fields",type:"flag"}).option("unjoined",{describe:'copy unjoined records from source table to "unjoined" layer',type:"flag"}).option("unmatched",{describe:'copy unmatched records in target table to "unmatched" layer',type:"flag"}).option("encoding",d).option("target",a),l.command("lines").describe("convert polygons to polylines, classified by edge type").validate(vb).option("fields",{label:"<field(s)>",describe:"optional comma-sep. list of fields to create a hierarchy",type:"comma-sep"}).option("name",b).option("no-replace",c).option("target",a),l.command("merge-layers").describe("merge multiple layers into as few layers as possible").validate(sb).option("name",b).option("target",a),l.command("points").describe("create a point layer from polygons or attribute data").validate(function(a){a._.length>0&&e("Unknown argument:",a._[0])}).option("x",{describe:"field containing x coordinate"}).option("y",{describe:"field containing y coordinate"}).option("inner",{describe:"create an interior point for each polygon's largest ring",type:"flag"}).option("centroid",{describe:"create a centroid point for each polygon's largest ring",type:"flag"}).option("name",b).option("no-replace",c).option("target",a),l.command("proj").describe("project a dataset using a proj4 string or alias").option("densify",{type:"flag",describe:"add points along straight segments to approximate curves"}).option("from",{describe:"define the source projection"}).validate(function(a){var b=a._,c=[];b=b.filter(function(a){return!/^\+[a-z]/i.test(a)||(c.push(a),!1)}),c.length>0?a.options.projection=c.join(" "):b.length>0&&(a.options.projection=b.shift()),b.length>0&&e("Received one or more unknown projection parameters"),a.options.projection||e("Missing projection data")}),l.command("rename-fields").describe("rename data fields").validate(yb).option("fields",{label:"<field(s)>",describe:"fields to rename (comma-sep.), e.g. 'fips=STATE_FIPS,st=state'"}).option("target",a),l.command("rename-layers").describe("assign new names to layers").validate(tb).option("names",{label:"<name(s)>",type:"comma-sep",describe:"new layer name(s) (comma-sep. list)"}).option("target",a),l.command("simplify").validate(nb).example("Retain 10% of removable vertices\n$ mapshaper input.shp -simplify 10%").describe("simplify the geometry of polygon and polyline features").option("pct",{alias:"p",label:"<x%>",describe:"percentage of removable points to retain, e.g. 10%"}).option("dp",{alias:"rdp",describe:"use Ramer-Douglas-Peucker simplification",assign_to:"method"}).option("visvalingam",{describe:'use Visvalingam simplification with "effective area" metric',assign_to:"method"}).option("weighted",{describe:"use weighted Visvalingam simplification (default)",assign_to:"method"}).option("method",{}).option("weighting",{type:"number",describe:"weighted Visvalingam coefficient (default is 0.7)"}).option("resolution",{describe:"output resolution as a grid (e.g. 1000x500)"}).option("interval",{describe:"output resolution as a distance (e.g. 100)",type:"number"}).option("planar",{describe:"simplify decimal degree coords in 2D space (default is 3D)",type:"flag"}).option("cartesian",{describe:"(deprecated) alias for planar",type:"flag",alias_to:"planar"}).option("keep-shapes",{describe:"prevent small polygon features from disappearing",type:"flag"}).option("no-repair",{describe:"don't remove intersections introduced by simplification",type:"flag"}).option("stats",{describe:"display simplification statistics",type:"flag"}),l.command("sort").describe("sort features using a JS expression").validate(zb).option("expression",{label:"<expression>",describe:"JS expression to generate a sort key for each feature"}).option("ascending",{describe:"Sort in ascending order (default)",type:"flag"}).option("descending",{describe:"Sort in descending order",type:"flag"}).option("target",a),l.command("split").describe("split features into separate layers using a data field").validate(pb).option("field",{label:"<field>",describe:"name of an attribute field (omit to split all features)"}).option("no-replace",c).option("target",a),l.command("split-on-grid").describe("split features into separate layers using a grid").validate(ub).option("-",{label:"<cols,rows>",describe:"size of the grid, e.g. -split-on-grid 12,10"}).option("cols",{type:"integer"}).option("rows",{type:"integer"}).option("target",a),l.command("subdivide").describe("recursively split a layer using a JS expression").validate(xb).option("expression",{label:"<expression>",describe:"boolean JS expression"}).option("target",a),l.command("svg-style").describe("set SVG style using JS expressions or literal values").option("class",{describe:"name of CSS class or classes (space sep.)"}).option("fill",{describe:"fill color, examples: #eee pink rgba(0, 0, 0, 0.2)"}).option("stroke",{describe:"stroke color"}).option("stroke-width",{describe:"stroke width"}).option("opacity",{describe:"opacity, example: 0.5"}).option("r",{describe:"radius of circle symbols"}).option("target",a),l.command("uniq").describe("delete features with the same id as a previous feature").validate(zb).option("expression",{label:"<expression>",describe:"JS expression to obtain the id of a feature"}).option("target",a),l.command("calc").title("\nInformational commands").describe("calculate statistics about the features in a layer").example("Calculate the total area of a polygon layer\n$ mapshaper polygons.shp -calc 'sum($.area)'").example("Count census blocks in NY with zero population\n$ mapshaper ny-census-blocks.shp -calc 'count()' where='POPULATION == 0'").validate(function(a){0===a._.length&&e("Missing a JS expression"),zb(a)}).option("expression",{label:"<expression>",describe:"functions: sum() average() median() max() min() count()"}).option("where",{describe:"use a JS expression to select a subset of features"}).option("target",a),l.command("encodings").describe("print list of supported text encodings (for .dbf import)"),l.command("help").alias("h").validate(lb).describe("print help; takes optional command name").option("commands",{label:"<command>",type:"comma-sep",describe:"view detailed information about a command"}),l.command("info").describe("print information about data layers"),l.command("inspect").describe("print information about a feature").option("expression",{label:"<expression>",describe:"boolean JS expression for selecting a feature"}).option("target",a).validate(function(a){a._.length>0&&(a.options.expression=a._[0])}),l.command("projections").describe("print list of supported projections"),l.command("version").alias("v").describe("print mapshaper version"),l.command("verbose").describe("print verbose processing messages"),l.command("tracing"),l},q.parseCommands=function(a){return f.isString(a)&&(a=q.splitShellTokens(a)),q.getOptionParser().parseArgv(a)},q.parseConsoleCommands=function(a){var c,b=a.replace(/^mapshaper\b/,"").trim();return/^[a-z]/.test(b)&&(b="-"+b),f.contains(q.splitShellTokens(b),"-i")&&r("The input command cannot be run in the browser"),c=q.parseCommands(b),c.length>0&&"i"==c[0].name&&r(f.format("Unable to run [%s]",a)),c},p.runCommands=function(a,b){var c;try{c=q.parseCommands(a)}catch(a){return b(a)}return 0===c.length?b(new s("No commands to run")):(i.start("Start timing"),void q.runParsedCommands(c,function(a,c){i.stop("Total time"),b(a,c)}))},p.applyCommands=function(a,b,c){q.processFileContent(a,b,function(a,b){var d=null;a||(d=b.map(function(a){return a.content}),1==d.length&&(d=d[0])),c(a,d)})},q.processFileContent=function(a,b,c){var d,e,f,g;try{e=q.parseCommands(a),e=q.runAndRemoveInfoCommands(e),b&&(g=e[0]&&"i"==e[0].name?e.shift().options:{},d=q.importFileContent(b,null,g)),f=e[e.length-1],f&&"o"==f.name||(f={name:"o",options:{}},e.push(f)),f.options.__nowrite=!0}catch(a){return c(a)}q.runParsedCommands(e,d,c)},q.runParsedCommands=function(a){var c,b=null;return 2==arguments.length?c=arguments[1]:3==arguments.length&&(b=arguments[1],c=arguments[2]),f.isFunction(c)||e("[runParsedCommands()] Missing a callback function"),f.isArray(a)||e("[runParsedCommands()] Expected an array of parsed commands"),a=q.runAndRemoveInfoCommands(a),0===a.length?c(null,b):(a=q.divideImportCommand(a),void f.reduceAsync(a,b,function(a,b,c){p.runCommand(b,a,c)},c))},q.divideImportCommand=function(a){var b=a[0],c=b.options,d=c.files||[];return"i"!=b.name||d.length<=1||c.stdin||c.merge_files||c.combine_files?a:d.reduce(function(b,d){var e={name:"i",options:f.defaults({files:[d]},c)};return b.push(e),b.push.apply(b,a.slice(1)),b},[])},f.reduceAsync=function(a,b,c,d){function g(b,h){return b?d(b,null):void e(function(){f<a.length==!1?d(null,h):c(h,a[f++],g)},0)}var e="undefined"==typeof setImmediate?setTimeout:setImmediate,f=0;g(null,b)},q.runAndRemoveInfoCommands=function(a){return a.filter(function(a){if("version"==a.name)t(q.VERSION);else if("encodings"==a.name)q.printEncodings();else if("projections"==a.name)q.printProjections();else if("help"==a.name)q.getOptionParser().printHelp(a.options.commands);else if("verbose"==a.name)q.VERBOSE=!0;else{if("tracing"!=a.name)return!0;q.TRACING=!0}return!1})},p.cli=Va,p.internal=q,p.utils=f,p.geom=la,this.mapshaper=p,f.extend(p.internal,{DataTable:wa,BinArray:n,DouglasPeucker:ib,Visvalingam:hb,Heap:gb,ShpReader:Wa,ShpType:Sa,Dbf:ta,DbfReader:ua,ShapefileTable:Za,ArcCollection:pa,ArcIter:ma,ShapeIter:oa,Bounds:m,Transform:l,NodeCollection:sa,PolygonIndex:qa,PathIndex:ra,topojson:Ra,geojson:Ia,svg:$a,APIError:s}),"function"==typeof define&&define.amd?define("mapshaper",p):"object"==typeof b&&b.exports&&(b.exports=p)}()}).call(this,a("buffer").Buffer)},{buffer:6,"d3-dsv":31,fs:2,"iconv-lite":51,mproj:53,path:13,rbush:54,rw:55}],31:[function(a,b,c){!function(a,d){"object"==typeof c&&"undefined"!=typeof b?d(c):"function"==typeof define&&define.amd?define(["exports"],d):d(a.d3_dsv=a.d3_dsv||{})}(this,function(a){"use strict";function c(a){return new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}")}function d(a,b){var d=c(a);return function(c,e){return b(d(c),e,a)}}function e(a){var b=Object.create(null),c=[];return a.forEach(function(a){for(var d in a)d in b||c.push(b[d]=d)}),c}function f(a){function g(a,b){var e,f,g=h(a,function(a,g){return e?e(a,g-1):(f=a,void(e=b?d(a,b):c(a)))});return g.columns=f,g}function h(a,b){function l(){if(h>=g)return d;if(k)return k=!1,c;var e,b=h;if(34===a.charCodeAt(b)){for(var i=b;i++<g;)if(34===a.charCodeAt(i)){if(34!==a.charCodeAt(i+1))break;++i}return h=i+2,e=a.charCodeAt(i+1),13===e?(k=!0,10===a.charCodeAt(i+2)&&++h):10===e&&(k=!0),a.slice(b+1,i).replace(/""/g,'"')}for(;h<g;){var j=1;if(e=a.charCodeAt(h++),10===e)k=!0;else if(13===e)k=!0,10===a.charCodeAt(h)&&(++h,++j);else if(e!==f)continue;return a.slice(b,h-j)}return a.slice(b)}for(var j,k,c={},d={},e=[],g=a.length,h=0,i=0;(j=l())!==d;){for(var m=[];j!==c&&j!==d;)m.push(j),j=l();b&&null==(m=b(m,i++))||e.push(m)}return e}function i(b,c){return null==c&&(c=e(b)),[c.map(l).join(a)].concat(b.map(function(b){return c.map(function(a){return l(b[a])}).join(a)})).join("\n")}function j(a){return a.map(k).join("\n")}function k(b){return b.map(l).join(a)}function l(a){return null==a?"":b.test(a+="")?'"'+a.replace(/\"/g,'""')+'"':a}var b=new RegExp('["'+a+"\n]"),f=a.charCodeAt(0);return{parse:g,parseRows:h,format:i,formatRows:j}}var b="0.3.2",g=f(","),h=g.parse,i=g.parseRows,j=g.format,k=g.formatRows,l=f("\t"),m=l.parse,n=l.parseRows,o=l.format,p=l.formatRows;a.version=b,a.dsvFormat=f,a.csvParse=h,a.csvParseRows=i,a.csvFormat=j,a.csvFormatRows=k,a.tsvParse=m,a.tsvParseRows=n,a.tsvFormat=o,a.tsvFormatRows=p})},{}],32:[function(a,b,c){(function(a){"use strict";function j(a,c){if(this.encodingName=a.encodingName,!a)throw new Error("DBCS codec is called without the data.");if(!a.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var e=a.table();this.decodeTables=[],this.decodeTables[0]=g.slice(0),this.decodeTableSeq=[];for(var h=0;h<e.length;h++)this._addDecodeChunk(e[h]);this.defaultCharUnicode=c.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var i={};if(a.encodeSkipVals)for(var h=0;h<a.encodeSkipVals.length;h++){var j=a.encodeSkipVals[h];if("number"==typeof j)i[j]=!0;else for(var k=j.from;k<=j.to;k++)i[k]=!0}if(this._fillEncodeTable(0,0,i),a.encodeAdd)for(var l in a.encodeAdd)Object.prototype.hasOwnProperty.call(a.encodeAdd,l)&&this._setEncodeChar(l.charCodeAt(0),a.encodeAdd[l]);if(this.defCharSB=this.encodeTable[0][c.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===b&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===b&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof a.gb18030){this.gb18030=a.gb18030();for(var m=this.decodeTables.length,n=this.decodeTables[m]=g.slice(0),o=this.decodeTables.length,p=this.decodeTables[o]=g.slice(0),h=129;h<=254;h++)for(var q=f-this.decodeTables[0][h],r=this.decodeTables[q],k=48;k<=57;k++)r[k]=f-m;for(var h=129;h<=254;h++)n[h]=f-o;for(var h=48;h<=57;h++)p[h]=d}}function k(a,b){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=b.encodeTable,this.encodeTableSeq=b.encodeTableSeq,this.defaultCharSingleByte=b.defCharSB,this.gb18030=b.gb18030}function l(b,c){this.nodeIdx=0,this.prevBuf=new a(0),this.decodeTables=c.decodeTables,this.decodeTableSeq=c.decodeTableSeq,this.defaultCharUnicode=c.defaultCharUnicode,this.gb18030=c.gb18030}function m(a,b){if(a[0]>b)return-1;for(var c=0,d=a.length;c<d-1;){var e=c+Math.floor((d-c+1)/2);a[e]<=b?c=e:d=e}return c}c._dbcs=j;for(var b=-1,d=-2,e=-10,f=-1e3,g=new Array(256),h=-1,i=0;i<256;i++)g[i]=b;j.prototype.encoder=k,j.prototype.decoder=l,j.prototype._getDecodeTrieNode=function(a){for(var c=[];a>0;a>>=8)c.push(255&a);0==c.length&&c.push(0);for(var d=this.decodeTables[0],e=c.length-1;e>0;e--){var h=d[c[e]];if(h==b)d[c[e]]=f-this.decodeTables.length,this.decodeTables.push(d=g.slice(0));else{if(!(h<=f))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+a.toString(16));d=this.decodeTables[f-h]}}return d},j.prototype._addDecodeChunk=function(a){var b=parseInt(a[0],16),c=this._getDecodeTrieNode(b);b=255&b;for(var d=1;d<a.length;d++){var f=a[d];if("string"==typeof f)for(var g=0;g<f.length;){var h=f.charCodeAt(g++);if(55296<=h&&h<56320){var i=f.charCodeAt(g++);if(!(56320<=i&&i<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+a[0]);c[b++]=65536+1024*(h-55296)+(i-56320)}else if(4080<h&&h<=4095){for(var j=4095-h+2,k=[],l=0;l<j;l++)k.push(f.charCodeAt(g++));c[b++]=e-this.decodeTableSeq.length,this.decodeTableSeq.push(k)}else c[b++]=h}else{if("number"!=typeof f)throw new Error("Incorrect type '"+typeof f+"' given in "+this.encodingName+" at chunk "+a[0]);for(var m=c[b-1]+1,g=0;g<f;g++)c[b++]=m++}}if(b>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+a[0]+": too long"+b)},j.prototype._getEncodeBucket=function(a){var b=a>>8;return void 0===this.encodeTable[b]&&(this.encodeTable[b]=g.slice(0)),this.encodeTable[b]},j.prototype._setEncodeChar=function(a,c){var d=this._getEncodeBucket(a),f=255&a;d[f]<=e?this.encodeTableSeq[e-d[f]][h]=c:d[f]==b&&(d[f]=c)},j.prototype._setEncodeSequence=function(a,c){var i,d=a[0],f=this._getEncodeBucket(d),g=255&d;f[g]<=e?i=this.encodeTableSeq[e-f[g]]:(i={},f[g]!==b&&(i[h]=f[g]),f[g]=e-this.encodeTableSeq.length,this.encodeTableSeq.push(i));for(var j=1;j<a.length-1;j++){var k=i[d];"object"==typeof k?i=k:(i=i[d]={},void 0!==k&&(i[h]=k))}d=a[a.length-1],i[d]=c},j.prototype._fillEncodeTable=function(a,b,c){for(var d=this.decodeTables[a],g=0;g<256;g++){var h=d[g],i=b+g;c[i]||(h>=0?this._setEncodeChar(h,i):h<=f?this._fillEncodeTable(f-h,i<<8,c):h<=e&&this._setEncodeSequence(this.decodeTableSeq[e-h],i))}},k.prototype.write=function(c){for(var d=new a(c.length*(this.gb18030?4:3)),f=this.leadSurrogate,g=this.seqObj,i=-1,j=0,k=0;;){if(i===-1){if(j==c.length)break;var l=c.charCodeAt(j++)}else{var l=i;i=-1}if(55296<=l&&l<57344)if(l<56320){if(f===-1){f=l;continue}f=l,l=b}else f!==-1?(l=65536+1024*(f-55296)+(l-56320),f=-1):l=b;else f!==-1&&(i=l,l=b,f=-1);var n=b;if(void 0!==g&&l!=b){var o=g[l];if("object"==typeof o){g=o;continue}"number"==typeof o?n=o:void 0==o&&(o=g[h],void 0!==o&&(n=o,i=l)),g=void 0}else if(l>=0){var p=this.encodeTable[l>>8];if(void 0!==p&&(n=p[255&l]),n<=e){g=this.encodeTableSeq[e-n];continue}if(n==b&&this.gb18030){var q=m(this.gb18030.uChars,l);if(q!=-1){var n=this.gb18030.gbChars[q]+(l-this.gb18030.uChars[q]);d[k++]=129+Math.floor(n/12600),n%=12600,d[k++]=48+Math.floor(n/1260),n%=1260,d[k++]=129+Math.floor(n/10),n%=10,d[k++]=48+n;continue}}}n===b&&(n=this.defaultCharSingleByte),n<256?d[k++]=n:n<65536?(d[k++]=n>>8,d[k++]=255&n):(d[k++]=n>>16,d[k++]=n>>8&255,d[k++]=255&n)}return this.seqObj=g,this.leadSurrogate=f,d.slice(0,k)},k.prototype.end=function(){if(this.leadSurrogate!==-1||void 0!==this.seqObj){var b=new a(10),c=0;if(this.seqObj){var d=this.seqObj[h];void 0!==d&&(d<256?b[c++]=d:(b[c++]=d>>8,b[c++]=255&d)),this.seqObj=void 0}return this.leadSurrogate!==-1&&(b[c++]=this.defaultCharSingleByte,this.leadSurrogate=-1),b.slice(0,c)}},k.prototype.findIdx=m,l.prototype.write=function(c){var l,g=new a(2*c.length),h=this.nodeIdx,i=this.prevBuf,j=this.prevBuf.length,k=-this.prevBuf.length;j>0&&(i=a.concat([i,c.slice(0,10)]));for(var n=0,o=0;n<c.length;n++){var p=n>=0?c[n]:i[n+j],l=this.decodeTables[h][p];if(l>=0);else if(l===b)n=k,l=this.defaultCharUnicode.charCodeAt(0);else if(l===d){var q=k>=0?c.slice(k,n+1):i.slice(k+j,n+1+j),r=12600*(q[0]-129)+1260*(q[1]-48)+10*(q[2]-129)+(q[3]-48),s=m(this.gb18030.gbChars,r);l=this.gb18030.uChars[s]+r-this.gb18030.gbChars[s]}else{if(l<=f){h=f-l;continue}if(!(l<=e))throw new Error("iconv-lite internal error: invalid decoding table value "+l+" at "+h+"/"+p);for(var t=this.decodeTableSeq[e-l],u=0;u<t.length-1;u++)l=t[u],g[o++]=255&l,g[o++]=l>>8;l=t[t.length-1]}if(l>65535){l-=65536;var v=55296+Math.floor(l/1024);g[o++]=255&v,g[o++]=v>>8,l=56320+l%1024}g[o++]=255&l,g[o++]=l>>8,h=0,k=n+1}return this.nodeIdx=h,this.prevBuf=k>=0?c.slice(k):i.slice(k+j),g.slice(0,o).toString("ucs2")},l.prototype.end=function(){for(var b="";this.prevBuf.length>0;){b+=this.defaultCharUnicode;var c=this.prevBuf.slice(1);this.prevBuf=new a(0),this.nodeIdx=0,c.length>0&&(b+=this.write(c))}return this.nodeIdx=0,b}}).call(this,a("buffer").Buffer)},{buffer:6}],33:[function(a,b,c){"use strict";b.exports={shiftjis:{type:"_dbcs",table:function(){return a("./tables/shiftjis.json")},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return a("./tables/eucjp.json")},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",isoir58:"gbk",windows936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return a("./tables/cp936.json")}},gbk:{type:"_dbcs",table:function(){return a("./tables/cp936.json").concat(a("./tables/gbk-added.json"))}},xgbk:"gbk",gb18030:{type:"_dbcs",table:function(){return a("./tables/cp936.json").concat(a("./tables/gbk-added.json"))},gb18030:function(){return a("./tables/gb18030-ranges.json")}},chinese:"gb18030",windows949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return a("./tables/cp949.json")}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return a("./tables/cp950.json")}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return a("./tables/cp950.json").concat(a("./tables/big5-added.json"))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},{"./tables/big5-added.json":39,"./tables/cp936.json":40,"./tables/cp949.json":41,"./tables/cp950.json":42,"./tables/eucjp.json":43,"./tables/gb18030-ranges.json":44,"./tables/gbk-added.json":45,"./tables/shiftjis.json":46}],34:[function(a,b,c){"use strict";for(var d=[a("./internal"),a("./utf16"),a("./utf7"),a("./sbcs-codec"),a("./sbcs-data"),a("./sbcs-data-generated"),a("./dbcs-codec"),a("./dbcs-data")],e=0;e<d.length;e++){var b=d[e];for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(c[f]=b[f])}},{"./dbcs-codec":32,"./dbcs-data":33,"./internal":35,"./sbcs-codec":36,"./sbcs-data":38,"./sbcs-data-generated":37,"./utf16":47,"./utf7":48}],35:[function(a,b,c){(function(c){"use strict";function d(a,b){this.enc=a.encodingName,this.bomAware=a.bomAware,"base64"===this.enc?this.encoder=h:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=i,3==new c("eda080","hex").toString().length&&(this.decoder=j,this.defaultCharUnicode=b.defaultCharUnicode))}function f(a,b){e.call(this,b.enc)}function g(a,b){this.enc=b.enc}function h(a,b){this.prevStr=""}function i(a,b){}function j(a,b){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=b.defaultCharUnicode}b.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:d},d.prototype.encoder=g,d.prototype.decoder=f;var e=a("string_decoder").StringDecoder;e.prototype.end||(e.prototype.end=function(){}),f.prototype=e.prototype,g.prototype.write=function(a){return new c(a,this.enc)},g.prototype.end=function(){},h.prototype.write=function(a){a=this.prevStr+a;var b=a.length-a.length%4;return this.prevStr=a.slice(b),a=a.slice(0,b),new c(a,"base64")},h.prototype.end=function(){return new c(this.prevStr,"base64")},i.prototype.write=function(a){for(var b=new c(3*a.length),d=0,e=0;e<a.length;e++){var f=a.charCodeAt(e);f<128?b[d++]=f:f<2048?(b[d++]=192+(f>>>6),b[d++]=128+(63&f)):(b[d++]=224+(f>>>12),b[d++]=128+(f>>>6&63),b[d++]=128+(63&f))}return b.slice(0,d)},i.prototype.end=function(){},j.prototype.write=function(a){for(var b=this.acc,c=this.contBytes,d=this.accBytes,e="",f=0;f<a.length;f++){var g=a[f];128!==(192&g)?(c>0&&(e+=this.defaultCharUnicode,c=0),g<128?e+=String.fromCharCode(g):g<224?(b=31&g,c=1,d=1):g<240?(b=15&g,c=2,d=1):e+=this.defaultCharUnicode):c>0?(b=b<<6|63&g,c--,d++,0===c&&(e+=2===d&&b<128&&b>0?this.defaultCharUnicode:3===d&&b<2048?this.defaultCharUnicode:String.fromCharCode(b))):e+=this.defaultCharUnicode}return this.acc=b,this.contBytes=c,this.accBytes=d,e},j.prototype.end=function(){var a=0;return this.contBytes>0&&(a+=this.defaultCharUnicode),a}}).call(this,a("buffer").Buffer)},{buffer:6,string_decoder:28}],36:[function(a,b,c){(function(a){"use strict";function b(b,c){if(!b)throw new Error("SBCS codec is called without the data.");if(!b.chars||128!==b.chars.length&&256!==b.chars.length)throw new Error("Encoding '"+b.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===b.chars.length){for(var d="",e=0;e<128;e++)d+=String.fromCharCode(e);b.chars=d+b.chars}this.decodeBuf=new a(b.chars,"ucs2");var f=new a(65536);f.fill(c.defaultCharSingleByte.charCodeAt(0));for(var e=0;e<b.chars.length;e++)f[b.chars.charCodeAt(e)]=e;this.encodeBuf=f}function d(a,b){this.encodeBuf=b.encodeBuf}function e(a,b){this.decodeBuf=b.decodeBuf}c._sbcs=b,b.prototype.encoder=d,b.prototype.decoder=e,d.prototype.write=function(b){for(var c=new a(b.length),d=0;d<b.length;d++)c[d]=this.encodeBuf[b.charCodeAt(d)];return c},d.prototype.end=function(){},e.prototype.write=function(b){for(var c=this.decodeBuf,d=new a(2*b.length),e=0,f=0,g=0;g<b.length;g++)e=2*b[g],f=2*g,d[f]=c[e],d[f+1]=c[e+1];return d.toString("ucs2")},e.prototype.end=function(){}}).call(this,a("buffer").Buffer)},{buffer:6}],37:[function(a,b,c){"use strict";b.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""
},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},{}],38:[function(a,b,c){"use strict";b.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",10000:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},{}],39:[function(a,b,c){b.exports=[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]},{}],40:[function(a,b,c){b.exports=[["0","\0",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]];
},{}],41:[function(a,b,c){b.exports=[["0","\0",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]},{}],42:[function(a,b,c){b.exports=[["0","\0",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]];
},{}],43:[function(a,b,c){b.exports=[["0","\0",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]},{}],44:[function(a,b,c){b.exports={uChars:[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],gbChars:[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189e3]}},{}],45:[function(a,b,c){b.exports=[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]},{}],46:[function(a,b,c){b.exports=[["0","\0",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]},{}],47:[function(a,b,c){(function(a){"use strict";function b(){}function d(){}function e(){this.overflowByte=-1}function f(a,b){this.iconv=b}function g(a,b){a=a||{},void 0===a.addBOM&&(a.addBOM=!0),this.encoder=b.iconv.getEncoder("utf-16le",a)}function h(a,b){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=a||{},this.iconv=b.iconv}function i(a,b){var c=b||"utf-16le";if(a.length>=2)if(254==a[0]&&255==a[1])c="utf-16be";else if(255==a[0]&&254==a[1])c="utf-16le";else{for(var d=0,e=0,f=Math.min(a.length-a.length%2,64),g=0;g<f;g+=2)0===a[g]&&0!==a[g+1]&&e++,0!==a[g]&&0===a[g+1]&&d++;e>d?c="utf-16be":e<d&&(c="utf-16le")}return c}c.utf16be=b,b.prototype.encoder=d,b.prototype.decoder=e,b.prototype.bomAware=!0,d.prototype.write=function(b){for(var c=new a(b,"ucs2"),d=0;d<c.length;d+=2){var e=c[d];c[d]=c[d+1],c[d+1]=e}return c},d.prototype.end=function(){},e.prototype.write=function(b){if(0==b.length)return"";var c=new a(b.length+1),d=0,e=0;for(this.overflowByte!==-1&&(c[0]=b[0],c[1]=this.overflowByte,d=1,e=2);d<b.length-1;d+=2,e+=2)c[e]=b[d+1],c[e+1]=b[d];return this.overflowByte=d==b.length-1?b[b.length-1]:-1,c.slice(0,e).toString("ucs2")},e.prototype.end=function(){},c.utf16=f,f.prototype.encoder=g,f.prototype.decoder=h,g.prototype.write=function(a){return this.encoder.write(a)},g.prototype.end=function(){return this.encoder.end()},h.prototype.write=function(b){if(!this.decoder){if(this.initialBytes.push(b),this.initialBytesLen+=b.length,this.initialBytesLen<16)return"";var b=a.concat(this.initialBytes),c=i(b,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(c,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(b)},h.prototype.end=function(){if(!this.decoder){var b=a.concat(this.initialBytes),c=i(b,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(c,this.options);var d=this.decoder.write(b),e=this.decoder.end();return e?d+e:d}return this.decoder.end()}}).call(this,a("buffer").Buffer)},{buffer:6}],48:[function(a,b,c){(function(a){"use strict";function b(a,b){this.iconv=b}function e(a,b){this.iconv=b.iconv}function f(a,b){this.iconv=b.iconv,this.inBase64=!1,this.base64Accum=""}function m(a,b){this.iconv=b}function n(b,c){this.iconv=c.iconv,this.inBase64=!1,this.base64Accum=new a(6),this.base64AccumIdx=0}function o(a,b){this.iconv=b.iconv,this.inBase64=!1,this.base64Accum=""}c.utf7=b,c.unicode11utf7="utf7",b.prototype.encoder=e,b.prototype.decoder=f,b.prototype.bomAware=!0;var d=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;e.prototype.write=function(b){return new a(b.replace(d,function(a){return"+"+("+"===a?"":this.iconv.encode(a,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},e.prototype.end=function(){};for(var g=/[A-Za-z0-9\/+]/,h=[],i=0;i<256;i++)h[i]=g.test(String.fromCharCode(i));var j="+".charCodeAt(0),k="-".charCodeAt(0),l="&".charCodeAt(0);f.prototype.write=function(b){for(var c="",d=0,e=this.inBase64,f=this.base64Accum,g=0;g<b.length;g++)if(e){if(!h[b[g]]){if(g==d&&b[g]==k)c+="+";else{var i=f+b.slice(d,g).toString();c+=this.iconv.decode(new a(i,"base64"),"utf16-be")}b[g]!=k&&g--,d=g+1,e=!1,f=""}}else b[g]==j&&(c+=this.iconv.decode(b.slice(d,g),"ascii"),d=g+1,e=!0);if(e){var i=f+b.slice(d).toString(),l=i.length-i.length%8;f=i.slice(l),i=i.slice(0,l),c+=this.iconv.decode(new a(i,"base64"),"utf16-be")}else c+=this.iconv.decode(b.slice(d),"ascii");return this.inBase64=e,this.base64Accum=f,c},f.prototype.end=function(){var b="";return this.inBase64&&this.base64Accum.length>0&&(b=this.iconv.decode(new a(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",b},c.utf7imap=m,m.prototype.encoder=n,m.prototype.decoder=o,m.prototype.bomAware=!0,n.prototype.write=function(b){for(var c=this.inBase64,d=this.base64Accum,e=this.base64AccumIdx,f=new a(5*b.length+10),g=0,h=0;h<b.length;h++){var i=b.charCodeAt(h);32<=i&&i<=126?(c&&(e>0&&(g+=f.write(d.slice(0,e).toString("base64").replace(/\//g,",").replace(/=+$/,""),g),e=0),f[g++]=k,c=!1),c||(f[g++]=i,i===l&&(f[g++]=k))):(c||(f[g++]=l,c=!0),c&&(d[e++]=i>>8,d[e++]=255&i,e==d.length&&(g+=f.write(d.toString("base64").replace(/\//g,","),g),e=0)))}return this.inBase64=c,this.base64AccumIdx=e,f.slice(0,g)},n.prototype.end=function(){var b=new a(10),c=0;return this.inBase64&&(this.base64AccumIdx>0&&(c+=b.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),c),
this.base64AccumIdx=0),b[c++]=k,this.inBase64=!1),b.slice(0,c)};var p=h.slice();p[",".charCodeAt(0)]=!0,o.prototype.write=function(b){for(var c="",d=0,e=this.inBase64,f=this.base64Accum,g=0;g<b.length;g++)if(e){if(!p[b[g]]){if(g==d&&b[g]==k)c+="&";else{var h=f+b.slice(d,g).toString().replace(/,/g,"/");c+=this.iconv.decode(new a(h,"base64"),"utf16-be")}b[g]!=k&&g--,d=g+1,e=!1,f=""}}else b[g]==l&&(c+=this.iconv.decode(b.slice(d,g),"ascii"),d=g+1,e=!0);if(e){var h=f+b.slice(d).toString().replace(/,/g,"/"),i=h.length-h.length%8;f=h.slice(i),h=h.slice(0,i),c+=this.iconv.decode(new a(h,"base64"),"utf16-be")}else c+=this.iconv.decode(b.slice(d),"ascii");return this.inBase64=e,this.base64Accum=f,c},o.prototype.end=function(){var b="";return this.inBase64&&this.base64Accum.length>0&&(b=this.iconv.decode(new a(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",b}}).call(this,a("buffer").Buffer)},{buffer:6}],49:[function(a,b,c){"use strict";function e(a,b){this.encoder=a,this.addBOM=!0}function f(a,b){this.decoder=a,this.pass=!1,this.options=b||{}}var d="\ufeff";c.PrependBOM=e,e.prototype.write=function(a){return this.addBOM&&(a=d+a,this.addBOM=!1),this.encoder.write(a)},e.prototype.end=function(){return this.encoder.end()},c.StripBOM=f,f.prototype.write=function(a){var b=this.decoder.write(a);return this.pass||!b?b:(b[0]===d&&(b=b.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0,b)},f.prototype.end=function(){return this.decoder.end()}},{}],50:[function(a,b,c){(function(c){"use strict";b.exports=function(b){var d=void 0;b.supportsNodeEncodingsExtension=!(new c(0)instanceof Uint8Array),b.extendNodeEncodings=function(){if(!d){if(d={},!b.supportsNodeEncodingsExtension)return console.error("ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node"),void console.error("See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility");var f={hex:!0,utf8:!0,"utf-8":!0,ascii:!0,binary:!0,base64:!0,ucs2:!0,"ucs-2":!0,utf16le:!0,"utf-16le":!0};c.isNativeEncoding=function(a){return a&&f[a.toLowerCase()]};var g=a("buffer").SlowBuffer;if(d.SlowBufferToString=g.prototype.toString,g.prototype.toString=function(a,e,f){return a=String(a||"utf8").toLowerCase(),c.isNativeEncoding(a)?d.SlowBufferToString.call(this,a,e,f):("undefined"==typeof e&&(e=0),"undefined"==typeof f&&(f=this.length),b.decode(this.slice(e,f),a))},d.SlowBufferWrite=g.prototype.write,g.prototype.write=function(a,e,f,g){if(isFinite(e))isFinite(f)||(g=f,f=void 0);else{var h=g;g=e,e=f,f=h}e=+e||0;var i=this.length-e;if(f?(f=+f,f>i&&(f=i)):f=i,g=String(g||"utf8").toLowerCase(),c.isNativeEncoding(g))return d.SlowBufferWrite.call(this,a,e,f,g);if(a.length>0&&(f<0||e<0))throw new RangeError("attempt to write beyond buffer bounds");var j=b.encode(a,g);return j.length<f&&(f=j.length),j.copy(this,e,0,f),f},d.BufferIsEncoding=c.isEncoding,c.isEncoding=function(a){return c.isNativeEncoding(a)||b.encodingExists(a)},d.BufferByteLength=c.byteLength,c.byteLength=g.byteLength=function(a,e){return e=String(e||"utf8").toLowerCase(),c.isNativeEncoding(e)?d.BufferByteLength.call(this,a,e):b.encode(a,e).length},d.BufferToString=c.prototype.toString,c.prototype.toString=function(a,e,f){return a=String(a||"utf8").toLowerCase(),c.isNativeEncoding(a)?d.BufferToString.call(this,a,e,f):("undefined"==typeof e&&(e=0),"undefined"==typeof f&&(f=this.length),b.decode(this.slice(e,f),a))},d.BufferWrite=c.prototype.write,c.prototype.write=function(a,e,f,g){var h=e,i=f,j=g;if(isFinite(e))isFinite(f)||(g=f,f=void 0);else{var k=g;g=e,e=f,f=k}if(g=String(g||"utf8").toLowerCase(),c.isNativeEncoding(g))return d.BufferWrite.call(this,a,h,i,j);e=+e||0;var l=this.length-e;if(f?(f=+f,f>l&&(f=l)):f=l,a.length>0&&(f<0||e<0))throw new RangeError("attempt to write beyond buffer bounds");var m=b.encode(a,g);return m.length<f&&(f=m.length),m.copy(this,e,0,f),f},b.supportsStreams){var h=a("stream").Readable;d.ReadableSetEncoding=h.prototype.setEncoding,h.prototype.setEncoding=function(c,d){this._readableState.decoder=b.getDecoder(c,d),this._readableState.encoding=c},h.prototype.collect=b._collect}}},b.undoExtendNodeEncodings=function(){if(b.supportsNodeEncodingsExtension){if(!d)throw new Error("require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.");delete c.isNativeEncoding;var f=a("buffer").SlowBuffer;if(f.prototype.toString=d.SlowBufferToString,f.prototype.write=d.SlowBufferWrite,c.isEncoding=d.BufferIsEncoding,c.byteLength=d.BufferByteLength,c.prototype.toString=d.BufferToString,c.prototype.write=d.BufferWrite,b.supportsStreams){var g=a("stream").Readable;g.prototype.setEncoding=d.ReadableSetEncoding,delete g.prototype.collect}d=void 0}}}}).call(this,a("buffer").Buffer)},{buffer:6,stream:27}],51:[function(a,b,c){(function(c,d){"use strict";var e=a("./bom-handling"),f=b.exports;f.encodings=null,f.defaultCharUnicode="",f.defaultCharSingleByte="?",f.encode=function(b,c,e){b=""+(b||"");var g=f.getEncoder(c,e),h=g.write(b),i=g.end();return i&&i.length>0?d.concat([h,i]):h},f.decode=function(b,c,e){"string"==typeof b&&(f.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),f.skipDecodeWarning=!0),b=new d(""+(b||""),"binary"));var g=f.getDecoder(c,e),h=g.write(b),i=g.end();return i?h+i:h},f.encodingExists=function(b){try{return f.getCodec(b),!0}catch(a){return!1}},f.toEncoding=f.encode,f.fromEncoding=f.decode,f._codecDataCache={},f.getCodec=function(c){f.encodings||(f.encodings=a("../encodings"));for(var d=(""+c).toLowerCase().replace(/[^0-9a-z]|:\d{4}$/g,""),e={};;){var g=f._codecDataCache[d];if(g)return g;var h=f.encodings[d];switch(typeof h){case"string":d=h;break;case"object":for(var i in h)e[i]=h[i];e.encodingName||(e.encodingName=d),d=h.type;break;case"function":return e.encodingName||(e.encodingName=d),g=new h(e,f),f._codecDataCache[e.encodingName]=g,g;default:throw new Error("Encoding not recognized: '"+c+"' (searched as: '"+d+"')")}}},f.getEncoder=function(b,c){var d=f.getCodec(b),g=new d.encoder(c,d);return d.bomAware&&c&&c.addBOM&&(g=new e.PrependBOM(g,c)),g},f.getDecoder=function(b,c){var d=f.getCodec(b),g=new d.decoder(c,d);return!d.bomAware||c&&c.stripBOM===!1||(g=new e.StripBOM(g,c)),g};var g="undefined"!=typeof c&&c.versions&&c.versions.node;if(g){var h=g.split(".").map(Number);(h[0]>0||h[1]>=10)&&a("./streams")(f),a("./extend-node")(f)}}).call(this,a("_process"),a("buffer").Buffer)},{"../encodings":34,"./bom-handling":49,"./extend-node":50,"./streams":52,_process:15,buffer:6}],52:[function(a,b,c){(function(c){"use strict";function e(a,b){this.conv=a,b=b||{},b.decodeStrings=!1,d.call(this,b)}function f(a,b){this.conv=a,b=b||{},b.encoding=this.encoding="utf8",d.call(this,b)}var d=a("stream").Transform;b.exports=function(a){a.encodeStream=function(c,d){return new e(a.getEncoder(c,d),d)},a.decodeStream=function(c,d){return new f(a.getDecoder(c,d),d)},a.supportsStreams=!0,a.IconvLiteEncoderStream=e,a.IconvLiteDecoderStream=f,a._collect=f.prototype.collect},e.prototype=Object.create(d.prototype,{constructor:{value:e}}),e.prototype._transform=function(a,b,c){if("string"!=typeof a)return c(new Error("Iconv encoding stream needs strings as its input."));try{var d=this.conv.write(a);d&&d.length&&this.push(d),c()}catch(a){c(a)}},e.prototype._flush=function(a){try{var b=this.conv.end();b&&b.length&&this.push(b),a()}catch(b){a(b)}},e.prototype.collect=function(a){var b=[];return this.on("error",a),this.on("data",function(a){b.push(a)}),this.on("end",function(){a(null,c.concat(b))}),this},f.prototype=Object.create(d.prototype,{constructor:{value:f}}),f.prototype._transform=function(a,b,d){if(!c.isBuffer(a))return d(new Error("Iconv decoding stream needs buffers as its input."));try{var e=this.conv.write(a);e&&e.length&&this.push(e,this.encoding),d()}catch(a){d(a)}},f.prototype._flush=function(a){try{var b=this.conv.end();b&&b.length&&this.push(b,this.encoding),a()}catch(b){a(b)}},f.prototype.collect=function(a){var b="";return this.on("error",a),this.on("data",function(a){b+=a}),this.on("end",function(){a(null,b)}),this}}).call(this,a("buffer").Buffer)},{buffer:6,stream:27}],53:[function(a,b,c){(function(d){!function(){function Y(){var a=W.last_errno;a&&(a>0||!Z(a))&&ea(a)}function Z(a){return $.indexOf(a)>-1}function _(a){W.last_errno=a}function aa(){_(-20)}function ba(){_(-20)}function ca(a){return X[~a]||"unknown error"}function da(a){ea(a)}function ea(a){_(a),fa()}function fa(a,b){throw b||(b={}),b.code||(b.code=W.last_errno||0),a||(a=ca(b.code)),new ga(a,b)}function ga(a,b){var c=new Error(a);return c.name="ProjError",Object.keys(b).forEach(function(a){c[a]=b[a]}),c}function ha(a){return ia(a)*z}function ia(a){var b=/-?[0-9.]+d/i.exec(a),c=/[0-9.]+'/.exec(a),d=/[0-9.]+"/.exec(a),e=/[ws][\s]*$/i.test(a),f=parseFloat(b?b[0]:a);return c&&(f+=parseFloat(c[0])/60),d&&(f+=parseFloat(d[0])/3600),e&&(f=-f),isNaN(f)&&ea(-16),f}function ja(a){return ka(a)}function ka(a){return parseFloat(a)}function la(a,b){var g,h,c=b[0],d=b.substr(1),e=a[d],f=void 0!==e;return"t"==c?g=f:f?(h=e.param,e.used=!0,"i"==c?g=parseInt(h):"d"==c?g=ja(h):"r"==c?g=ha(h):"s"==c?g=String(h):"b"==c&&("T"==h||"t"==h||h===!0?g=!0:"F"==h||"f"==h?g=!1:(_(-8),g=!1))):g={i:0,b:!1,d:0,r:0,s:""}[c],void 0===g&&fa("invalid request to pj_param, fatal"),g}function ma(a){for(var d,b=/\+([a-z][a-z0-9_]*(?:=[^\s]*)?)/gi,c={};d=b.exec(a);)na(c,d[1]);return c}function na(a,b){var d,e,c=b.split("=");1==c.length?(d=b,e=!0):(d=c[0],e=b.substr(c[0].length+1)),a[d]={used:!1,param:e}}function pa(a,b,c,d){oa[b]={init:a,name:c,description:d}}function sa(a){var b="+proj=latlong"+ta(a);return La(b)}function ta(a){var b=!1,c="";return"datum"in a.params?(b=!0,c+=va(a,"datum")):"ellps"in a.params?c+=va(a,"ellps"):"a"in a.params?(c+=va(a,"a"),c+="b"in a.params?va(a,"b"):"es"in a.params?va(a,"es"):"f"in a.params?va(a,"f"):" +es="+a.es):da(-13),b||(c+=va(a,"towgs84"),c+=va(a,"nadgrids")),c+=va(a,"R"),c+=va(a,"R_A"),c+=va(a,"R_V"),c+=va(a,"R_a"),c+=va(a,"R_lat_a"),c+=va(a,"R_lat_g"),c+=va(a,"pm")}function ua(a){var b="datum,ellps,a,b,es,rf,f,towgs84,nadgrids,R,R_A,R_V,R_a,R_lat_a,R_lat_g,pm,init,no_defs".split(","),c="";return Object.keys(a.params).forEach(function(d){b.indexOf(d)==-1&&(c+=va(a,d))}),c+=ta(a),c.trim()}function va(a,b){var c="";return b in a.params&&(c=" +"+b,a.params[b].param!==!0&&(c+="="+la(a.params,"s"+b))),c}function ya(a){var b=xa.reduce(function(b,c){return c[0]===a?c:b},null);return b?{id:b[0],definition:b[1]}:null}function za(a){var b=wa.reduce(function(b,c){return c[0]===a?c:b},null);return b?{id:b[0],defn:b[1],ellipse_id:b[2],comments:b[3]}:null}function Aa(a){var d,e,f,g,h,b=484813681109536e-20,c=a.datum_params=[0,0,0,0,0,0,0];a.datum_type=I,(d=la(a.params,"sdatum"))&&(e=za(d),e||da(-9),e.ellipse_id&&na(a.params,"ellps="+e.ellipse_id),e.defn&&na(a.params,e.defn)),(f=la(a.params,"snadgrids"))?fa("+nadgrids is not implemented"):(g=la(a.params,"scatalog"))?fa("+catalog is not implemented"):(h=la(a.params,"stowgs84"))&&(h.split(",").forEach(function(a,b){c[b]=ja(a)||0}),0!=c[3]||0!=c[4]||0!=c[5]||0!=c[6]?(a.datum_type=K,c[3]*=b,c[4]*=b,c[5]*=b,c[6]=c[6]/1e6+1):a.datum_type=J)}function Ca(a){var b=Ba.reduce(function(b,c){return c[0]===a?c:b},null);return b?{id:b[0],major:b[1],ell:b[2],name:b[3]}:null}function Da(a){var l,m,o,p,q,b=.16666666666666666,c=.04722222222222222,d=.022156084656084655,f=.06944444444444445,h=.04243827160493827,i=a.params,j=0,k=0;la(i,"tR")?j=la(i,"dR"):((l=la(i,"sellps"))&&(m=Ca(l),m||da(-9),na(i,m.major),na(i,m.ell)),j=la(i,"da"),la(i,"tes")?k=la(i,"des"):la(i,"te")?(o=la(i,"de"),k=o*o):la(i,"trf")?(o=la(i,"drf"),o||da(-10),o=1/o,k=o*(2-o)):la(i,"tf")?(o=la(i,"df"),k=o*(2-o)):la(i,"tb")&&(p=la(i,"db"),k=1-p*p/(j*j)),p||(p=j*n(1-k)),la(i,"bR_A")?(j*=1-k*(b+k*(c+k*d)),k=0):la(i,"bR_V")?j*=1-k*(b+k*(f+k*h)):la(i,"bR_a")?(j=.5*(j+p),k=0):la(i,"bR_g")?(j=n(j*p),k=0):la(i,"bR_h")?(j=2*j*p/(j+p),k=0):(q=la(i,"tR_lat_a")||la(i,"tR_lat_g"))&&(o=g(la(i,q?"rR_lat_a":"rR_lat_g")),e(o)>D&&da(-11),o=1-k*o*o,j*=q?.5*(1-k+o)/(o*n(o)):n(1-k)/o,k=0)),k<0&&da(-12),j<=0&&da(-13),a.es=k,a.a=j}function Fa(a){var b=Ea.reduce(function(b,c){return a===c[0]?c:b},null);return b?{id:b[0],to_meter:b[1],name:b[2]}:null}function Ha(a){return Ga[a.toLowerCase()]||null}function Ia(a,b){Ga[a.toLowerCase()]=b}function Ja(b,c){var e,f;try{e=a("path").join(d,"../nad",b),f=Ka(e,c)}catch(a){}return f||null}function Ka(b,c){var f,d=a("fs").readFileSync(b,"utf8"),e="";return f=d.indexOf("<"+c+">"),f>-1&&(e=d.substr(f+c.length+2),e=e.substr(0,e.indexOf("<"))),e=e.replace(/#.*/g,""),e=e.replace(/[\s]+/g," "),e=e.replace(/\+title=[^+]*[^ +]/g,function(a){return a.replace(/ /g,"\t")}),e=" "+e,e=e.replace(/ (?=[a-z])/gi," +"),e=e.replace(/\t/g," "),e.trim()||null}function La(a){var d,e,b=ma(a),c={params:b,is_latlong:!1,is_geocent:!1,is_long_wrap_set:!1,long_wrap_center:0,axis:"enu",gridlist:null,gridlist_count:0,vgridlist_geoid:null,vgridlist_geoid_count:0};return Object.keys(b).length||da(-1),la(b,"tinit")&&Na(b,la(b,"sinit")),d=la(b,"sproj"),d||da(-4),e=oa[d],e||da(-5),la(b,"bno_defs")||Ma(c.params,d),Aa(c),Da(c),c.a_orig=c.a,c.es_orig=c.es,c.e=n(c.es),c.ra=1/c.a,c.one_es=1-c.es,c.one_es||da(-6),c.rone_es=1/c.one_es,Ta(c)&&(c.datum_type=M),c.geoc=!!c.es&&la(b,"bgeoc"),c.over=la(b,"bover"),c.has_geoid_vgrids=la(b,"tgeoidgrids"),c.has_geoid_vgrids&&la(b,"sgeoidgrids"),c.is_long_wrap_set=la(b,"tlon_wrap"),c.is_long_wrap_set&&(c.long_wrap_center=la(b,"rlon_wrap")),la(b,"saxis")&&Sa(c),c.lam0=la(b,"rlon_0"),c.phi0=la(b,"rlat_0"),c.x0=la(b,"dx_0"),c.y0=la(b,"dy_0"),la(b,"tk_0")?c.k0=la(b,"dk_0"):la(b,"tk")?c.k0=la(b,"dk"):c.k0=1,c.k0<=0&&da(-31),Qa(c),Pa(c),e.init(c),c}function Ma(a,b){Oa(a,"+ellps=WGS84")}function Na(a,b){var d,e,c=Ha(b);return c?c:(d=b.split(":"),d.length<2&&da(-3),e=Ja(d[0],d[1]),e||da(-2),Ia(b,c),void Oa(a,e))}function Oa(a,b){var c=ma(b),d=["datum","ellps","a","b","rf","f"].reduce(function(b,c){return b||c in a},!1);Object.keys(c).forEach(function(b){b in a||"ellps"==b&&d||(a[b]=c[b])})}function Pa(a){var c,d,e,b=a.params;c=la(b,"spm"),c?(d=ya(c),e=ha(d?d.definition:c),isNaN(e)&&da(-46),a.from_greenwich=e):a.from_greenwich=0}function Qa(a){var c,d,e,b=a.params;(c=la(b,"sunits"))&&(e=Fa(c),e||da(-7),d=e.to_meter),d||(d=la(b,"sto_meter"))?(a.to_meter=Ra(d),a.fr_meter=1/a.to_meter):a.to_meter=a.fr_meter=1,d=null,(c=la(b,"svunits"))&&(e=Fa(c),e||da(-7),d=e.to_meter),d||la(b,"svto_meter")?(a.vto_meter=Ra(d),a.vfr_meter=1/a.vto_meter):(a.vto_meter=a.to_meter,a.vfr_meter=a.fr_meter)}function Ra(a){var b=a.split("/"),c=ka(b[0]);return b.length>1&&(c/=ka(b[1])),c}function Sa(a){var b="ewnsud",c=la(a.params,"saxis");3!=c.length&&da(O),b.indexOf(c[0])!=-1&&b.indexOf(c[1])!=-1&&b.indexOf(c[2])!=-1||da(O),a.axis=c}function Ta(a){return a.datum_type==J&&a.datum_params[0]==a.datum_params[1]==a.datum_params[2]===0&&6378137==a.a&&Math.abs(a.es-.00669437999)<5e-11}function $a(a,b){var c=Ua,d=a*a,e=b*b;return a<=0&&(c|=Xa),b<=0&&(c|=Ya),a<b&&(c|=Za),c?null:{a:a,b:b,a2:d,b2:e,e2:(d-e)/d,ep2:(d-e)/e}}function _a(a,b,c,d,e){var p,q,r,s,f=Ua,i=c[b],j=d[b],k=e[b];return j<-D&&j>-1.001*D?j=-D:j>D&&j<1.001*D?j=D:(j<-D||j>D)&&(f|=Va),f||(i>x&&(i-=2*x),q=g(j),s=h(j),r=q*q,p=a.a/n(1-a.e2*r),c[b]=(p+k)*s*h(i),d[b]=(p+k)*s*g(i),e[b]=(p*(1-a.e2)+k)*q),f}function ab(a,b,c,d,f){var p,q,r,s,t,u,v,w,x,y,z,A,B,C,E,F,g=1e-12,h=g*g,i=30,j=c[b],k=d[b],o=f[b];if(s=n(j*j+k*k),t=n(j*j+k*k+o*o),s/a.a<g){if(q=0,t/a.a<g)return c[b]=0,d[b]=D,f[b]=-a.b,0}else q=m(k,j);u=o/t,v=s/t,w=1/n(1-a.e2*(2-a.e2)*v*v),z=v*(1-a.e2)*w,A=u*w,F=0;do F++,x=a.a/n(1-a.e2*A*A),r=s*z+o*A-x*(1-a.e2*A*A),y=a.e2*x/(x+r),w=1/n(1-y*(2-y)*v*v),B=v*(1-y)*w,C=u*w,E=C*z-B*A,z=B,A=C;while(E*E>h&&F<i);p=l(C/e(B)),c[b]=q,d[b]=p,f[b]=r}function bb(a,b,c){var d=c.length>2,e=[c[0]],f=[c[1]],g=[d?c[2]:0];a.is_latlong&&(e[0]*=z,f[0]*=z),W.last_errno=0,cb(a,b,e,f,g),(W.last_errno||e[0]==w)&&fa(null,{point:c}),b.is_latlong&&(e[0]*=y,f[0]*=y),c[0]=e[0],c[1]=f[0],d&&(c[2]=g[0])}function cb(a,b,c,d,e){var j,k,f=c.length,g={},h={};if("enu"!=a.axis&&db(a.axis,!1,c,d,e),1!=a.vto_meter&&e)for(j=0;j<f;j++)e[j]*=a.vto_meter;if(a.is_geocent){if(e||da(N),1!=a.to_meter)for(j=0;j<f;j++)c[j]!=w&&(c[j]*=a.to_meter,d[j]*=a.to_meter);ib(a.a_orig,a.es_orig,c,d,e)}else if(!a.is_latlong)if(a.inv3d||a.inv||fa("source projection not invertible"),a.inv3d)fa("inverse 3d transformations not supported");else for(j=0;j<f;j++)h.x=c[j],h.y=d[j],k=ob(h,a),c[j]=k.lam,d[j]=k.phi,Y();if(0!==a.from_greenwich)for(j=0;j<f;j++)c[j]!=w&&(c[j]+=a.from_greenwich);if(a.has_geoid_vgrids&&e&&fa("vgrid transformation not supported"),eb(a,b,c,d,e),b.has_geoid_vgrids&&e&&fa("vgrid transformation not supported"),0!==b.from_greenwich)for(j=0;j<f;j++)c[j]!=w&&(c[j]-=b.from_greenwich);if(b.is_geocent){if(e||da(N),jb(b.a_orig,b.es_orig,c,d,e),1!=b.fr_meter)for(j=0;j<f;j++)c[j]!=w&&(c[j]*=b.fr_meter,d[j]*=b.fr_meter)}else if(b.is_latlong){if(b.is_latlong&&b.is_long_wrap_set)for(j=0;j<f;j++)if(c[j]!=w){for(;c[j]<b.long_wrap_center-x;)c[j]+=F;for(;c[j]>b.long_wrap_center+x;)c[j]-=F}}else if(b.fwd3d)fa("3d transformation not supported");else for(j=0;j<f;j++)g.lam=c[j],g.phi=d[j],k=mb(g,b),c[j]=k.x,d[j]=k.y,Y();if(1!=b.vto_meter&&e)for(j=0;j<f;j++)e[j]*=b.vfr_meter;return"enu"!=b.axis&&db(b.axis,!0,c,d,e),1==f?W.last_errno:0}function db(a,b,c,d,e){var g,h,j,k,l,m,f=c.length,i=0;if(b){for(j=0;j<f;j++)if(g=c[j],h=d[j],g!=w)for(e&&(i=e[j]),k=0;k<3;k++)if(2!=k||e)switch(m=0==k?c:1==k?d:e,a[k]){case"e":m[j]=g;break;case"w":m[j]=-g;break;case"n":m[j]=h;break;case"s":m[j]=-h;break;case"u":m[j]=i;break;case"d":m[j]=-i;break;default:da(O)}}else for(j=0;j<f;j++)if(g=c[j],h=d[j],g!=w)for(e&&(i=e[j]),k=0;k<3;k++)switch(l=0==k?g:1==k?h:i,a[k]){case"e":c[j]=l;break;case"w":c[j]=-l;break;case"n":d[j]=l;break;case"s":d[j]=-l;break;case"u":e&&(e[j]=l);break;case"d":e&&(e[j]=-l);break;default:da(O)}}function eb(a,b,c,d,e){var g,h,i,j,f=c.length,k=!1;a.datum_type!=I&&b.datum_type!=I&&(fb(a,b)||(g=a.a_orig,h=a.es_orig,i=b.a_orig,j=b.es_orig,e||(e=new Float64Array(f),k=!0),a.datum_type==L&&(fa("gridshift not implemented"),g=A,h=B),b.datum_type==L&&(i=A,j=B),h==j&&g==i&&a.datum_type!=J&&a.datum_type!=K&&b.datum_type!=J&&b.datum_type!=K||(jb(g,h,c,d,e),a.datum_type!=J&&a.datum_type!=K||gb(a,c,d,e),b.datum_type!=J&&b.datum_type!=K||hb(b,c,d,e),ib(i,j,c,d,e),b.datum_type==L&&pj_apply_gridshift_2(b,1,c,d,e))))}function fb(a,b){return a.datum_type==b.datum_type&&(!(a.a_orig!=b.a_orig||Math.abs(a.es_orig-b.es_orig)>5e-11)&&(a.datum_type==J?a.datum_params[0]==b.datum_params[0]&&a.datum_params[1]==b.datum_params[1]&&a.datum_params[2]==b.datum_params[2]:a.datum_type==K?a.datum_params[0]==b.datum_params[0]&&a.datum_params[1]==b.datum_params[1]&&a.datum_params[2]==b.datum_params[2]&&a.datum_params[3]==b.datum_params[3]&&a.datum_params[4]==b.datum_params[4]&&a.datum_params[5]==b.datum_params[5]&&a.datum_params[6]==b.datum_params[6]:a.datum_type!=L||la(a.params,"snadgrids")==la(b.params,"snadgrids")))}function gb(a,b,c,d){var j,k,l,m,n,o,p,q,e=b.length,f=a.datum_params,g=f[0],h=f[1],i=f[2];if(a.datum_type==J)for(q=0;q<e;q++)b[q]!=w&&(b[q]+=g,c[q]+=h,d[q]+=i);else if(a.datum_type==K)for(m=f[3],n=f[4],o=f[5],p=f[6],q=0;q<e;q++)b[q]!=w&&(j=p*(b[q]-o*c[q]+n*d[q])+g,k=p*(o*b[q]+c[q]-m*d[q])+h,l=p*(-n*b[q]+m*c[q]+d[q])+i,b[q]=j,c[q]=k,d[q]=l)}function hb(a,b,c,d){var j,k,l,m,n,o,p,q,e=b.length,f=a.datum_params,g=f[0],h=f[1],i=f[2];if(a.datum_type==J)for(q=0;q<e;q++)b[q]!=w&&(b[q]-=g,c[q]-=h,d[q]-=i);else if(a.datum_type==K)for(m=f[3],n=f[4],o=f[5],p=f[6],q=0;q<e;q++)b[q]!=w&&(j=(b[q]-g)/p,k=(c[q]-h)/p,l=(d[q]-i)/p,b[q]=j+o*k-n*l,c[q]=-o*j+k+m*l,d[q]=n*j-m*k+l)}function ib(a,b,c,d,e){var g,h,i,f=c.length;for(g=0==b?a:a*n(1-b),i=$a(a,g),i||da(N),h=0;h<f;h++)c[h]!=w&&ab(i,h,c,d,e)}function jb(a,b,c,d,e){var g,h,i,f=c.length;for(g=0===b?a:a*n(1-b),i=$a(a,g),i||da(N),h=0;h<f;h++)c[h]!=w&&_a(i,h,c,d,e)&&(c[h]=d[h]=w)}function kb(a){var b=3.14159265359,c=6.283185307179586,d=3.141592653589793;return e(a)>b&&(a+=d,a-=c*f(a/c),a-=d),a}function lb(a,b){var c={lam:a.lam*z,phi:a.phi*z};return mb(c,b)}function mb(a,b){var c={x:0,y:0},d=1e-12,f=e(a.phi)-D;return f<=d&&e(a.lam)<=10?(W.last_errno=0,e(f)<=d?a.phi=a.phi<0?-D:D:b.geoc&&(a.phi=l(b.rone_es*i(a.phi))),a.lam-=b.lam0,b.over||(a.lam=kb(a.lam)),b.fwd?(b.fwd(a,c),c.x=b.fr_meter*(b.a*c.x+b.x0),c.y=b.fr_meter*(b.a*c.y+b.y0)):c.x=c.y=w):_(-14),(W.last_errno||isNaN(c.x)||isNaN(c.y))&&(c.x=c.y=w),c}function nb(a,b){var c=ob(a,b);return{lam:c.lam*y,phi:c.phi*y}}function ob(a,b){var c=1e-12,d={lam:0,phi:0};return a.x<w&&a.y<w?(W.last_errno=0,b.inv?(a.x=(a.x*b.to_meter-b.x0)*b.ra,a.y=(a.y*b.to_meter-b.y0)*b.ra,b.inv(a,d),d.lam+=b.lam0,b.over||(d.lam=kb(d.lam)),b.geoc&&e(e(d.phi)-D)>c&&(d.phi=l(b.one_es*i(d.phi)))):d.lam=d.phi=w):_(-15),(W.last_errno||isNaN(d.lam)||isNaN(d.phi))&&(d.lam=d.phi=w),d}function pb(a,b,c,d){var e=qb(a,b,c,d);return function(a){return e(a*y)}}function qb(a,b,c,d){var e,g,h;for((a<0||a>=9)&&(a=3),e=1,h=0;h<a;h++)e*=10;return g=3600*e,function(h){var l,m,n,o,i="",j="",k="";return h===w||isNaN(h)?"":(h<0?(h=-h,n=d||"",n||(i="-")):n=c||"",h=f(h*g+.5),m=h/e%60,h=f(h/(60*e)),l=h%60,o=f(h/60)+"d",k=m.toFixed(a),m=parseFloat(k),k=m?(b?k:String(m))+'"':"",(m||l)&&(j=String(l)+"'",2==j.length&&b&&(j="0"+j)),i+o+j+k+n)}}function rb(a,b,c){var e,f,g,h,i,j,d="string"!=typeof b;return d?(f="+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs",g=a,e=b):(f=a,g=b,e=c),h=La(f),i=La(g),j=sb(h,i),e?j(e):{forward:j,inverse:sb(i,h)}}function sb(a,b){return function(c){var d=Array.isArray(c);return c=d?c.concat():[c.x,c.y],bb(a,b,c),d||(c={x:c[0],y:c[1]}),c}}function tb(a){throw new Error(a)}function ub(a){console.error(a)}function wb(a){var b,c;for(c=0;c<vb.length;c++)if(b=vb[c],b[1]==a)return{proj:b[0],wkt:b[1]};return null}function xb(a,b){var j,k,c=a.DATUM,d=c.SPHEROID,e=yb(c.NAME),f=yb(d[0]),g=b&&b.aux_sphere,h=d[1],i=d[2];return zb(a.UNIT,"degree"),g?j="+a="+d[1]:"wgs1984"==e?j="+datum=WGS84":"northamerican1983"==e?j="+datum=NAD83":"osgb1936"==e?j="+datum=OSGB36":"grs1980"==f?j="+ellps=GRS80":(j="+a="+h,i>0&&(j+=" +rf="+i)),c.TOWGS84&&!g&&(j+=" +towgs84="+c.TOWGS84.join(",")),k=a.PRIMEM?a.PRIMEM[1]:0,(k>0||k<0)&&(j+=" +pm="+k),j}function yb(a){return a.replace(/^(GCS|D)_/i,"").replace(/[ _]/g,"").toLowerCase()}function zb(a,b){a&&a[0].toLowerCase()!=b&&tb("unexpected geographic units: "+geogcs.UNIT[0])}function Cb(a){for(var b=0;b<Ab.length;b++)if(Ab[b][1]==a)return Ab[b][0];return""}function Db(a){return a=a.toLowerCase(),Bb[a]||a}function Eb(a,b,c){var d={},e=[];return a.forEach(function(a){var g,h,f=Fb(a,b,c);f&&(h=f[0],g=f[1],d[h]=g,e.push("+"+h+"="+g))}),"lcc"==b.proj&&"lat_0"in d&&"lat_1"in d==!1&&e.push("+lat_1="+d.lat_0),"omerc"==b.proj&&("Hotine_Oblique_Mercator"!=b.wkt&&"Hotine_Oblique_Mercator_Azimuth_Natural_Origin"!=b.wkt||e.push("+no_uoff")),e.join(" ")}function Fb(a,b,c){var g,d=b.proj,e=Db(a[0]),f=a[1];if("stere"==d&&"standard_parallel_1"==e&&(g="lat_0"),"omerc"==d&&("longitude_of_center"==e&&(g="lonc"),"azimuth"==e&&(g="alpha"),"rectified_grid_angle"==e&&(g="gamma")),"merc"==d&&"Mercator_2SP"==b.wkt&&"standard_parallel_1"==e&&(g="lat_ts"),"eqc"==d&&"standard_parallel_1"==e&&(g="lat_ts"),g||(g=Cb(e)),"x_0"!=g&&"y_0"!=g&&"h"!=g||(f*=c.to_meter),!Lb||!("x_0,y_0,lat_0,lon_0".indexOf(g)>-1&&0===f||"k_0"==g&&1==f))return g?[g,f]:void ub("unhandled param: "+a[0])}function Gb(a){return{to_meter:a[1]}}function Ib(a){var b;a=a.replace(/""/g,'\\"'),a=a.replace(/([A-Z0-9]+)\[/g,'["$1",'),a=a.replace(/, *([a-zA-Z]+) *(?=[,\]])/g,',"$1"');try{b=JSON.parse(a)}catch(a){tb("unparsable WKT format")}return Kb(b,{})}function Jb(a){return Hb[a]||a}function Kb(a,b){var d,c=Jb(a[0]);if("GEOGCS"==c||"GEOCCS"==c||"PROJCS"==c||"DATUM"==c)for(b[c]={NAME:a[1]},d=2;d<a.length;d++){if(!Array.isArray(a[d]))throw tb("WKT parse error");Kb(a[d],b[c])}else"AXIS"==c||"PARAMETER"==c?(c in b==!1&&(b[c]=[]),b[c].push(a.slice(1))):b[c]=a.slice(1);return b}function Mb(a){var c,b=Ib(a);return b.PROJCS?c=Nb(b.PROJCS):b.GEOGCS?c="+proj=longlat "+xb(b.GEOGCS):tb(b.GEOCCS?"geocentric coordinates are not supported":"missing a supported WKT CS type"),c}function Nb(a){var d,f,g,h,i,b=wb(a.PROJECTION),c=a.NAME.replace(/ /g,"_");return d=Gb(a.UNIT),b||tb("unknown projection: "+a.PROJECTION),b.proj||tb("projection not implemented: "+a.PROJECTION),(f=/UPS_(North|South)/i.exec(c))?(g="+proj=ups","south"==f[1].toLowerCase()&&(g+=" +south")):(f=/UTM_zone_([1-9]{1,2})(N|S)/i.exec(c))?(g="+proj=utm +zone="+f[1],"S"==f[2]&&(g+=" +south")):/(Web_Mercator|Pseudo-Mercator)/i.test(c)?(g="+proj=merc",h=xb(a.GEOGCS,{aux_sphere:!0})):(g="+proj="+b.proj,i=Eb(a.PARAMETER||[],b,d),i&&(g+=" "+i)),h||(h=xb(a.GEOGCS)),"vandg"==b.proj&&(h+=" +R_A"),g+=" "+h,1!=d.to_meter?g+=" +to_meter="+d.to_meter:Lb||(g+=" +units=m"),g+" +no_defs"}function Ob(a,b,c){var e,d=1e-7;return b>=d?(e=b*a,c*(a/(1-e*e)-.5/b*q((1-e)/(1+e)))):a+a}function Pb(a,b,c){return b/n(1-c*a*a)}function Qb(a){var b=la(a.params,"rlat_1"),c=la(a.params,"rlat_2");Sb(a,b,c)}function Rb(a){var b=la(a.params,"rlat_1"),c=la(a.params,"bsouth")?-D:D;Sb(a,b,c)}function Sb(a,b,c){function C(b,c){var e,d=b.lam;(e=i-(t?f*Ob(g(b.phi),a.e,a.one_es):l*g(b.phi)))<0&&aa(),e=k*n(e),c.x=e*g(d*=f),c.y=o-e*h(d)}function E(b,c){var g=1e-7,h=b.x,n=o-b.y,p=r(h,n);0!=p?(f<0&&(p=-p,h=-h,n=-n),c.phi=p/k,t?(c.phi=(i-c.phi*c.phi)/f,e(d-e(c.phi))>g?(c.phi=F(c.phi,a.e,a.one_es))==w&&ba():c.phi=c.phi<0?-D:D):e(c.phi=(i-c.phi*c.phi)/l)<=1?c.phi=j(c.phi):c.phi=c.phi<0?-D:D,c.lam=m(h,n)/f):(c.lam=0,c.phi=f>0?D:-D)}function F(a,b,c){var k,l,m,n,o,p,r,d=15,f=1e-7,i=1e-10;if(k=j(.5*a),b<f)return k;r=d;do l=g(k),m=h(k),n=b*l,o=1-n*n,p=.5*o*o/m*(a/c-l/o+.5/b*q((1-n)/(1+n))),k+=p;while(e(p)>i&&--r);return r?k:w}var d,f,i,k,l,o,s,t,u,v,x,y,z,A,B;a.fwd=C,a.inv=E,e(b+c)<R&&ea(-21),f=v=g(b),u=h(b),x=e(b-c)>=R,(t=a.es>0)?(s=Tb(a.es),B=Pb(v,u,a.es),A=Ob(v,a.e,a.one_es),x&&(v=g(c),u=h(c),z=Pb(v,u,a.es),y=Ob(v,a.e,a.one_es),f=(B*B-z*z)/(y-A)),d=1-.5*a.one_es*q((1-a.e)/(1+a.e))/a.e,i=B*B+f*A,k=1/f,o=k*n(i-f*Ob(g(a.phi0),a.e,a.one_es))):(x&&(f=.5*(f+g(c))),l=f+f,i=u*u+l*v,k=1/f,o=k*n(i-l*g(a.phi0)))}function Tb(a){var o,b=1,c=.25,d=.046875,e=.01953125,f=.01068115234375,g=.75,h=.46875,i=.013020833333333334,j=.007120768229166667,k=.3645833333333333,l=.005696614583333333,m=.3076171875,n=[];return n[0]=b-a*(c+a*(d+a*(e+a*f))),n[1]=a*(g-a*(d+a*(e+a*f))),n[2]=(o=a*a)*(h-a*(i+a*j)),n[3]=(o*=a)*(k-a*l),n[4]=o*a*m,n}function Ub(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))}function Vb(a,b,c){var k,l,m,d=1e-11,f=10,j=1/(1-b);m=a;for(var o=f;o>0;--o)if(k=g(m),l=1-b*k*k,m-=l=(Ub(m,k,h(m),c)-a)*(l*n(l))*j,e(l)<d)return m;return _(W,-17),m}function Wb(a){var b=1.00000000000001,c=e(a);return c>=1?(c>b&&_(-19),a<0?-D:D):j(a)}function Xb(a){var b=1.00000000000001,c=e(a);return c>=1?(c>b&&_(-19),a<0?x:0):k(a)}function Yb(a){return a<=0?0:n(a)}function _b(a){function B(c,i){var k,m,n,o,p,r,s,u,v,x,B;switch(k=h(c.lam),m=h(c.phi),n=g(c.phi),w){case d:k=-k;case f:i.x=(o=e(t-Ub(c.phi,n,m,y)))*g(c.lam),i.y=o*k;break;case j:case l:if(e(c.lam)<b&&e(c.phi-a.phi0)<b){i.x=i.y=0;break}u=a.phi0/z,s=a.lam0/z,x=c.phi/z,v=(c.lam+a.lam0)/z,B=A.Inverse(u,s,x,v,A.AZIMUTH),p=B.azi1*z,r=B.s12,i.x=r*g(p)/a.a,i.y=r*h(p)/a.a}}function C(c,e){var f,g,i,k,o,p,q,v;return(f=r(c.x,c.y))<b?(e.phi=a.phi0,e.lam=0,e):void(w==l||w==j?(k=c.x*a.a,o=c.y*a.a,p=a.phi0/z,q=a.lam0/z,g=m(k,o)/z,i=n(k*k+o*o),v=A.Direct(p,q,g,i,A.STANDARD),e.phi=v.lat2*z,e.lam=v.lon2*z,e.lam-=a.lam0):(e.phi=Vb(w==d?t-f:t+f,a.es,y),e.lam=m(c.x,w==d?-c.y:c.y)))}function E(a,i){var m,n,q;switch(q=g(a.phi),n=h(a.phi),m=h(a.lam),w){case j:case l:w==j?i.y=n*m:i.y=o*q+p*n*m,e(e(i.y)-1)<c?i.y<0?aa():i.x=i.y=0:(i.y=k(i.y),i.y/=g(i.y),i.x=i.y*n*g(a.lam),i.y*=w==j?q:p*q-o*n*m);break;case d:a.phi=-a.phi,m=-m;case f:e(a.phi-D)<b&&aa(),i.x=(i.y=D+a.phi)*g(a.lam),i.y*=m}}function F(c,e){var k,n,q,f=c.x,i=c.y;if((n=r(f,i))>x)n-b>x&&ba(),n=x;else if(n<b)return e.phi=a.phi0,void(e.lam=0);w==l||w==j?(q=g(n),k=h(n),w==j?(e.phi=Wb(i*q/n),f*=q,i=k*n):(e.phi=Wb(k*o+i*q*p/n),i=(k-o*g(e.phi))*n,f*=q*p),e.lam=0==i?0:m(f,i)):w==d?(e.phi=D-n,e.lam=m(f,-i)):(e.phi=n-D,e.lam=m(f,i))}function G(b,c){var d,e,f;d=h(b.phi),e=g(b.phi),f=1/n(1-a.es*e*e),c.x=b.lam*d*f,c.y=Ub(b.phi,e,d,y)-q+.5*b.lam*b.lam*d*e*f}function H(b,c){var d,e,f;for(d=.5*b.x*b.x,c.phi=a.phi0,f=0;f<3;++f)e=a.e*g(c.phi),c.phi=Vb(q+b.y-d*i(c.phi)*(e=n(1-e*e)),a.es,y);c.lam=b.x*e/h(c.phi)}var o,p,q,s,t,u,v,w,y,A,b=1e-10,c=1e-14,d=0,f=1,j=2,l=3;if(a.phi0=la(a.params,"rlat_0"),e(e(a.phi0)-D)<b?(w=a.phi0<0?f:d,o=a.phi0<0?-1:1,p=0):e(a.phi0)<b?(w=j,o=0,p=1):(w=l,o=g(a.phi0),p=h(a.phi0)),a.es)if(A=new $b.Geodesic.Geodesic(a.a,a.es/(1+n(a.one_es))),y=Tb(a.es),la(a.params,"bguam"))q=Ub(a.phi0,o,p,y),a.inv=H,a.fwd=G;else{switch(w){case d:t=Ub(D,1,0,y);break;case f:t=Ub(-D,-1,0,y);break;case j:case l:a.inv=C,a.fwd=B,s=1/n(1-a.es*o*o),v=o*(u=a.e/n(a.one_es)),u*=p}a.inv=C,a.fwd=B}else a.inv=F,a.fwd=E}function ac(a){function s(a,k){var r,s,t,u,v,w,x,y;switch(r=g(a.lam),s=h(a.lam),o){case f:case j:u=g(a.phi),t=h(a.phi),y=t*s,o==j&&(y=l*u+m*y),!p&&y<-b&&aa(),e(w=1-y)>b?(v=.5*(1+y),x=-q(v)/w-n/v):x=.5-n,k.x=x*t*r,o==j?k.y=x*(m*u-l*t*s):k.y=x*u;break;case d:case c:a.phi=e(p_halfpi-a.phi),!p&&a.phi-b>D&&aa(),(a.phi*=.5)>b?(v=i(a.phi),x=-2*(q(h(a.phi))/v+v*n),k.x=x*r,k.y=x*s,o==c&&(k.y=-k.y)):k.x=k.y=0}}var l,m,n,o,p,r,b=1e-10,c=0,d=1,f=2,j=3;a.es=0,a.fwd=s,p=la(a.params,"bno_cut"),r=.5*(D-la(a.params,"rlat_b")),e(r)<b?n=-.5:(n=1/i(r),n*=n*q(h(r))),e(e(a.phi0)-D)<b?a.phi0<0?(p_halfpi=-D,o=d):(p_halfpi=D,o=c):e(a.phi0)<b?o=f:(o=j,l=g(a.phi0),m=h(a.phi0))}function bc(a){var b=a.opaque={mode:1};la(a.params,"tlat_1")?0===(b.cosphi1=h(la(a.params,"rlat_1")))&&ea(-22):b.cosphi1=.6366197723675814,cc(a)}function cc(a){function c(a,c){var d,e;(e=k(h(a.phi)*h(d=.5*a.lam)))?(c.x=2*e*h(a.phi)*g(d)*(c.y=1/g(e)),c.y*=e*g(a.phi)):c.x=c.y=0,b.mode&&(c.x=.5*(c.x+a.lam*b.cosphi1),c.y=.5*(c.y+a.phi))}function d(a,c){var l,m,n,p,q,r,s,t,u,v,w,y,z,A,B,C,E,d=10,f=20,i=1e-12,j=0;if(e(a.x)<i&&e(a.y)<i)return c.phi=0,void(c.lam=0);c.phi=a.y,c.lam=a.x;do{l=0;do{for(y=g(.5*c.lam),B=h(.5*c.lam),z=g(c.phi),A=h(c.phi),m=A*B,n=1-m*m,m=k(m)/o(n,1.5),p=2*m*n*A*y,q=m*n*z,r=2*(y*B*z*A/n-m*z*y),s=A*A*y*y/n+m*A*B*z*z,t=z*z*B/n+m*y*y*A,u=.5*(z*A*y/n-m*z*A*A*y*B),b.mode&&(p=.5*(p+c.lam*b.cosphi1),q=.5*(q+c.phi),r*=.5,s=.5*(s+b.cosphi1),t=.5*(t+1),u*=.5),p-=a.x,q-=a.y,w=(q*r-p*t)/(v=r*u-t*s),v=(p*u-q*s)/v;w>x;)w-=x;for(;w<-x;)w+=x;c.phi-=v,c.lam-=w}while((e(v)>i||e(w)>i)&&l++<d);c.phi>D&&(c.phi-=2*(c.phi-D)),c.phi<-D&&(c.phi-=2*(c.phi+D)),e(e(c.phi)-D)<i&&!b.mode&&(c.lam=0),(m=k(h(c.phi)*h(n=.5*c.lam)))?(C=2*m*h(c.phi)*g(n)*(E=1/g(m)),E*=m*g(c.phi)):C=E=0,b.mode&&(C=.5*(C+c.lam*b.cosphi1),E=.5*(E+c.phi))}while((e(a.x-C)>i||e(a.y-E)>i)&&j++<f)}var b=a.opaque||{mode:0};a.inv=d,a.fwd=c,a.es=0}function dc(a){function l(a,d){var l,m,n,o;if(l=a.phi,e(e(a.phi)-D)<c)d.x=0;else{for(n=g(l)*x,o=b;o&&(l-=m=(l+g(l)-n)/(1+h(l)),!(e(m)<c));--o);l*=.5,d.x=i*a.lam/(1/h(a.phi)+j/h(l))}d.y=k*(a.phi+f*g(l))}var b=20,c=1e-7,f=n(2),i=2.00276,j=1.11072,k=.49931;a.fwd=l}function ec(a){function o(b,c){var d,e,i;d=f+j-Ub(b.phi,e=g(b.phi),i=h(b.phi),k),e=i*b.lam/(d*n(1-a.es*e*e)),c.x=d*g(e),c.y=f-d*h(e)}function p(c,d){var i,l;l=r(c.x,c.y=f-c.y),d.phi=Vb(f+j-l,a.es,k),(i=e(d.phi))<D?(i=g(d.phi),d.lam=l*m(c.x,c.y)*n(1-a.es*i*i)/h(d.phi)):e(i-D)<=b?d.lam=0:ba()}function q(a,f){var i,j;j=d+c-a.phi,e(j)>b?(f.x=j*g(i=a.lam*h(a.phi)/j),f.y=d-j*h(i)):f.x=f.y=0}function s(a,f){var g=r(a.x,a.y=d-a.y);f.phi=d+c-g,e(f.phi)>D&&ba(),e(e(f.phi)-D)<=b?f.lam=0:f.lam=g*m(a.x,a.y)/h(f.phi)}var c,d,f,j,k,l,b=1e-10;c=la(a.params,"rlat_1"),e(c)<b&&ea(-23),a.es?(k=Tb(a.es),j=Ub(c,f=g(c),l=h(c),k),f=l/(n(1-a.es*f*f)*f),a.inv=p,a.fwd=o):(d=e(c)+b>=D?0:1/i(c),a.inv=s,a.fwd=q)}function fc(a){function o(e,f){var j,m,o,p,q,r;f.y=Ub(e.phi,j=g(e.phi),p=h(e.phi),l),
j=1/n(1-a.es*j*j),r=i(e.phi),m=r*r,o=e.lam*p,p*=a.es*p/(1-a.es),q=o*o,f.x=j*o*(1-q*m*(b-(8-m+8*p)*q*c)),f.y-=k-j*r*q*(.5+(5-m+6*p)*q*d)}function p(b,c){var j,m,o,p,q,r,s;s=Vb(k+b.y,a.es,l),r=i(s),m=r*r,j=g(s),o=1/(1-a.es*j*j),j=n(o),o*=(1-a.es)*j,p=b.x/j,q=p*p,c.phi=s-j*r/o*q*(.5-(1+3*m)*q*d),c.lam=p*(1+m*q*(-e+(1+3*m)*q*f))/h(s)}function q(b,c){c.x=j(h(b.phi)*g(b.lam)),c.y=m(i(b.phi),h(b.lam))-a.phi0}function r(b,c){var d=b.y+a.phi0;c.phi=j(g(d)*h(b.x)),c.lam=m(i(b.x),h(d))}var k,l,b=.16666666666666666,c=.008333333333333333,d=.041666666666666664,e=.3333333333333333,f=.06666666666666667;a.es?(l=Tb(a.es),k=Ub(a.phi0,g(a.phi0),h(a.phi0),l),a.fwd=o,a.inv=p):(a.fwd=q,a.inv=r)}function gc(a){var i,b=.3333333333333333,c=.17222222222222222,d=.10257936507936508,e=.06388888888888888,f=.0664021164021164,g=.01677689594356261,h=[];return h[0]=a*b,i=a*a,h[0]+=i*c,h[1]=i*e,i*=a,h[0]+=i*d,h[1]+=i*f,h[2]=i*g,h}function hc(a,b){var c=a+a;return a+b[0]*g(c)+b[1]*g(c+c)+b[2]*g(c+c+c)}function ic(a){function f(b,c){c.x=a.k0*b.lam,c.y=.5*Ob(g(b.phi),a.e,a.one_es)/a.k0}function i(b,e){e.phi=hc(j(2*b.y*a.k0/c),d),e.lam=b.x/a.k0}function k(b,c){c.x=a.k0*b.lam,c.y=g(b.phi)/a.k0}function l(b,c){var g,d=b.x,f=b.y;(g=e(f*=a.k0))-R<=1?(g>=1?c.phi=f<0?-D:D:c.phi=j(f),c.lam=d/a.k0):ba()}var c,d,b=0;la(a.params,"tlat_ts")&&(a.k0=h(b=la(a.params,"rlat_ts")),a.k0<0&&ea(-24)),a.es?(b=g(b),a.k0/=n(1-a.es*b*b),a.e=n(a.es),(d=gc(a.es))||e_error_0(),c=Ob(1,a.e,a.one_es),a.fwd=f,a.inv=i):(a.fwd=k,a.inv=l)}function jc(a){function r(a,c){var e,j,k,m,n,p,q,r=[];for(e=g(a.phi),j=h(a.phi),m=0;m<3&&(r[m]=s(a.phi-d[m].phi,d[m].cosphi,d[m].sinphi,j,e,a.lam-d[m].lam),r[m].r);++m)r[m].Az=kb(r[m].Az-d[m].v.Az);if(m<3)p=d[m].p.x,q=d[m].p.y;else{for(p=f,q=i,m=0;m<3;++m)n=2==m?0:m+1,k=t(d[m].v.r,r[m].r,r[n].r),r[m].Az<0&&(k=-k),m?1==m?(k=l-k,p-=r[m].r*h(k),q-=r[m].r*g(k)):(k=o-k,p+=r[m].r*h(k),q+=r[m].r*g(k)):(p+=r[m].r*h(k),q-=r[m].r*g(k));p*=b,q*=b}c.x=p,c.y=q}function s(a,b,d,f,i,j){var l,o,p,k={};return l=h(j),e(a)>1||e(j)>1?k.r=Xb(cs1*i+b*f*l):(o=g(.5*a),p=g(.5*j),k.r=2*Wb(n(o*o+b*f*p*p))),e(k.r)>c?k.Az=m(f*g(j),b*i-d*f*l):k.r=k.Az=0,k}function t(a,b,c){return Xb(.5*(a*a+b*b-c*c)/(a*b))}var f,i,k,l,o,p,q,b=1/3,c=1e-9,d=[];for(p=0;p<3;++p)d[p]={p:{}},d[p].phi=la(a.params,"rlat_"+(p+1)),d[p].lam=la(a.params,"rlon_"+(p+1)),d[p].lam=kb(d[p].lam-a.lam0),d[p].cosphi=h(d[p].phi),d[p].sinphi=g(d[p].phi);for(p=0;p<3;++p)q=2==p?0:p+1,d[p].v=s(d[q].phi-d[p].phi,d[p].cosphi,d[p].sinphi,d[q].cosphi,d[q].sinphi,d[q].lam-d[p].lam),d[p].v.r||ea(-25);k=t(d[0].v.r,d[2].v.r,d[1].v.r),l=t(d[0].v.r,d[1].v.r,d[2].v.r),o=x-k,i=2*(d[0].p.y=d[1].p.y=d[2].v.r*g(k)),d[2].p.y=0,d[0].p.x=-(d[1].p.x=.5*d[0].v.r),f=d[2].p.x=d[0].p.x+d[2].v.r*h(k),a.es=0,a.fwd=r}function kc(a){function d(a,d){d.x=b*a.lam*(1-c*e(a.phi)),d.y=b*a.phi}function f(a,d){d.phi=a.y/b,d.lam=a.x/(b*(1-c*e(d.phi)))}var b=.9213177319235613,c=.3183098861837907;a.es=0,a.fwd=d,a.inv=f}function lc(a){function h(a,d){d.x=b*a.lam*(d.y=n(4-3*g(e(a.phi)))),d.y=c*(2-d.y),a.phi<0&&(d.y=-d.y)}function i(a,g){g.lam=a.x/(b*(g.phi=2-e(a.y)/c)),g.phi=(4-g.phi*g.phi)*d,e(g.phi)>=1?e(g.phi)>f?ba():g.phi=g.phi<0?-D:D:g.phi=j(g.phi),a.y<0&&(g.phi=-g.phi)}var b=.46065886596178063,c=1.4472025091165353,d=.3333333333333333,f=1.0000001;a.es=0,a.fwd=h,a.inv=i}function mc(a){var b={C_x:.4222382003157712,C_y:.8444764006315424,A:1,B:.4052847345693511};qc(a,b)}function nc(a){var b={C_x:.8660254037844,C_y:1,A:0,B:.3039635509270133};qc(a,b)}function oc(a){var b={C_x:.94745,C_y:.94745,A:0,B:.3039635509270133};qc(a,b)}function pc(a){var b={C_x:1.8949,C_y:.94745,A:-.5,B:.3039635509270133};qc(a,b)}function qc(a,b){function c(a,c){c.y=b.C_y*a.phi,c.x=b.C_x*a.lam*(b.A+Yb(1-b.B*a.phi*a.phi))}function d(a,c){c.phi=a.y/b.C_y,c.lam=a.x/(b.C_x*(b.A+Yb(1-b.B*c.phi*c.phi)))}a.es=0,a.fwd=c,a.inv=d}function rc(a){function l(a,d){var i,l,m,n,o;for(i=f*g(a.phi),l=a.phi*a.phi,a.phi*=.895168+l*(.0218849+.00826809*l),o=k;o&&(n=h(a.phi),m=g(a.phi),a.phi-=l=(a.phi+m*(n+2)-i)/(1+n*(n+2)-m*m),!(e(l)<j));--o);o?(d.x=b*a.lam*(1+h(a.phi)),d.y=c*g(a.phi)):(d.x=b*a.lam,d.y=a.phi<0?-c:c)}function m(a,d){var e;d.phi=Wb(a.y/c),d.lam=a.x/(b*(1+(e=h(d.phi)))),d.phi=Wb((d.phi+g(d.phi)*(e+2))/f)}var b=.4222382003157712,c=1.3265004281770023,f=3.5707963267948966,j=1e-7,k=6;a.es=0,a.fwd=l,a.inv=m}function sc(a){function f(a,c){c.x=b*(1+h(a.phi))*a.lam,c.y=d*a.phi}function g(a,b){b.lam=c*a.x/(1+h(b.phi=e*a.y))}var b=.4410127717245515,c=2.267508027238226,d=.882025543449103,e=1.133754013619113;a.es=0,a.fwd=f,a.inv=g}function tc(a){function c(c,d){d.x=b*c.lam,d.y=c.phi-a.phi0}function d(c,d){d.lam=c.x/b,d.phi=c.y+a.phi0}var b=h(la(a.params,"rlat_ts"));b<=0&&ea(-24),a.es=0,a.fwd=c,a.inv=d}function uc(a){function t(a,b){f=j-(l?Ub(a.phi,g(a.phi),h(a.phi),k):a.phi),b.x=f*g(a.lam*=d),b.y=i-f*h(a.lam)}function u(b,c){0!=(f=r(b.x,b.y=i-b.y))?(d<0&&(f=-f,b.x=-b.x,b.y=-b.y),c.phi=j-f,l&&(c.phi=Vb(c.phi,a.es,k)),c.lam=m(b.x,b.y)/d):(c.lam=0,c.phi=d>0?D:-D)}var b,c,d,f,i,j,k,l,n,o,p,q,s;b=la(a.params,"rlat_1"),c=la(a.params,"rlat_2"),e(b+c)<R&&ea(-21),(k=Tb(a.es))||e_error_0(),d=o=g(b),n=h(b),p=e(b-c)>=R,(l=a.es>0)?(s=Pb(o,n,a.es),q=Ub(b,o,n,k),p&&(o=g(c),n=h(c),d=(s-Pb(o,n,a.es))/(Ub(c,o,n,k)-q)),j=q+s/d,i=j-Ub(a.phi0,g(a.phi0),h(a.phi0),k)):(p&&(d=(n-h(c))/(c-b)),j=b+h(b)/d,i=j-a.phi0),a.fwd=t,a.inv=u}function vc(a){var b;a.es||ea(-34),a.y0=la(a.params,"bsouth")?1e7:0,a.x0=5e5,la(a.params,"tzone")?(b=la(a.params,"izone"))>0&&b<=60?--b:ea(-35):(b=f(30*(kb(a.lam0)+x)/x),b<0?b=0:b>=60&&(b=59)),a.lam0=(b+.5)*x/30-x,a.k0=.9996,a.phi0=0,wc(a)}function wc(a){function x(a,b){var d,l,n,o,p,q=a.phi,s=a.lam;q=B(c,q),d=g(q),l=h(q),o=g(s),n=h(s),q=m(d,n*l),s=m(o*l,r(d,l*n)),s=A(i(s)),p=D(f,2*q,2*s),q+=p[0],s+=p[1],e(s)<=2.623395162778?(b.y=j*q+k,b.x=j*s):b.x=b.y=w}function y(a,c){var f,i,n,o,p,q=a.y,t=a.x;q=(q-k)/j,t/=j,e(t)<=2.623395162778?(p=D(d,2*q,2*t),q+=p[0],t+=p[1],t=l(s(t)),f=g(q),i=h(q),o=g(t),n=h(t),t=m(o,n*i),q=m(f*n,r(o,n*i)),c.phi=B(b,q),c.lam=t):c.phi=c.lam=w}function z(a){var b=1+a,c=b-1;return 0===c?a:a*q(b)/c}function A(a){var b=e(a);return b=z(b*(1+b/(r(1,b)+1))),a<0?-b:b}function B(a,b){for(var i,c=2*h(2*b),d=a.length-1,e=a[d],f=0;--d>=0;)i=-f+c*e+a[d],f=e,e=i;return b+i*g(2*b)}function C(a,b){for(var i,c=2*h(b),d=a.length-1,e=a[d],f=0;--d>=0;)i=-f+c*e+a[d],f=e,e=i;return g(b)*i}function D(a,b,c){for(var q,r,d=g(b),e=h(b),f=s(c),i=t(c),j=2*e*i,k=-2*d*f,l=a.length-1,m=a[l],n=0,o=0,p=0;--l>=0;)q=o,r=n,o=m,n=p,m=-q+j*o-k*n+a[l],p=-r+k*o+j*n;return j=d*i,k=e*f,[j*m-k*p,j*p+k*m]}var j,k,o,p,u,v,b=[],c=[],d=[],f=[];a.es<=0&&ea(-34),o=a.es/(1+n(1-a.es)),u=p=o/(2-o),b[0]=p*(2+p*(-2/3+p*(-2+p*(116/45+p*(26/45+p*(-2854/675)))))),c[0]=p*(-2+p*(2/3+p*(4/3+p*(-82/45+p*(32/45+p*(4642/4725)))))),u*=p,b[1]=u*(7/3+p*(-1.6+p*(-227/45+p*(2704/315+p*(2323/945))))),c[1]=u*(5/3+p*(-16/15+p*(-13/9+p*(904/315+p*(-1522/945))))),u*=p,b[2]=u*(56/15+p*(-136/35+p*(-1262/105+p*(73814/2835)))),c[2]=u*(-26/15+p*(34/21+p*(1.6+p*(-12686/2835)))),u*=p,b[3]=u*(4279/630+p*(-332/35+p*(-399572/14175))),c[3]=u*(1237/630+p*(-2.4+p*(-24832/14175))),u*=p,b[4]=u*(4174/315+p*(-144838/6237)),c[4]=u*(-734/315+p*(109598/31185)),u*=p,b[5]=u*(601676/22275),c[5]=u*(444337/155925),u=p*p,j=a.k0/(1+p)*(1+u*(.25+u*(1/64+u/256))),d[0]=p*(-.5+p*(2/3+p*(-37/96+p*(1/360+p*(81/512+p*(-96199/604800)))))),f[0]=p*(.5+p*(-2/3+p*(5/16+p*(41/180+p*(-127/288+p*(7891/37800)))))),d[1]=u*(-1/48+p*(-1/15+p*(437/1440+p*(-46/105+p*(1118711/3870720))))),f[1]=u*(13/48+p*(-.6+p*(557/1440+p*(281/630+p*(-1983433/1935360))))),u*=p,d[2]=u*(-17/480+p*(37/840+p*(209/4480+p*(-5569/90720)))),f[2]=u*(61/240+p*(-103/140+p*(15061/26880+p*(167603/181440)))),u*=p,d[3]=u*(-4397/161280+p*(11/504+p*(830251/7257600))),f[3]=u*(49561/161280+p*(-179/168+p*(6601661/7257600))),u*=p,d[4]=u*(-4583/161280+p*(108847/3991680)),f[4]=u*(34729/80640+p*(-3418889/1995840)),u*=p,d[5]=u*-.03233083094085698,f[5]=.6650675310896665*u,v=B(c,a.phi0),k=-j*(v+C(f,2*v)),a.fwd=x,a.inv=y}function xc(a){function f(a,d){d.x=c*a.lam,d.y=b*i(.5*a.phi)}function g(a,b){b.lam=e*a.x,b.phi=2*l(a.y*d)}var b=1.7071067811865475,c=.7071067811865476,d=.585786437626905,e=1.4142135623730951;a.fwd=f,a.inv=g,a.es=0}function yc(a){a.is_geocent=!0,a.x0=0,a.y0=0,a.fwd=function(a,b){b.x=a.lam,b.y=a.phi},a.inv=function(a,b){b.phi=a.y,b.lam=a.x}}function zc(a){function f(a,b){var c=.5*a.lam,f=j(a.phi),i=g(f),k=h(f),l=h(c);d*i+e*k*l>=0?(b.x=k*g(c),b.y=e*i-d*k*l):aa()}function j(a){return Wb(i(.5*a))}var b=la(a.params,"tlat_1")?la(a.params,"rlat_1"):0,c=j(b),d=g(c),e=h(c);a.fwd=f,a.es=0}function Ac(a){la(a.params,"tn"),la(a.params,"tm")?Ec(a,la(a.params,"dm"),la(a.params,"dn")):ea(-99)}function Bc(a){function c(c,d){var e,f;d.y=Ub(c.phi,e=g(c.phi),f=h(c.phi),b),d.x=c.lam*f/n(1-a.es*e*e)}function d(c,d){var f=e(d.phi=Vb(c.y,a.es,b));f<D?(f=g(d.phi),d.lam=c.x*n(1-a.es*f*f)/h(d.phi)):f-R<D?d.lam=0:ba()}var b;a.es?(b=Tb(a.es),a.fwd=c,a.inv=d):Ec(a,0,1)}function Cc(a){Ec(a,1,2.5707963267948966)}function Dc(a){Ec(a,.5,1.7853981633974483)}function Ec(a,b,c){function k(a,k){var l,m,n;if(b){for(l=c*g(a.phi),n=d;n&&(a.phi-=m=(b*a.phi+g(a.phi)-l)/(b+h(a.phi)),!(e(m)<f));--n);n||aa()}else a.phi=1!=c?Wb(c*g(a.phi)):a.phi;k.x=i*a.lam*(b+h(a.phi)),k.y=j*a.phi}function l(a,d){a.y/=j,d.phi=b?Wb((b*a.y+g(a.y))/c):1!=c?Wb(g(a.y)/c):a.y,d.lam=a.x/(i*(b+h(a.y)))}var i,j,d=8,f=1e-7;i=(j=n((b+1)/c))/(b+1),a.es=0,a.fwd=k,a.inv=l}function Fc(a){function q(a,e){var j,k,l;switch(l=g(a.phi),k=h(a.phi),j=h(a.lam),p){case f:e.y=k*j;break;case i:e.y=sinph0*l+o*k*j;break;case d:e.y=-l;break;case c:e.y=l}switch(e.y<=b&&aa(),e.x=(e.y=1/e.y)*k*g(a.lam),p){case f:e.y*=l;break;case i:e.y*=o*l-sinph0*k*j;break;case c:j=-j;case d:e.y*=k*j}}function s(h,k){var t,u,v,q=h.x,s=h.y;if(t=r(q,s),v=g(k.phi=l(t)),u=n(1-v*v),e(t)<=b)k.phi=a.phi0,k.lam=0;else{switch(p){case i:k.phi=u*sinph0+s*v*o/t,e(k.phi)>=1?k.phi=k.phi>0?D:-D:k.phi=j(k.phi),s=(u-sinph0*g(k.phi))*t,q*=v*o;break;case f:k.phi=s*v/t,e(k.phi)>=1?k.phi=k.phi>0?D:-D:k.phi=j(k.phi),s=u*t,q*=v;break;case d:k.phi-=D;break;case c:k.phi=D-k.phi,s=-s}k.lam=m(q,s)}}var o,p,b=1e-10,c=0,d=1,f=2,i=3;e(e(a.phi0)-D)<b?p=a.phi0<0?d:c:e(a.phi0)<b?p=f:(p=i,sinph0=g(a.phi0),o=h(a.phi0)),a.inv=s,a.fwd=q,a.es=0}function Gc(a){function B(c,d){var j,m,r,t,v=0,w=0,x=0;switch(j=h(c.lam),m=g(c.lam),r=g(c.phi),t=Ob(r,a.e,a.one_es),y!=l&&y!=k||(v=t/u,w=n(1-v*v)),y){case l:x=1+o*v+p*w*j;break;case k:x=1+w*j;break;case f:x=D+c.phi,t=u-t;break;case i:x=c.phi-D,t=u+t}switch(e(x)<b&&aa(),y){case l:case k:y==l?(x=n(2/x),d.y=s*x*(p*v-o*w*j)):(x=n(2/(1+w*j)),d.y=x*v*s),d.x=q*x*w*m;break;case f:case i:t>=0?(x=n(t),d.x=x*m,d.y=j*(y==i?x:-x)):d.x=d.y=0}}function E(c,d){var e,n,q,s,t=0;switch(y){case k:case l:if(c.x/=v,c.y*=v,s=r(c.x,c.y),s<b)return d.lam=0,d.phi=a.phi0,d;n=2*j(.5*s/w),e=h(n),n=g(n),c.x*=n,y==l?(t=e*o+c.y*n*p/s,c.y=s*p*e-c.y*o*n):(t=c.y*n/s,c.y=s*e);break;case f:c.y=-c.y;case i:if(q=c.x*c.x+c.y*c.y,!q)return d.lam=0,d.phi=a.phi0,d;t=1-q/u,y==i&&(t=-t)}return d.lam=m(c.x,c.y),d.phi=hc(j(t),x),d}function F(c,d){var j,m,q;switch(q=g(c.phi),m=h(c.phi),j=h(c.lam),y){case k:case l:y==k?d.y=1+m*j:d.y=1+o*q+p*m*j,d.y<=b&&aa(),d.y=n(2/d.y),d.x=d.y*m*g(c.lam),d.y*=y==k?q:p*q-o*m*j;break;case f:j=-j;case i:e(c.phi+a.phi0)<b&&aa(),d.y=C-.5*c.phi,d.y=2*(y==i?h(d.y):g(d.y)),d.x=d.y*g(c.lam),d.y*=j}}function G(c,d){var q,n=0,s=0;switch(q=r(c.x,c.y),(d.phi=.5*q)>1&&ba(),d.phi=2*j(d.phi),y!=l&&y!=k||(s=g(d.phi),n=h(d.phi)),y){case k:d.phi=e(q)<=b?0:j(c.y*s/q),c.x*=s,c.y=n*q;break;case l:d.phi=e(q)<=b?a.phi0:j(n*o+c.y*s*p/q),c.x*=s*p,c.y=(n-g(d.phi)*o)*q;break;case f:c.y=-c.y,d.phi=D-d.phi;break;case i:d.phi-=D}d.lam=0!=c.y||y!=k&&y!=l?m(c.x,c.y):0}var o,p,q,s,t,u,v,w,x,y,z,A,b=1e-10,f=0,i=1,k=2,l=3;if(z=e(a.phi0),y=e(z-D)<b?a.phi0<0?i:f:e(z)<b?k:l,a.es){switch(a.e=n(a.es),u=Ob(1,a.e,a.one_es),t=.5/(1-a.es),x=gc(a.es),y){case f:case i:v=1;break;case k:v=1/(w=n(.5*u)),q=1,s=.5*u;break;case l:w=n(.5*u),A=g(a.phi0),o=Ob(A,a.e,a.one_es)/u,p=n(1-o*o),v=h(a.phi0)/(n(1-a.es*A*A)*w*p),s=(q=w)/v,q*=v}a.inv=E,a.fwd=B}else y==l&&(o=g(a.phi0),p=h(a.phi0)),a.inv=G,a.fwd=F}function Hc(a){Jc(a,!1)}function Ic(a){Jc(a,!0)}function Jc(a,b){function c(b,c){c.x=b.lam/a.a,c.y=b.phi/a.a}function d(b,c){c.lam=b.x*a.a,c.phi=b.y*a.a}a.x0=0,a.y0=0,a.is_latlong=1,b?(a.inv=c,a.fwd=d):(a.inv=d,a.fwd=c)}function Kc(a,b,c){return b*=c,i(.5*(D-a))/o((1-b)/(1+b),.5*c)}function Lc(a){function y(c,d){var j,f=c.lam;e(e(c.phi)-D)<b?(c.phi*p<=0&&aa(),j=0):j=t*(u?o(Kc(c.phi,g(c.phi),a.e),p):o(i(C+.5*c.phi),-p)),f*=p,d.x=a.k0*(j*g(f)),d.y=a.k0*(s-j*h(f))}function z(b,c){var f,d=b.x,e=b.y;d/=a.k0,e/=a.k0,e=s-e,f=r(d,e),0!=f?(p<0&&(f=-f,d=-d,e=-e),u?(c.phi=Nc(o(f/t,1/p),a.e),c.phi==w&&ba()):c.phi=2*l(o(t/f,1/p))-D,c.lam=m(d,e)/p):(c.lam=0,c.phi=p>0?D:-D)}var c,d,f,j,k,p,s,t,u,v,x,b=1e-10;a.inv=z,a.fwd=y,j=la(a.params,"rlat_1"),la(a.params,"tlat_2")?k=la(a.params,"rlat_2"):(k=j,la(a.params,"tlat_0")||(a.phi0=j)),e(j+k)<b&&ea(-21),p=d=g(j),c=h(j),f=e(j-k)>=b,(u=0!=a.es)?(a.e=n(a.es),x=Pb(d,c,a.es),v=Kc(j,d,a.e),f&&(d=g(k),p=q(x/Pb(d,h(k),a.es)),p/=q(v/Kc(k,d,a.e))),t=s=x*o(v,-p)/p,s*=e(e(a.phi0)-D)<b?0:o(Kc(a.phi0,g(a.phi0),a.e),p)):(f&&(p=q(c/h(k))/q(i(C+.5*k)/i(C+.5*j))),t=c*o(i(C+.5*j),p)/p,s=e(e(a.phi0)-D)<b?0:t*o(i(C+.5*a.phi0),-p))}function Mc(a){function g(a,g){g.y=a.phi-c,e(g.y)<b?g.x=a.lam*d:(g.x=C+.5*a.phi,e(g.x)<b||e(e(g.x)-D)<b?g.x=0:g.x=a.lam*g.y/q(i(g.x)/f))}function j(a,g){g.phi=a.y+c,e(a.y)<b?g.lam=a.x/d:(g.lam=C+.5*g.phi,e(g.lam)<b||e(e(g.lam)-D)<b?g.lam=0:g.lam=a.x*q(i(g.lam)/f)/a.y)}var c,d,f,b=1e-8;c=la(a.params,"rlat_1"),d=h(c),f=i(C+.5*c),d<b&&ea(-22),a.fwd=g,a.inv=j,a.es=0}function Nc(a,b){var h,i,c=15,d=1e-10,e=.5*b,f=D-2*Math.atan(a),g=c;do h=b*Math.sin(f),i=D-2*Math.atan(a*Math.pow((1-h)/(1+h),e))-f,f+=i;while(Math.abs(i)>d&&--g);return g<=0&&_(-18),f}function Oc(a){function f(c,d){e(e(c.phi)-D)<=b&&aa(),d.x=a.k0*c.lam,d.y=-a.k0*q(Kc(c.phi,g(c.phi),a.e))}function h(b,c){c.phi=Nc(Math.exp(-b.y/a.k0),a.e),c.phi===w&&ba(),c.lam=b.x/a.k0}function i(c,d){Math.abs(Math.abs(c.phi)-D)<=b&&aa(),d.x=a.k0*c.lam,d.y=a.k0*Math.log(Math.tan(C+.5*c.phi))}function j(b,c){c.phi=D-2*Math.atan(Math.exp(-b.y/a.k0)),c.lam=b.x/a.k0}var b=1e-10,c=0,d=la(a.params,"tlat_ts");d&&(c=la(a.params,"rlat_ts"),c>=D&&ea(-24)),a.es?(d&&(a.k0=Pb(Math.sin(c),Math.cos(c),a.es)),a.inv=h,a.fwd=f):(a.inv=j,a.fwd=i)}function Pc(a){function b(a,b){b.x=a.lam,b.y=1.25*q(i(C+.4*a.phi))}function c(a,b){b.lam=a.x,b.phi=2.5*(l(p(.8*a.y))-C)}a.fwd=b,a.inv=c,a.es=0}function Qc(a){Uc(a,Tc(a,D))}function Rc(a){Uc(a,Tc(a,x/3))}function Sc(a){var b={C_x:.90977,C_y:1.65014,C_p:3.00896};Uc(a,b)}function Tc(a,b){var c=g(b),d=b+b,e=n(F*c/(d+g(d)));return{C_x:2*e/x,C_y:e/c,C_p:d+g(d)}}function Uc(a,b){function f(a,f){var i,j,k;for(i=b.C_p*g(a.phi),k=c;k&&(a.phi-=j=(a.phi+g(a.phi)-i)/(1+h(a.phi)),!(e(j)<d));--k);k?a.phi*=.5:a.phi=a.phi<0?-D:D,f.x=b.C_x*a.lam*h(a.phi),f.y=b.C_y*g(a.phi)}function i(a,c){c.phi=Wb(a.y/b.C_y),c.lam=a.x/(b.C_x*h(c.phi)),e(c.lam)-x<R?(c.phi+=c.phi,c.phi=Wb((c.phi+g(c.phi))/b.C_p)):c.lam=c.phi=w}var c=10,d=1e-7;a.fwd=f,a.inv=i,a.es=0}function Vc(a){function t(a,e){var m,n;m=a.phi*a.phi,n=m*m,e.x=a.lam*(b+m*(c+m*(d+n*m*(f+m*g)))),e.y=a.phi*(h+m*(i+n*(j+k*m+l*n)))}function u(a,t){var w,x,y,z,A,B,u=a.x,v=a.y;for(v>s?v=s:v<-s&&(v=-s),w=v;y=w*w,z=y*y,A=w*(h+y*(i+z*(j+k*y+l*z)))-v,B=m+y*(n+z*(o+p*y+q*z)),w-=x=A/B,!(e(x)<r););t.phi=w,y=w*w,t.lam=u/(b+y*(c+y*(d+y*y*y*(f+y*g))))}var b=.8707,c=-.131979,d=-.013791,f=.003971,g=-.001529,h=1.007226,i=.015085,j=-.044475,k=.028874,l=-.005916,m=h,n=3*i,o=7*j,p=9*k,q=11*l,r=1e-11,s=.8707*.52*x;a.es=0,a.fwd=t,a.inv=u}function Wc(a){function s(a,e){var m,n,o;m=a.phi*a.phi,n=m*m,o=m*n,e.x=a.lam*(b+c*m+o*o*(d+f*m+g*n+h*o)),e.y=a.phi*(i+n*n*(j+k*m+l*n))}function t(a,s){var v,w,x,y,z,A,B,t=a.x,u=a.y;for(u>r?u=r:u<-r&&(u=-r),v=u;x=v*v,y=x*x,A=v*(i+y*y*(j+k*x+l*y))-u,B=m+y*y*(n+o*x+p*y),v-=w=A/B,!(e(w)<q););s.phi=v,x=v*v,y=x*x,z=x*y,s.lam=t/(b+c*x+z*z*(d+f*x+g*y+h*z))}var b=.84719,c=-.13063,d=-.04515,f=.05494,g=-.02326,h=.00331,i=1.01183,j=-.02625,k=.01926,l=-.00396,m=i,n=9*j,o=11*k,p=13*l,q=1e-11,r=.45334622460635143*x;a.es=0,a.fwd=s,a.inv=t}function Xc(a){function d(a,b){b.x=.5*a.lam*(1+h(a.phi)),b.y=2*(a.phi-i(.5*a.phi))}function f(a,d){var f,g,j,k;for(j=.5*a.y,k=b;k>0&&(g=h(.5*d.phi),d.phi-=f=(d.phi-i(d.phi/2)-j)/(1-.5/(g*g)),!(e(f)<c));--k);k?d.lam=2*a.x/(1+h(d.phi)):(d.phi=j<0?-D:D,d.lam=2*a.x)}var b=9,c=1e-7;a.es=0,a.fwd=d,a.inv=f}function Yc(a){$c(a,la(a.params,"dh"))}function Zc(a){var b=la(a.params,"dtilt")*z,c=la(a.params,"dazi")*z,d=la(a.params,"dh");$c(a,d,b,c)}function $c(a,b,c,d){function C(a,b){var c,d,e,j,m;switch(e=g(a.phi),d=h(a.phi),c=h(a.lam),p){case l:b.y=q*e+s*d*c;break;case k:b.y=d*c;break;case i:b.y=-e;break;case f:b.y=e}switch(b.y<u&&aa(),b.y=v/(t-b.y),b.x=b.y*d*g(a.lam),p){case l:b.y*=s*e-q*d*c;break;case k:b.y*=e;break;case f:c=-c;case i:b.y*=d*c}o&&(j=b.y*y+b.x*z,m=1/(j*A*x+B),b.x=(b.x*y-b.y*z)*B*m,b.y=j*m)}function E(b,c){var d,h,u,x,C,D;if(o&&(D=1/(v-b.y*A),x=v*b.x*D,C=v*b.y*B*D,b.x=x*y+C*z,b.y=C*y-x*z),d=r(b.x,b.y),(u=1-d*d*w)<0&&ba(),u=(t-n(u))/(v/d+d/v),h=n(1-u*u),e(d)<=R)c.lam=0,c.phi=a.phi0;else{switch(p){case l:c.phi=j(h*q+b.y*u*s/d),b.y=(h-q*g(c.phi))*d,b.x*=u*s;break;case k:c.phi=j(b.y*u/d),b.y=h*d,b.x*=u;break;case f:c.phi=j(h),b.y=-b.y;break;case i:c.phi=-j(h)}c.lam=m(b.x,b.y)}}var p,q,s,t,u,v,w,x,y,z,A,B,f=0,i=1,k=2,l=3,o=!isNaN(c)&&!isNaN(d);b<=0&&ea(-30),o&&(y=h(d),z=g(d),B=h(c),A=g(c)),e(e(a.phi0)-D)<R?p=a.phi0<0?i:f:e(a.phi0)<R?p=k:(p=l,q=g(a.phi0),s=h(a.phi0)),v=b/a.a,t=1+v,u=1/t,x=1/v,w=(t+1)*x,a.fwd=C,a.inv=E,a.es=0}function _c(a){function v(a,b){var c;b.y=g(a.lam),c=h(a.lam),b.x=l((i(a.phi)*s+r*b.y)/c),c<0&&(b.x+=x),b.x*=q,b.y=p*(r*g(a.phi)-s*h(a.phi)*b.y)}function w(a,b){var c,d;a.y/=p,a.x/=q,c=n(1-a.y*a.y),b.phi=j(a.y*r+c*s*(d=g(a.x))),b.lam=m(c*r*d-a.y*s,c*h(a.x))}var c,d,e,f,k,o,p,q,r,s,t,u,b=0;p=a.a/a.k0,q=a.a*a.k0,la(a.params,"talpha")?(o=la(a.params,"ralpha"),k=la(a.params,"rlonc"),t=l(-h(o)/(-g(b)*g(o)))+k,r=j(h(b)*g(o))):(c=la(a.params,"rlat_1"),d=la(a.params,"rlat_2"),e=la(a.params,"rlon_1"),f=la(a.params,"rlon_2"),t=m(h(c)*g(d)*h(e)-g(c)*h(d)*h(f),g(c)*h(d)*g(f)-h(c)*g(d)*g(e)),r=l(-h(t-e)/i(c))),a.lam0=t+D,s=h(r),r=g(r),u=h(t),t=g(t),a.es=0,a.fwd=v,a.inv=w}function ad(a){function da(c,d){var f,i,j,k,l,n,p,r;e(e(c.phi)-D)>R?(l=P/o(Kc(c.phi,g(c.phi),a.e),O),n=1/l,f=.5*(l-n),i=.5*(l+n),k=g(O*c.lam),j=(f*V-k*W)/i,e(e(j)-1)<R&&aa(),r=.5*S*q((1-j)/(1+j)),n=h(O*c.lam),p=e(n)<b?N*c.lam:S*m(f*W+k*V,n)):(r=c.phi>0?Z:$,p=S*c.phi),ca?(d.x=p,d.y=r):(p-=_,d.x=r*Y+p*X,d.y=p*Y-r*X)}function fa(b,c){var d,f,i,j,k,l,q;ca?(f=b.y,d=b.x):(f=b.x*Y-b.y*X,d=b.y*Y+b.x*X+_),i=p(-T*f),j=.5*(i-1/i),k=.5*(i+1/i),l=g(T*d),q=(l*W+j*V)/k,e(e(q)-1)<R?(c.lam=0,c.phi=q<0?-D:D):(c.phi=P/n((1+q)/(1-q)),(c.phi=Nc(o(c.phi,1/O),a.e))==w&&ba(),c.lam=-U*m(j*W-l*V,h(T*d)))}var c,d,f,k,r,s,t,u,v,y,A,K,L,N,O,P,Q,S,T,U,V,W,X,Y,Z,$,_,ca,b=1e-7,z=0,B=0,E=0,G=0,H=0,I=0,J=0,M=0;ca=la(a.params,"tno_rot"),0!=(K=la(a.params,"talpha"))&&(J=la(a.params,"ralpha")),0!=(L=la(a.params,"tgamma"))&&(z=la(a.params,"rgamma")),K||L?(B=la(a.params,"rlonc"),M=la(a.params,"tno_off")||la(a.params,"tno_uoff"),M&&(la(a.params,"sno_uoff"),la(a.params,"sno_off"))):(E=la(a.params,"rlon_1"),H=la(a.params,"rlat_1"),G=la(a.params,"rlon_2"),I=la(a.params,"rlat_2"),(e(H-I)<=b||(c=e(H))<=b||e(c-D)<=b||e(e(a.phi0)-D)<=b||e(e(I)-D)<=b)&&ea(-33)),d=n(a.one_es),e(a.phi0)>R?(u=g(a.phi0),f=h(a.phi0),c=1-a.es*u*u,O=f*f,O=n(1+a.es*O*O/a.one_es),N=O*a.k0*d/c,k=O*d/(f*n(c)),(r=k*k-1)<=0?r=0:(r=n(r),a.phi0<0&&(r=-r)),P=r+=k,P*=o(Kc(a.phi0,u,a.e),O)):(O=1/d,N=a.k0,P=k=r=1),K||L?(K?(A=j(g(J)/k),L||(z=J)):J=j(k*g(A=z)),((c=e(J))<=b||e(c-x)<=b||e(e(a.phi0)-D)<=b)&&ea(-32),a.lam0=B-j(.5*(r-1/r)*i(A))/O):(s=o(Kc(H,g(H),a.e),O),t=o(Kc(I,g(I),a.e),O),r=P/s,v=(t-s)/(t+s),y=P*P,y=(y-t*s)/(y+t*s),(c=E-G)<-x?G-=F:c>x&&(G+=F),a.lam0=kb(.5*(E+G)-l(y*i(.5*O*(E-G))/v)/O),A=l(2*g(O*kb(E-a.lam0))/(r-1/r)),z=J=j(k*g(A))),V=g(A),W=h(A),X=g(z),Y=h(z),T=1/(S=N*(U=1/O)),Q=N*O,M?_=0:(_=e(S*m(n(k*k-1),h(J))),a.phi0<0&&(_=-_)),r=.5*A,Z=S*q(i(C-r)),$=S*q(i(C+r)),a.fwd=da,a.inv=fa}function bd(a){function o(j,k){var m,n,o;switch(n=h(j.phi),m=h(j.lam),l.mode){case f:n*m<-b&&aa(),k.y=g(j.phi);break;case i:l.sinph0*(o=g(j.phi))+l.cosph0*n*m<-b&&aa(),k.y=l.cosph0*o-l.sinph0*n*m;break;case c:m=-m;case d:e(j.phi-a.phi0)-b>D&&aa(),k.y=n*m}k.x=n*g(j.lam)}function p(g,h){var o,p,q;if((q=o=r(g.x,g.y))>1&&(q-1>b&&ba(),q=1),p=n(1-q*q),e(o)<=b)h.phi=a.phi0,h.lam=0;else{switch(l.mode){case c:g.y=-g.y,h.phi=k(q);break;case d:h.phi=-k(q);break;case f:case i:l.mode==f?(h.phi=g.y*q/o,g.x*=q,g.y=p*o):(h.phi=p*l.sinph0+g.y*q*l.cosph0/o,g.y=(p-l.sinph0*h.phi)*o,g.x*=q*l.cosph0),e(h.phi)>=1?h.phi=h.phi<0?-D:D:h.phi=j(h.phi)}h.lam=0!=g.y||l.mode!=i&&l.mode!=f?m(g.x,g.y):0==g.x?0:g.x<0?-D:D}}var b=1e-10,c=0,d=1,f=2,i=3,l={};e(e(a.phi0)-D)<=b?l.mode=a.phi0<0?d:c:e(a.phi0)>b?(l.mode=i,l.sinph0=g(a.phi0),l.cosph0=h(a.phi0)):l.mode=f,a.fwd=o,a.inv=p,a.es=0}function cd(a){function o(c,d){var f,i,j;e(c.phi)<=b?(d.x=c.lam,d.y=-l):(i=g(c.phi),f=e(j=h(c.phi))>b?Pb(i,j,a.es)/i:0,d.x=f*g(c.lam*=i),d.y=Ub(c.phi,i,j,m)-l+f*(1-h(c.lam)))}function p(c,d){var q,r,s,t,u,v,w,x,y,z,o=c.x,p=c.y;if(p+=l,e(p)<=b)d.lam=o,d.phi=0;else{for(q=p*p+o*o,d.phi=p,z=f;z>0&&(s=g(d.phi),u=s*(t=h(d.phi)),e(t)<k&&ba(),r=s*(x=n(1-a.es*s*s))/t,v=Ub(d.phi,s,t,m),w=v*v+q,x=a.one_es/(x*x*x),d.phi+=y=(v+v+r*w-2*p*(r*v+1))/(a.es*u*(w-2*p*v)/r+2*(p-v)*(r*x-1/u)-x-x),!(e(y)<=k));--z);z||ba(),r=g(d.phi),d.lam=j(o*i(d.phi)*n(1-a.es*r*r))/g(d.phi)}}function q(c,d){var f,j;e(c.phi)<=b?(d.x=c.lam,d.y=l):(f=1/i(c.phi),d.x=g(j=c.lam*g(c.phi))*f,d.y=c.phi-a.phi0+f*(1-h(j)))}function r(f,h){var k,l,m,n;if(e(f.y=a.phi0+f.y)<=b)h.lam=f.x,h.phi=0;else{h.phi=f.y,k=f.x*f.x+f.y*f.y,n=d;do m=i(h.phi),h.phi-=l=(f.y*(h.phi*m+1)-h.phi-.5*(h.phi*h.phi+k)*m)/((h.phi-f.y)/m-1);while(e(l)>c&&--n);n||ba(),h.lam=j(f.x*i(h.phi))/g(h.phi)}}var l,m,b=1e-10,c=1e-10,d=10,f=20,k=1e-12;a.es?(m=Tb(a.es),l=Ub(a.phi0,g(a.phi0),h(a.phi0),m),a.fwd=o,a.inv=p):(l=-a.phi0,a.fwd=q,a.inv=r)}function dd(a){function m(a,k){var l,m;l=f((m=e(a.phi))*h),l>=j&&(l=j-1),m=y*(m-i*l),k.x=o(b[l],m)*d*a.lam,k.y=o(c[l],m)*g,a.phi<0&&(k.y=-k.y)}function n(a,h){var i,m,n,q;if(h.lam=a.x/d,h.phi=e(a.y/g),h.phi>=1)h.phi>k?ba():(h.phi=a.y<0?-D:D,h.lam/=b[j][0]);else{for(q=f(h.phi*j);;)if(c[q][0]>h.phi)--q;else{if(!(c[q+1][0]<=h.phi))break;++q}for(n=new Float32Array(c[q]),i=5*(h.phi-n[0])/(c[q+1][0]-n[0]),n[0]-=h.phi;i-=m=o(n,i)/p(n,i),!(e(m)<l););h.phi=(5*q+i)*z,a.y<0&&(h.phi=-h.phi),h.lam/=o(b[q],i)}}function o(a,b){return a[0]+b*(a[1]+b*(a[2]+b*a[3]))}function p(a,b){return a[1]+b*(a[2]+a[2]+3*b*a[3])}function q(a){return a.map(function(a){return new Float32Array(a)})}var b=q([[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]]),c=q([[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]]),d=.8487,g=1.3523,h=11.459155902616464,i=.08726646259971647,j=18,k=1.000001,l=1e-8;a.es=0,a.fwd=m,a.inv=n}function ed(a){a.phi0=la(a.params,"bsouth")?-D:D,a.k0=.994,a.x0=2e6,a.y0=2e6,a.lam0=0,a.es||ea(-34),gd(a,D)}function fd(a){var b=la(a.params,"tlat_ts")?la(a.params,"rlat_ts"):D;gd(a,b)}function gd(a,b){function E(b,c){var d,e,j,k,m,f=0,i=0;switch(d=h(b.lam),e=g(b.lam),m=g(b.phi),B!=s&&B!=t||(f=g(j=2*l(I(b.phi,m,a.e))-D),i=h(j)),B){case s:k=A/(z*(1+y*f+z*i*d)),c.y=k*(z*f-y*i*d),c.x=k*i;break;case t:k=2*A/(1+i*d),c.y=k*f,c.x=k*i;break;case p:b.phi=-b.phi,d=-d,m=-m;case q:c.x=A*Kc(b.phi,m,a.e),c.y=-c.x*d}c.x=c.x*e}function F(a,b){var f=a.phi,j=g(f),k=h(f),l=h(a.lam),m=g(a.lam);switch(B){case t:case s:B==t?b.y=1+k*l:b.y=1+w*j+x*k*l,b.y<=c&&aa(),b.x=(b.y=A/b.y)*k*m,b.y*=B==t?j:x*j-w*k*l;break;case q:l=-l,f=-f;case p:e(f-D)<d&&aa(),b.x=m*(b.y=A*i(C+.5*f)),b.y*=l}}function G(b,c){var x,C,E,F,n=(c.phi,0),u=0,v=0,w=0;switch(E=r(b.x,b.y),B){case s:case t:x=h(n=2*m(E*z,A)),C=g(n),u=j(0==E?x*y:x*y+b.y*C*z/E),n=i(.5*(D+u)),b.x*=C,b.y=E*z*x-b.y*y*C,w=D,v=.5*a.e;break;case q:b.y=-b.y;case p:u=D-2*l(n=-E/A),w=-D,v=-.5*a.e}for(F=0;F<f;F++,u=c.phi)if(C=a.e*g(u),c.phi=2*l(n*o((1+C)/(1-C),v))-w,e(u-c.phi)<k)return B==p&&(c.phi=-c.phi),void(c.lam=0==b.x&&0==b.y?0:m(b.x,b.y));ba()}function H(b,d){var f,i,k,n;switch(k=g(f=2*l((i=r(b.x,b.y))/A)),n=h(f),d.lam=0,B){case t:e(i)<=c?d.phi=0:d.phi=j(b.y*k/i),0==n&&0==b.x||(d.lam=m(b.x*k,n*i));break;case s:e(i)<=c?d.phi=a.phi0:d.phi=j(n*w+b.y*k*x/i),0==(f=n-w*g(d.phi))&&0==b.x||(d.lam=m(b.x*k*x,f*i));break;case q:b.y=-b.y;case p:e(i)<=c?d.phi=a.phi0:d.phi=j(B==p?-n:n),d.lam=0==b.x&&0==b.y?0:m(b.x,b.y)}}function I(a,b,c){return b*=c,i(.5*(D+a))*o((1-b)/(1+b),.5*c)}var u,v,w,x,y,z,A,B,c=1e-10,d=1e-8,f=8,k=1e-10,p=0,q=1,s=2,t=3;if(B=e((v=e(a.phi0))-D)<c?a.phi0<0?p:q:v>c?s:t,b=e(b),a.es){switch(B){case q:case p:e(b-D)<c?A=2*a.k0/n(o(1+a.e,1+a.e)*o(1-a.e,1-a.e)):(A=h(b)/Kc(b,v=g(b),a.e),v*=a.e,A/=n(1-v*v));break;case t:case s:v=g(a.phi0),u=2*l(I(a.phi0,v,a.e))-D,v*=a.e,A=2*a.k0*h(a.phi0)/n(1-v*v),y=g(u),z=h(u)}a.fwd=E,a.inv=G}else{switch(B){case s:w=g(a.phi0),x=h(a.phi0);case t:A=2*a.k0;break;case p:case q:A=e(b-D)>=c?h(b)/i(C-.5*b):2*a.k0}a.fwd=F,a.inv=H}}function hd(a,b){return o((1-a)/(1+a),b)}function id(a,b){var c=a*a,d=g(b),e=h(b),f=n(1-c)/(1-c*d*d),k=n(1+c*e*e*e*e/(1-c)),l=j(d/k),m=.5*k*a,p=i(.5*l+C)/(o(i(.5*b+C),k)*hd(a*d,m));return{e:a,K:p,C:k,chi:l,ratexp:m,rc:f}}function jd(a,b){return{phi:2*l(b.K*o(i(.5*a.phi+C),b.C)*hd(b.e*g(a.phi),b.ratexp))-D,lam:b.C*a.lam}}function kd(a,b){var j,k,c=20,d=1e-14,h=(a.phi,o(i(.5*a.phi+C)/b.K,1/b.C));for(a.lam/=b.C,j=c;j>0&&(k=2*l(h*hd(b.e*g(a.phi),-.5*b.e))-D,!(e(k-a.phi)<d));--j)a.phi=k;j||_(-17)}function ld(a){function k(c,d){var j,k,l,m;c=jd(c,b),k=g(c.phi),j=h(c.phi),l=h(c.lam),m=a.k0*e/(1+f*k+i*j*l),d.x=m*j*g(c.lam),d.y=m*(i*k-f*j*l)}function l(d,k){var o,p,q,s,l=d.x/a.k0,n=d.y/a.k0;(o=r(l,n))?(p=2*m(o,e),q=g(p),s=h(p),k.phi=j(s*f+n*q*i/o),k.lam=m(l*q,o*i*s-n*f*q)):(k.phi=c,k.lam=0),kd(k,b)}var b=id(a.e,a.phi0),c=b.chi,d=b.rc,e=2*d,f=g(c),i=h(c);a.fwd=k,a.inv=l}function md(a){function b(b,c){c.x=h(b.phi)*g(b.lam)/a.k0,c.y=a.k0*(m(i(b.phi),h(b.lam))-a.phi0)}function c(b,c){var d;b.y=b.y/a.k0+a.phi0,b.x*=a.k0,d=n(1-b.x*b.x),c.phi=j(d*g(b.y)),c.lam=m(b.x,d*h(b.y))}a.es=0,a.fwd=b,a.inv=c}function nd(a){a.es=0,a.fwd=function(a,b){var c=i(a.phi/2),d=g(C*c);b.x=a.lam*(.74482-.34588*d*d),b.y=1.70711*c},a.inv=function(a,b){var c=a.y/1.70711,d=g(C*c);b.lam=a.x/(.74482-.34588*d*d),b.phi=2*l(c)}}function od(a){function w(j,k){var m,p,q,w,x,y;return j.lam<-D||j.lam>D?void _(-14):(m=g(j.phi),p=h(j.phi),q=e(p)>b?m/p:0,q*=q,w=p*j.lam,x=w*w,w/=n(1-a.es*m*m),y=t*p*p,k.x=a.k0*w*(c+f*x*(1-q+y+l*x*(5+q*(q-18)+y*(14-58*q)+r*x*(61+q*(q*(179-q)-479))))),void(k.y=a.k0*(Ub(j.phi,m,p,v)-u+m*w*j.lam*d*(1+i*x*(5-q+y*(9+4*y)+o*x*(61+q*(q-58)+y*(270-330*q)+s*x*(1385+q*(q*(543-q)-3111))))))))}function x(c,d){var f,i;return c.lam<-D||c.lam>D?void _(-14):(i=h(c.phi),f=i*g(c.lam),e(e(f)-1)<=b&&aa(),d.x=u*q((1+f)/(1-f)),d.y=i*h(c.lam)/n(1-f*f),f=e(d.y),f>=1?f-1>b?aa():d.y=0:d.y=k(d.y),c.phi<0&&(d.y=-d.y),void(d.y=t*(d.y-a.phi0)))}function y(b,j){var k,m,p,q,w,x,y;j.phi=Vb(u+b.y/a.k0,a.es,v),e(j.phi)>=D?(j.phi=b.y<0?-D:D,j.lam=0):(x=g(j.phi),p=h(j.phi),y=e(p)>1e-10?x/p:0,k=t*p*p,q=b.x*n(m=1-a.es*x*x)/a.k0,m*=y,y*=y,w=q*q,j.phi-=m*w/(1-a.es)*d*(1-w*i*(5+y*(3-9*k)+k*(1-4*k)-w*o*(61+y*(90-252*k+45*y)+46*k-w*s*(1385+y*(3633+y*(4095+1574*y)))))),j.lam=q*(c-w*f*(1+2*y+k-w*l*(5+y*(28+24*y+8*k)+6*k-w*r*(61+y*(662+y*(1320+720*y))))))/p)}function z(b,c){var d=p(b.x/t),e=.5*(d-1/d);d=h(a.phi0+b.y/t),c.phi=j(n((1-d*d)/(1+e*e))),b.y<0&&(c.phi=-c.phi),c.lam=e||d?m(e,d):0}var t,u,v,b=1e-10,c=1,d=.5,f=.16666666666666666,i=.08333333333333333,l=.05,o=.03333333333333333,r=.023809523809523808,s=.017857142857142856;a.es?((v=Tb(a.es))||e_error_0(),u=Ub(a.phi0,g(a.phi0),h(a.phi0),v),t=a.es/(1-a.es),a.fwd=w,a.inv=y):(t=a.k0,u=.5*t,a.fwd=x,a.inv=z)}function pd(a){function E(a,i){var m,p,q,r,s,t,u;t=g(a.phi),u=h(a.phi),p=Xb(c*t+b*u*h(r=a.lam+o)),q=Xb(e*t+d*u*h(s=a.lam-o)),p*=p,q*=q,i.x=l*(m=p-q),m=n-m,i.y=l*Yb(4*n*q-m*m),f*t-u*(j*g(r)-k*g(s))<0&&(i.y=-i.y)}function F(a,b){var c,d,e,f,i,j;c=h(r(a.y,a.x+p)),d=h(r(a.y,a.x-p)),e=c+d,f=c-d,b.lam=-m(f,e*q),b.phi=Xb(r(q*e,f)*s),a.y<0&&(b.phi=-b.phi),j=g(b.phi),i=h(b.phi),b.phi=Wb(u*j+t*i*(e=h(b.lam-=v))),b.lam=m(i*g(b.lam),u*i*e-t*j)+w}var b,c,d,e,f,j,k,l,n,o,p,q,s,t,u,v,w,x,y,z,A,B,C;z=la(a.params,"rlat_1"),x=la(a.params,"rlon_1"),A=la(a.params,"rlat_2"),y=la(a.params,"rlon_2"),z==A&&x==y&&ea(-25),a.lam0=kb(.5*(x+y)),o=kb(y-x),b=h(z),d=h(A),c=g(z),e=g(A),j=b*e,k=c*d,f=b*d*g(o),n=Xb(c*e+b*d*h(o)),p=.5*n,B=m(d*g(o),b*e-c*d*h(o)),t=h(C=Wb(b*g(B))),u=g(C),v=kb(m(b*h(B),c)-p),o*=.5,w=D-m(g(B)*c,h(B))-o,q=i(p),s=.5/g(p),l=.5/n,n*=n,a.fwd=E,a.inv=F,a.es=0}function qd(a){sd(a,.8660254037844386)}function rd(a){var b=la(a.params,"dn");(b<=0||b>1)&&ea(-40),sd(a,b)}function sd(a,b){function e(a,e){var f=Wb(b*g(a.phi));e.x=c*a.lam*h(f),e.y=d*f}function f(a,e){a.y/=d,e.phi=Wb(g(a.y)/b),e.lam=a.x/(c*h(a.y))}var c=.8773826753,d=1.139753528477/b;a.es=0,a.fwd=e,a.inv=f}function td(a){function p(a,c){var d,f,g,h,k;k=e(a.phi/D),k-b>1&&aa(),k>1&&(k=1),e(a.phi)<=b?(c.x=a.lam,c.y=0):e(a.lam)<=b||e(k-1)<b?(c.x=0,c.y=x*i(.5*j(k)),a.phi<0&&(c.y=-c.y)):(d=.5*e(x/a.lam-a.lam/x),f=d*d,g=n(1-k*k),g/=k+g-1,h=g*g,k=g*(2/k-1),k*=k,c.x=g-k,g=k+f,c.x=x*(d*c.x+n(f*c.x*c.x-g*(h-k)))/g,a.lam<0&&(c.x=-c.x),c.y=e(c.x/x),c.y=1-c.y*(c.y+2*d),c.y<-b&&aa(),c.y<0?c.y=0:c.y=n(c.y)*(a.phi<0?-x:x))}function q(a,d){var i,j,p,q,r,s,t,u,v,w,y,z,A;return z=a.x*a.x,(y=e(a.y))<b?(d.phi=0,i=z*z+m*(z+o),d.lam=e(a.x)<=b?0:.5*(z-l+n(i))/a.x,d):(A=a.y*a.y,u=z+A,t=u*u,p=-x*y*(u+l),r=t+F*(y*u+x*(A+x*(y+D))),q=p+l*(u-3*A),j=x*y,q/=r,s=p/r-c*q*q,v=2*n(-c*s),w=f*q*q*q+(j*j-c*q*p)/r,void((i=e(w=3*w/(s*v)))-b<=1?(w=i>1?w>0?0:x:k(w),d.phi=x*(v*h(w*c+g)-c*q),a.y<0&&(d.phi=-d.phi),i=t+m*(z-A+o),d.lam=e(a.x)<=b?0:.5*(u-l+(i<=0?0:n(i)))/a.x):ba()))}var b=1e-10,c=.3333333333333333,f=.07407407407407407,g=4.188790204786391,l=9.869604401089358,m=19.739208802178716,o=4.934802200544679;a.fwd=p,a.inv=q}function ud(a){wd(a,!1)}function vd(a){wd(a,!0)}function wd(a,b){function d(a,d){var f,g,h,i;h=e(G*a.phi),i=(i=1-h*h)<0?0:n(i),e(a.lam)<c?(d.x=0,d.y=x*(a.phi<0?-h:h)/(1+i)):(g=.5*e(x/a.lam-a.lam/x),b?(f=h/(1+i),d.x=x*(n(g*g+1-f*f)-g),d.y=x*f):(f=(i*n(1+g*g)-g*i*i)/(1+g*g*h*h),d.x=x*f,d.y=x*n(1-f*(f+2*g)+c)),a.lam<0&&(d.x=-d.x),a.phi<0&&(d.y=-d.y))}var c=1e-10;a.fwd=d,a.es=0}function xd(a){a.es=0,a.fwd=function(a,b){var d,f,g,h,i,j,k,l,m,c=1e-10;e(a.phi)<c?(b.x=a.lam,b.y=0):e(a.lam)<c||e(e(a.phi)-D)<c?(b.x=0,b.y=a.phi):(g=e(G*a.phi),j=g*g,h=.5*(g*(8-g*(2+j))-5)/(j*(g-1)),k=h*h,l=G*a.lam,l+=1/l,l=n(l*l-4),e(a.lam)-D<0&&(l=-l),m=l*l,d=g+h,d*=d,f=g+3*h,i=d*(j+k*m-1)+(1-j)*(j*(f*f+4*k)+k*(12*g*h+4*k)),d=(l*(d+k-1)+2*n(i))/(4*d+m),
b.x=D*d,b.y=D*n(1+l*e(d)-d*d),a.lam<0&&(b.x=-b.x),a.phi<0&&(b.y=-b.y))}}function yd(a){function f(a,f){a.phi=Wb(d*g(e*a.phi)),f.x=b*a.lam*h(a.phi),f.y=c*a.phi}function i(a,f){f.phi=a.y/c,f.lam=a.x/(b*h(f.phi)),f.phi=Wb(g(f.phi)/d)/e}var b=.92483,c=1.38725,d=.88022,e=.8855;a.fwd=f,a.inv=i}function zd(a){function e(a,c){c.x=d*a.lam*h(b*a.phi),c.y=a.phi}function f(a,c){c.phi=a.y,c.lam=a.x/(d*h(b*c.phi))}var b=.6666666666666666,c=la(a.params,"rlat_ts"),d=h(c)/h(2*c/3);a.es=0,a.fwd=e,a.inv=f}function Ad(a){a.es=0,a.fwd=function(a,b){var c,d,e;c=j(b.y=.9063077870366499*g(a.phi)),b.x=2.66723*(d=h(c))*g(a.lam/=3),b.y*=1.24104*(e=1/n(.5*(1+d*h(a.lam)))),b.x*=e}}function Bd(a){function c(a,c){c.x=.5*a.lam*(b+h(a.phi)),c.y=a.phi}function d(a,c){c.phi=a.y,c.lam=2*a.x/(b+h(c.phi))}var b=h(la(a.params,"rlat_ts"));a.fwd=c,a.inv=d,a.es=0}function Cd(a){function f(a,f){var i,j,k,l=a.phi;for(f.y=l*G,i=x*g(l),l*=1.8,k=c;k&&(l-=j=(l+g(l)-i)/(1+h(l)),!(e(j)<d));--k);k?l*=.5:l=l<0?-D:D,f.x=.5*a.lam*(h(l)+b),f.y=C*(g(l)+f.y)}var b=h(la(a.params,"rlat_1")),c=10,d=1e-7;a.fwd=f,a.inv=null,a.es=0}var e=Math.abs,f=Math.floor,g=Math.sin,h=Math.cos,i=Math.tan,j=Math.asin,k=Math.acos,l=Math.atan,m=Math.atan2,n=Math.sqrt,o=Math.pow,p=Math.exp,q=Math.log,r=Math.hypot,s=Math.sinh,t=Math.cosh,w=(Math.min,Math.max,1/0),x=Math.PI,y=57.29577951308232,z=.017453292519943295,A=6378137,B=.0066943799901413165,C=x/4,D=x/2,F=2*x,G=2/x,I=0,J=1,K=2,L=3,M=4,N=-45,O=-47,R=1e-10,S=0,W={last_errno:0,debug_level:S,logger:null},X=["no arguments in initialization list","no options found in 'init' file","no colon in init= string","projection not named","unknown projection id","effective eccentricity = 1","unknown unit conversion id","invalid boolean param argument","unknown elliptical parameter name","reciprocal flattening (1/f) = 0","|radius reference latitude| > 90","squared eccentricity < 0","major axis or radius = 0 or not given","latitude or longitude exceeded limits","invalid x or y","improperly formed DMS value","non-convergent inverse meridional dist","non-convergent inverse phi2","acos/asin: |arg| >1+1e-14","tolerance condition error","conic lat_1 = -lat_2","lat_1 >= 90","lat_1 = 0","lat_ts >= 90","no distance between control points","projection not selected to be rotated","W <= 0 or M <= 0","lsat not in 1-5 range","path not in range","h <= 0","k <= 0","lat_0 = 0 or 90 or alpha = 90","lat_1=lat_2 or lat_1=0 or lat_2=90","elliptical usage required","invalid UTM zone number","arg(s) out of range for Tcheby eval","failed to find projection to be rotated","failed to load datum shift file","both n & m must be spec'd and > 0","n <= 0, n > 1 or not specified","lat_1 or lat_2 not specified","|lat_1| == |lat_2|","lat_0 is pi/2 from mean lat","unparseable coordinate system definition","geocentric transformation missing z or ellps","unknown prime meridian conversion id","illegal axis orientation combination","point not within available datum shift grids","invalid sweep axis, choose x or y"],$=[-14,-15,-17,-18,-19,-20,-27,-48],oa={},wa=[["WGS84","towgs84=0,0,0","WGS84",""],["GGRS87","towgs84=-199.87,74.79,246.62","GRS80","Greek_Geodetic_Reference_System_1987"],["NAD83","towgs84=0,0,0","GRS80","North_American_Datum_1983"],["NAD27","nadgrids=@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat","clrk66","North_American_Datum_1927"],["potsdam","towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7","bessel","Potsdam Rauenberg 1950 DHDN"],["carthage","towgs84=-263.0,6.0,431.0","clrk80ign","Carthage 1934 Tunisia"],["hermannskogel","towgs84=577.326,90.129,463.919,5.137,1.474,5.297,2.4232","bessel","Hermannskogel"],["ire65","towgs84=482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15","mod_airy","Ireland 1965"],["nzgd49","towgs84=59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993","intl","New Zealand Geodetic Datum 1949"],["OSGB36","towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894","airy","Airy 1830"],[null,null,null,null]],xa=[["greenwich","0dE"],["lisbon","9d07'54.862\"W"],["paris","2d20'14.025\"E"],["bogota","74d04'51.3\"W"],["madrid","3d41'16.58\"W"],["rome","12d27'8.4\"E"],["bern","7d26'22.5\"E"],["jakarta","106d48'27.79\"E"],["ferro","17d40'W"],["brussels","4d22'4.71\"E"],["stockholm","18d3'29.8\"E"],["athens","23d42'58.815\"E"],["oslo","10d43'22.5\"E"],[null,null]],Ba=[["MERIT","a=6378137.0","rf=298.257","MERIT 1983"],["SGS85","a=6378136.0","rf=298.257","Soviet Geodetic System 85"],["GRS80","a=6378137.0","rf=298.257222101","GRS 1980(IUGG, 1980)"],["IAU76","a=6378140.0","rf=298.257","IAU 1976"],["airy","a=6377563.396","b=6356256.910","Airy 1830"],["APL4.9","a=6378137.0","rf=298.25","Appl. Physics. 1965"],["NWL9D","a=6378145.0","rf=298.25","Naval Weapons Lab., 1965"],["mod_airy","a=6377340.189","b=6356034.446","Modified Airy"],["andrae","a=6377104.43","rf=300.0","Andrae 1876 (Den., Iclnd.)"],["aust_SA","a=6378160.0","rf=298.25","Australian Natl & S. Amer. 1969"],["GRS67","a=6378160.0","rf=298.2471674270","GRS 67(IUGG 1967)"],["bessel","a=6377397.155","rf=299.1528128","Bessel 1841"],["bess_nam","a=6377483.865","rf=299.1528128","Bessel 1841 (Namibia)"],["clrk66","a=6378206.4","b=6356583.8","Clarke 1866"],["clrk80","a=6378249.145","rf=293.4663","Clarke 1880 mod."],["clrk80ign","a=6378249.2","rf=293.4660212936269","Clarke 1880 (IGN)."],["CPM","a=6375738.7","rf=334.29","Comm. des Poids et Mesures 1799"],["delmbr","a=6376428","rf=311.5","Delambre 1810 (Belgium)"],["engelis","a=6378136.05","rf=298.2566","Engelis 1985"],["evrst30","a=6377276.345","rf=300.8017","Everest 1830"],["evrst48","a=6377304.063","rf=300.8017","Everest 1948"],["evrst56","a=6377301.243","rf=300.8017","Everest 1956"],["evrst69","a=6377295.664","rf=300.8017","Everest 1969"],["evrstSS","a=6377298.556","rf=300.8017","Everest (Sabah & Sarawak)"],["fschr60","a=6378166","rf=298.3","Fischer (Mercury Datum) 1960"],["fschr60m","a=6378155","rf=298.3","Modified Fischer 1960"],["fschr68","a=6378150","rf=298.3","Fischer 1968"],["helmert","a=6378200","rf=298.3","Helmert 1906"],["hough","a=6378270.0","rf=297","Hough"],["intl","a=6378388.0","rf=297","International 1909 (Hayford)"],["krass","a=6378245.0","rf=298.3","Krassovsky, 1942"],["kaula","a=6378163","rf=298.24","Kaula 1961"],["lerch","a=6378139","rf=298.257","Lerch 1979"],["mprts","a=6397300","rf=191","Maupertius 1738"],["new_intl","a=6378157.5","b=6356772.2","New International 1967"],["plessis","a=6376523","b=6355863","Plessis 1817 (France)"],["SEasia","a=6378155.0","b=6356773.3205","Southeast Asia"],["walbeck","a=6376896.0","b=6355834.8467","Walbeck"],["WGS60","a=6378165.0","rf=298.3","WGS 60"],["WGS66","a=6378145.0","rf=298.25","WGS 66"],["WGS72","a=6378135.0","rf=298.26","WGS 72"],["WGS84","a=6378137.0","rf=298.257223563","WGS 84"],["sphere","a=6370997.0","b=6370997.0","Normal Sphere (r=6370997)"],[null,null,null,null]],Ea=[["km","1000","Kilometer"],["m","1","Meter"],["dm","1/10","Decimeter"],["cm","1/100","Centimeter"],["mm","1/1000","Millimeter"],["kmi","1852.0","International Nautical Mile"],["in","0.0254","International Inch"],["ft","0.3048","International Foot"],["yd","0.9144","International Yard"],["mi","1609.344","International Statute Mile"],["fath","1.8288","International Fathom"],["ch","20.1168","International Chain"],["link","0.201168","International Link"],["us-in","1/39.37","U.S. Surveyor's Inch"],["us-ft","0.304800609601219","U.S. Surveyor's Foot"],["us-yd","0.914401828803658","U.S. Surveyor's Yard"],["us-ch","20.11684023368047","U.S. Surveyor's Chain"],["us-mi","1609.347218694437","U.S. Surveyor's Statute Mile"],["ind-yd","0.91439523","Indian Yard"],["ind-ft","0.30479841","Indian Foot"],["ind-ch","20.11669506","Indian Chain"],[null,null,null]],Ga={},Ua=0,Va=1,Xa=4,Ya=8,Za=16;rb.WGS84="+proj=longlat +datum=WGS84",rb.toPoint=function(a){var b={x:a[0],y:a[1]};return a.length>2&&(b.z=a[2]),a.length>3&&(b.m=a[3]),b};var vb=[["aitoff","Aitoff"],["aea","Albers_Conic_Equal_Area"],["aea","Albers"],["aeqd","Azimuthal_Equidistant"],["cass","Cassini_Soldner"],["cass","Cassini"],["cea","Cylindrical_Equal_Area"],["bonne","Bonne"],["eck1","Eckert_I"],["eck2","Eckert_II"],["eck3","Eckert_III"],["eck4","Eckert_IV"],["eck5","Eckert_V"],["eck6","Eckert_VI"],["eqdc","Equidistant_Conic"],["eqc","Equidistant_Cylindrical"],["eqc","Plate_Carree"],["eqc","Equirectangular"],["gall","Gall_Stereographic"],["gnom","Gnomonic"],["lcc","Lambert_Conformal_Conic"],["lcc","Lambert_Conformal_Conic_1SP"],["lcc","Lambert_Conformal_Conic_2SP"],["laea","Lambert_Azimuthal_Equal_Area"],["loxim","Loximuthal"],["merc","Mercator"],["merc","Mercator_1SP"],["merc","Mercator_2SP"],["merc","Mercator_Auxiliary_Sphere"],["mill","Miller_Cylindrical"],["moll","Mollweide"],["nsper","Vertical_Near_Side_Perspective"],["omerc","Hotine_Oblique_Mercator"],["omerc","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],["omerc","Oblique_Mercator"],["omerc","Hotine_Oblique_Mercator_Two_Point_Natural_Origin"],["omerc","Hotine_Oblique_Mercator_Azimuth_Center"],["ortho","Orthographic"],["poly","Polyconic"],["robin","Robinson"],["sinu","Sinusoidal"],["stere","Stereographic"],["stere","Stereographic_North_Pole"],["stere","Stereographic_South_Pole"],["stere","Polar_Stereographic"],["sterea","Double_Stereographic"],["sterea","Oblique_Stereographic"],["tmerc","Transverse_Mercator"],["tpeqd","Two_Point_Equidistant"],["vandg","VanDerGrinten"],["vandg","Van_der_Grinten_I"],["wag1","Wagner_I"],["wag2","Wagner_II"],["wag3","Wagner_III"],["wag4","Wagner_IV"],["wag5","Wagner_V"],["wag6","Wagner_VI"],["wag7","Wagner_VII"],["wink1","Winkel_I"],["wink2","Winkel_II"],["wintri","Winkel_Tripel"],[]],Ab=[["x_0","false_easting"],["y_0","false_northing"],["k_0","scale_factor"],["lon_0","longitude_of_center"],["lat_0","latitude_of_center"],["lat_1","standard_parallel_1"],["lat_2","standard_parallel_2"],["lat_1","latitude_of_point_1"],["lon_1","longitude_of_point_1"],["lon_2","longitude_of_point_2"],["lat_1","latitude_of_point_1"],["lat_2","latitude_of_point_2"],["h","height"]],Bb={central_meridian:"longitude_of_center",latitude_of_origin:"latitude_of_center",longitude_of_1st_point:"longitude_of_point_1",longitude_of_2nd_point:"longitude_of_point_2",latitude_of_1st_point:"latitude_of_point_1",latitude_of_2nd_point:"latitude_of_point_2"},Hb={},Lb=!0;pa(Qb,"aea","Albers Equal Area","\n\tConic Sph&Ell\n\tlat_1= lat_2="),pa(Rb,"leac","Lambert Equal Area Conic","\n\tConic, Sph&Ell\n\tlat_1= south");var $b={};$b.Constants={},$b.Math={},$b.Accumulator={},function(a){a.WGS84={a:6378137,f:1/298.257223563},a.version={major:1,minor:46,patch:0},a.version_string="1.46"}($b.Constants),function(a){a.digits=53,a.epsilon=Math.pow(.5,a.digits-1),a.degree=Math.PI/180,a.sq=function(a){return a*a},a.hypot=function(a,b){var c,d;return a=Math.abs(a),b=Math.abs(b),c=Math.max(a,b),d=Math.min(a,b)/(c?c:1),c*Math.sqrt(1+d*d)},a.cbrt=function(a){var b=Math.pow(Math.abs(a),1/3);return a<0?-b:b},a.log1p=function(a){var b=1+a,c=b-1;return 0===c?a:a*Math.log(b)/c},a.atanh=function(b){var c=Math.abs(b);return c=a.log1p(2*c/(1-c))/2,b<0?-c:c},a.copysign=function(a,b){return Math.abs(a)*(b<0||0===b&&1/b<0?-1:1)},a.sum=function(a,b){var f,c=a+b,d=c-b,e=c-d;return d-=a,e-=b,f=-(d+e),{s:c,t:f}},a.polyval=function(a,b,c,d){for(var e=a<0?0:b[c++];--a>=0;)e=e*d+b[c++];return e},a.AngRound=function(a){if(0===a)return a;var b=1/16,c=Math.abs(a);return c=c<b?b-(b-c):c,a<0?-c:c},a.AngNormalize=function(a){return a%=360,a<-180?a+360:a<180?a:a-360},a.LatFix=function(a){return Math.abs(a)>90?Number.NaN:a},a.AngDiff=function(b,c){var d=a.sum(a.AngNormalize(b),a.AngNormalize(-c)),e=-a.AngNormalize(d.s),f=d.t;return a.sum(180===e&&f<0?-180:e,-f)},a.sincosd=function(a){var b,c,d,e,f,g;switch(b=a%360,c=Math.floor(b/90+.5),b-=90*c,b*=this.degree,d=Math.sin(b),e=Math.cos(b),3&c){case 0:f=d,g=e;break;case 1:f=e,g=0-d;break;case 2:f=0-d,g=0-e;break;default:f=0-e,g=d}return{s:f,c:g}},a.atan2d=function(a,b){var d,e,c=0;switch(Math.abs(a)>Math.abs(b)&&(d=b,b=a,a=d,c=2),b<0&&(b=-b,++c),e=Math.atan2(a,b)/this.degree,c){case 1:e=(a>0?180:-180)-e;break;case 2:e=90-e;break;case 3:e=-90+e}return e}}($b.Math),function(a,b){a.Accumulator=function(a){this.Set(a)},a.Accumulator.prototype.Set=function(b){b||(b=0),b.constructor===a.Accumulator?(this._s=b._s,this._t=b._t):(this._s=b,this._t=0)},a.Accumulator.prototype.Add=function(a){var c=b.sum(a,this._t),d=b.sum(c.s,this._s);c=c.t,this._s=d.s,this._t=d.t,0===this._s?this._s=c:this._t+=c},a.Accumulator.prototype.Sum=function(b){var c;return b?(c=new a.Accumulator(this),c.Add(b),c._s):this._s},a.Accumulator.prototype.Negate=function(){this._s*=-1,this._t*=-1}}($b.Accumulator,$b.Math),$b.Geodesic={},$b.GeodesicLine={},$b.PolygonArea={},function(a,b,c,d,e){var k,l,x,y,z,A,B,C,D,E,F,f=6,g=f,h=f,i=f,j=i,m=20,n=m+d.digits+10,o=d.epsilon,p=200*o,q=Math.sqrt(o),r=o*p,s=1e3*q,t=0,u=31,w=32640;a.tiny_=Math.sqrt(Number.MIN_VALUE),a.nC1_=f,a.nC1p_=f,a.nC2_=f,a.nC3_=f,a.nC4_=f,k=a.nC3_*(a.nC3_-1)/2,l=a.nC4_*(a.nC4_+1)/2,a.CAP_C1=1,a.CAP_C1p=2,a.CAP_C2=4,a.CAP_C3=8,a.CAP_C4=16,a.NONE=0,a.ARC=64,a.LATITUDE=128|t,a.LONGITUDE=256|a.CAP_C3,a.AZIMUTH=512|t,a.DISTANCE=1024|a.CAP_C1,a.STANDARD=a.LATITUDE|a.LONGITUDE|a.AZIMUTH|a.DISTANCE,a.DISTANCE_IN=2048|a.CAP_C1|a.CAP_C1p,a.REDUCEDLENGTH=4096|a.CAP_C1|a.CAP_C2,a.GEODESICSCALE=8192|a.CAP_C1|a.CAP_C2,a.AREA=16384|a.CAP_C4,a.ALL=w|u,a.LONG_UNROLL=32768,a.OUT_MASK=w|a.LONG_UNROLL,a.SinCosSeries=function(a,b,c,d){var e=d.length,f=e-(a?1:0),g=2*(c-b)*(c+b),h=1&f?d[--e]:0,i=0;for(f=Math.floor(f/2);f--;)i=g*h-i+d[--e],h=g*i-h+d[--e];return a?2*b*c*h:c*(h-i)},x=function(a,b){var c,h,i,j,k,l,m,n,o,p,q,r,e=d.sq(a),f=d.sq(b),g=(e+f-1)/6;return 0===f&&g<=0?c=0:(h=e*f/4,i=d.sq(g),j=g*i,k=h*(h+2*j),l=g,k>=0?(m=h+j,m+=m<0?-Math.sqrt(k):Math.sqrt(k),n=d.cbrt(m),l+=n+(0!==n?i/n:0)):(o=Math.atan2(Math.sqrt(-k),-(h+j)),l+=2*g*Math.cos(o/3)),p=Math.sqrt(d.sq(l)+f),q=l<0?f/(p-l):l+p,r=(q-f)/(2*p),c=q/(Math.sqrt(q+d.sq(r))+r)),c},y=[1,4,64,0,256],a.A1m1f=function(a){var b=Math.floor(g/2),c=d.polyval(b,y,0,d.sq(a))/y[b+1];return(c+a)/(1-a)},z=[-1,6,-16,32,-9,64,-128,2048,9,-16,768,3,-5,512,-7,1280,-7,2048],a.C1f=function(b,c){var h,i,e=d.sq(b),f=b,g=0;for(h=1;h<=a.nC1_;++h)i=Math.floor((a.nC1_-h)/2),c[h]=f*d.polyval(i,z,g,e)/z[g+i+1],g+=i+2,f*=b},A=[205,-432,768,1536,4005,-4736,3840,12288,-225,116,384,-7173,2695,7680,3467,7680,38081,61440],a.C1pf=function(b,c){var h,i,e=d.sq(b),f=b,g=0;for(h=1;h<=a.nC1p_;++h)i=Math.floor((a.nC1p_-h)/2),c[h]=f*d.polyval(i,A,g,e)/A[g+i+1],g+=i+2,f*=b},B=[-11,-28,-192,0,256],a.A2m1f=function(a){var b=Math.floor(h/2),c=d.polyval(b,B,0,d.sq(a))/B[b+1];return(c-a)/(1+a)},C=[1,2,16,32,35,64,384,2048,15,80,768,7,35,512,63,1280,77,2048],a.C2f=function(b,c){var h,i,e=d.sq(b),f=b,g=0;for(h=1;h<=a.nC2_;++h)i=Math.floor((a.nC2_-h)/2),c[h]=f*d.polyval(i,C,g,e)/C[g+i+1],g+=i+2,f*=b},a.Geodesic=function(a,b){if(this.a=a,this.f=b,this._f1=1-this.f,this._e2=this.f*(2-this.f),this._ep2=this._e2/d.sq(this._f1),this._n=this.f/(2-this.f),this._b=this.a*this._f1,this._c2=(d.sq(this.a)+d.sq(this._b)*(0===this._e2?1:(this._e2>0?d.atanh(Math.sqrt(this._e2)):Math.atan(Math.sqrt(-this._e2)))/Math.sqrt(Math.abs(this._e2))))/2,this._etol2=.1*q/Math.sqrt(Math.max(.001,Math.abs(this.f))*Math.min(1,1-this.f/2)/2),!(isFinite(this.a)&&this.a>0))throw new Error("Major radius is not positive");if(!(isFinite(this._b)&&this._b>0))throw new Error("Minor radius is not positive");this._A3x=new Array(j),this._C3x=new Array(k),this._C4x=new Array(l),this.A3coeff(),this.C3coeff(),this.C4coeff()},D=[-3,128,-2,-3,64,-1,-3,-1,16,3,-1,-2,8,1,-1,2,1,1],a.Geodesic.prototype.A3coeff=function(){var c,e,a=0,b=0;for(c=i-1;c>=0;--c)e=Math.min(i-c-1,c),this._A3x[b++]=d.polyval(e,D,a,this._n)/D[a+e+1],a+=e+2},E=[3,128,2,5,128,-1,3,3,64,-1,0,1,8,-1,1,4,5,256,1,3,128,-3,-2,3,64,1,-3,2,32,7,512,-10,9,384,5,-9,5,192,7,512,-14,7,512,21,2560],a.Geodesic.prototype.C3coeff=function(){var e,f,g,b=0,c=0;for(e=1;e<a.nC3_;++e)for(f=a.nC3_-1;f>=e;--f)g=Math.min(a.nC3_-f-1,f),this._C3x[c++]=d.polyval(g,E,b,this._n)/E[b+g+1],b+=g+2},F=[97,15015,1088,156,45045,-224,-4784,1573,45045,-10656,14144,-4576,-858,45045,64,624,-4576,6864,-3003,15015,100,208,572,3432,-12012,30030,45045,1,9009,-2944,468,135135,5792,1040,-1287,135135,5952,-11648,9152,-2574,135135,-64,-624,4576,-6864,3003,135135,8,10725,1856,-936,225225,-8448,4992,-1144,225225,-1440,4160,-4576,1716,225225,-136,63063,1024,-208,105105,3584,-3328,1144,315315,-128,135135,-2560,832,405405,128,99099],a.Geodesic.prototype.C4coeff=function(){var e,f,g,b=0,c=0;for(e=0;e<a.nC4_;++e)for(f=a.nC4_-1;f>=e;--f)g=a.nC4_-f-1,this._C4x[c++]=d.polyval(g,F,b,this._n)/F[b+g+1],b+=g+2},a.Geodesic.prototype.A3f=function(a){return d.polyval(j-1,this._A3x,0,a)},a.Geodesic.prototype.C3f=function(b,c){var g,h,e=1,f=0;for(g=1;g<a.nC3_;++g)h=a.nC3_-g-1,e*=b,c[g]=e*d.polyval(h,this._C3x,f,b),f+=h+1},a.Geodesic.prototype.C4f=function(b,c){var g,h,e=1,f=0;for(g=0;g<a.nC4_;++g)h=a.nC4_-g-1,c[g]=e*d.polyval(h,this._C4x,f,b),f+=h+1,e*=b},a.Geodesic.prototype.Lengths=function(b,c,d,e,f,g,h,i,j,k,l,m,n){l&=a.OUT_MASK;var t,u,v,w,x,o={},p=0,q=0,r=0,s=0;if(l&(a.DISTANCE|a.REDUCEDLENGTH|a.GEODESICSCALE)&&(r=a.A1m1f(b),a.C1f(b,m),l&(a.REDUCEDLENGTH|a.GEODESICSCALE)&&(s=a.A2m1f(b),a.C2f(b,n),p=r-s,s=1+s),r=1+r),l&a.DISTANCE)t=a.SinCosSeries(!0,g,h,m)-a.SinCosSeries(!0,d,e,m),o.s12b=r*(c+t),l&(a.REDUCEDLENGTH|a.GEODESICSCALE)&&(u=a.SinCosSeries(!0,g,h,n)-a.SinCosSeries(!0,d,e,n),q=p*c+(r*t-s*u));else if(l&(a.REDUCEDLENGTH|a.GEODESICSCALE)){for(v=1;v<=a.nC2_;++v)n[v]=r*m[v]-s*n[v];q=p*c+(a.SinCosSeries(!0,g,h,n)-a.SinCosSeries(!0,d,e,n))}return l&a.REDUCEDLENGTH&&(o.m0=p,o.m12b=i*(e*g)-f*(d*h)-e*h*q),l&a.GEODESICSCALE&&(w=e*h+d*g,x=this._ep2*(j-k)*(j+k)/(f+i),o.M12=w+(x*g-h*q)*d/f,o.M21=w-(x*d-e*q)*g/i),o},a.Geodesic.prototype.InverseStart=function(b,c,e,f,g,h,i,j,k,l,m){var r,t,u,v,w,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,n={},o=f*c-g*b,q=g*c+f*b;return n.sig12=-1,r=f*c,r+=g*b,t=q>=0&&o<.5&&g*i<.5,t?(v=d.sq(b+f),v/=v+d.sq(c+g),n.dnm=Math.sqrt(1+this._ep2*v),u=i/(this._f1*n.dnm),w=Math.sin(u),y=Math.cos(u)):(w=j,y=k),n.salp1=g*w,n.calp1=y>=0?o+g*b*d.sq(w)/(1+y):r-g*b*d.sq(w)/(1-y),A=d.hypot(n.salp1,n.calp1),B=b*f+c*g*y,t&&A<this._etol2?(n.salp2=c*w,n.calp2=o-c*f*(y>=0?d.sq(w)/(1+y):1-y),z=d.hypot(n.salp2,n.calp2),n.salp2/=z,n.calp2/=z,n.sig12=Math.atan2(A,B)):Math.abs(this._n)>.1||B>=0||A>=6*Math.abs(this._n)*Math.PI*d.sq(c)||(P=Math.atan2(-j,-k),this.f>=0?(G=d.sq(b)*this._ep2,H=G/(2*(1+Math.sqrt(1+G))+G),E=this.f*c*this.A3f(H)*Math.PI,F=E*c,C=P/E,D=r/F):(I=g*c-f*b,J=Math.atan2(r,I),M=this.Lengths(this._n,Math.PI+J,b,-c,e,f,g,h,c,g,a.REDUCEDLENGTH,l,m),K=M.m12b,L=M.m0,C=-1+K/(c*g*L*Math.PI),F=C<-.01?r/C:-this.f*d.sq(c)*Math.PI,E=F/c,D=i/E),D>-p&&C>-1-s?this.f>=0?(n.salp1=Math.min(1,-C),n.calp1=-Math.sqrt(1-d.sq(n.salp1))):(n.calp1=Math.max(C>-p?0:-1,C),n.salp1=Math.sqrt(1-d.sq(n.calp1))):(N=x(C,D),O=E*(this.f>=0?-C*N/(1+N):-D*(1+N)/N),w=Math.sin(O),y=-Math.cos(O),n.salp1=g*w,n.calp1=r-g*b*d.sq(w)/(1-y))),n.salp1<=0?(n.salp1=1,n.calp1=0):(z=d.hypot(n.salp1,n.calp1),n.salp1/=z,n.calp1/=z),n},a.Geodesic.prototype.Lambda12=function(b,c,e,f,g,h,i,j,k,l,m,n,o,p){var r,s,t,u,v,w,x,y,z,A,B,q={};return 0===b&&0===j&&(j=-a.tiny_),s=i*c,t=d.hypot(j,i*b),q.ssig1=b,u=s*b,q.csig1=v=j*c,r=d.hypot(q.ssig1,q.csig1),q.ssig1/=r,q.csig1/=r,q.salp2=g!==c?s/g:i,q.calp2=g!==c||Math.abs(f)!==-b?Math.sqrt(d.sq(j*c)+(c<-b?(g-c)*(c+g):(b-f)*(b+f)))/g:Math.abs(j),q.ssig2=f,w=s*f,q.csig2=x=q.calp2*g,r=d.hypot(q.ssig2,q.csig2),q.ssig2/=r,q.csig2/=r,q.sig12=Math.atan2(Math.max(0,q.csig1*q.ssig2-q.ssig1*q.csig2),q.csig1*q.csig2+q.ssig1*q.ssig2),q.somg12=Math.max(0,v*w-u*x),q.comg12=v*x+u*w,z=Math.atan2(q.somg12*l-q.comg12*k,q.comg12*l+q.somg12*k),A=d.sq(t)*this._ep2,q.eps=A/(2*(1+Math.sqrt(1+A))+A),this.C3f(q.eps,p),y=a.SinCosSeries(!0,q.ssig2,q.csig2,p)-a.SinCosSeries(!0,q.ssig1,q.csig1,p),q.lam12=z-this.f*this.A3f(q.eps)*s*(q.sig12+y),m&&(0===q.calp2?q.dlam12=-2*this._f1*e/b:(B=this.Lengths(q.eps,q.sig12,q.ssig1,q.csig1,e,q.ssig2,q.csig2,h,c,g,a.REDUCEDLENGTH,n,o),q.dlam12=B.m12b,q.dlam12*=this._f1/(q.calp2*g))),q},a.Geodesic.prototype.Inverse=function(b,c,e,f,g){var h,i;return g||(g=a.STANDARD),g===a.LONG_UNROLL&&(g|=a.STANDARD),g&=a.OUT_MASK,h=this.InverseInt(b,c,e,f,g),i=h.vals,g&a.AZIMUTH&&(i.azi1=d.atan2d(h.salp1,h.calp1),i.azi2=d.atan2d(h.salp2,h.calp2)),i},a.Geodesic.prototype.InverseInt=function(b,c,e,f,g){var i,j,k,l,p,q,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,h={};if(h.lat1=b=d.LatFix(b),h.lat2=e=d.LatFix(e),b=d.AngRound(b),e=d.AngRound(e),i=d.AngDiff(c,f),j=i.t,i=i.s,g&a.LONG_UNROLL?(h.lon1=c,h.lon2=c+i+j):(h.lon1=d.AngNormalize(c),h.lon2=d.AngNormalize(f)),k=i>=0?1:-1,i=k*d.AngRound(i),j=d.AngRound(180-i-k*j),A=i*d.degree,l=d.sincosd(i>90?j:i),B=l.s,C=(i>90?-1:1)*l.c,p=Math.abs(b)<Math.abs(e)?-1:1,p<0&&(k*=-1,l=b,b=e,e=l),q=b<0?1:-1,b*=q,e*=q,l=d.sincosd(b),s=this._f1*l.s,t=l.c,l=d.hypot(s,t),s/=l,t/=l,t=Math.max(a.tiny_,t),l=d.sincosd(e),u=this._f1*l.s,v=l.c,l=d.hypot(u,v),u/=l,v/=l,v=Math.max(a.tiny_,v),t<-s?v===t&&(u=u<0?s:-s):Math.abs(u)===-s&&(v=t),y=Math.sqrt(1+this._ep2*d.sq(s)),z=Math.sqrt(1+this._ep2*d.sq(u)),I=new Array(a.nC1_+1),J=new Array(a.nC2_+1),K=new Array(a.nC3_),L=b===-90||0===B,L&&(E=C,F=B,G=1,H=0,N=s,O=E*t,P=u,Q=G*v,D=Math.atan2(Math.max(0,O*P-N*Q),O*Q+N*P),M=this.Lengths(this._n,D,N,O,y,P,Q,z,t,v,g|a.DISTANCE|a.REDUCEDLENGTH,I,J),w=M.s12b,x=M.m12b,0!==(g&a.GEODESICSCALE)&&(h.M12=M.M12,h.M21=M.M21),D<1||x>=0?(D<3*a.tiny_&&(D=x=w=0),x*=this._b,w*=this._b,h.a12=D/d.degree):L=!1),oa=2,!L&&0===s&&(this.f<=0||j>=180*this.f))E=G=0,F=H=1,w=this.a*A,D=S=A/this._f1,x=this._b*Math.sin(D),g&a.GEODESICSCALE&&(h.M12=h.M21=Math.cos(D)),h.a12=i/this._f1;else if(!L)if(M=this.InverseStart(s,t,y,u,v,z,A,B,C,I,J),D=M.sig12,F=M.salp1,E=M.calp1,D>=0)H=M.salp2,G=M.calp2,T=M.dnm,w=D*this._b*T,x=d.sq(T)*this._b*Math.sin(D/T),g&a.GEODESICSCALE&&(h.M12=h.M21=Math.cos(D/T)),h.a12=D/d.degree,S=A/(this._f1*T);else{for(U=0,V=a.tiny_,W=1,X=a.tiny_,Y=-1,Z=!1,$=!1;U<n&&(M=this.Lambda12(s,t,y,u,v,z,F,E,B,C,U<m,I,J,K),_=M.lam12,H=M.salp2,G=M.calp2,D=M.sig12,N=M.ssig1,O=M.csig1,P=M.ssig2,Q=M.csig2,R=M.eps,oa=M.somg12,pa=M.comg12,aa=M.dlam12,!$&&Math.abs(_)>=(Z?8:1)*o);++U)_>0&&(U<m||E/F>Y/X)?(X=F,Y=E):_<0&&(U<m||E/F<W/V)&&(V=F,W=E),U<m&&aa>0&&(ba=-_/aa,ca=Math.sin(ba),da=Math.cos(ba),ea=F*da+E*ca,ea>0&&Math.abs(ba)<Math.PI)?(E=E*da-F*ca,F=ea,l=d.hypot(F,E),F/=l,E/=l,Z=Math.abs(_)<=16*o):(F=(V+X)/2,E=(W+Y)/2,l=d.hypot(F,E),F/=l,E/=l,Z=!1,$=Math.abs(V-F)+(W-E)<r||Math.abs(F-X)+(E-Y)<r);fa=g|(g&(a.REDUCEDLENGTH|a.GEODESICSCALE)?a.DISTANCE:a.NONE),M=this.Lengths(R,D,N,O,y,P,Q,z,t,v,fa,I,J),w=M.s12b,x=M.m12b,0!==(g&a.GEODESICSCALE)&&(h.M12=M.M12,h.M21=M.M21),x*=this._b,w*=this._b,h.a12=D/d.degree}return g&a.DISTANCE&&(h.s12=0+w),g&a.REDUCEDLENGTH&&(h.m12=0+x),g&a.AREA&&(ga=F*t,ha=d.hypot(E,F*s),0!==ha&&0!==ga?(N=s,O=E*t,P=u,Q=G*v,ja=d.sq(ha)*this._ep2,R=ja/(2*(1+Math.sqrt(1+ja))+ja),ka=d.sq(this.a)*ha*ga*this._e2,l=d.hypot(N,O),N/=l,O/=l,l=d.hypot(P,Q),P/=l,Q/=l,la=new Array(a.nC4_),this.C4f(R,la),ma=a.SinCosSeries(!1,N,O,la),na=a.SinCosSeries(!1,P,Q,la),h.S12=ka*(na-ma)):h.S12=0,L||(oa>1?(oa=Math.sin(S),pa=Math.cos(S)):(l=d.hypot(oa,pa),oa/=l,pa/=l)),!L&&S>-.7071&&u-s<1.75?(qa=1+pa,ra=1+t,sa=1+v,ia=2*Math.atan2(oa*(s*sa+u*ra),qa*(s*u+ra*sa))):(ta=H*E-G*F,ua=G*E+H*F,0===ta&&ua<0&&(ta=a.tiny_*E,ua=-1),ia=Math.atan2(ta,ua)),h.S12+=this._c2*ia,h.S12*=p*k*q,h.S12+=0),p<0&&(l=F,F=H,H=l,l=E,E=G,G=l,g&a.GEODESICSCALE&&(l=h.M12,h.M12=h.M21,h.M21=l)),F*=p*k,E*=p*q,H*=p*k,G*=p*q,{vals:h,salp1:F,calp1:E,salp2:H,calp2:G}},a.Geodesic.prototype.GenDirect=function(c,d,e,f,g,h){var i;return h?h===a.LONG_UNROLL&&(h|=a.STANDARD):h=a.STANDARD,f||(h|=a.DISTANCE_IN),i=new b.GeodesicLine(this,c,d,e,h),i.GenPosition(f,g,h)},a.Geodesic.prototype.Direct=function(a,b,c,d,e){return this.GenDirect(a,b,c,!1,d,e)},a.Geodesic.prototype.ArcDirect=function(a,b,c,d,e){return this.GenDirect(a,b,c,!0,d,e)},a.Geodesic.prototype.Line=function(a,c,d,e){return new b.GeodesicLine(this,a,c,d,e)},a.Geodesic.prototype.DirectLine=function(a,b,c,d,e){return this.GenDirectLine(a,b,c,!1,d,e)},a.Geodesic.prototype.ArcDirectLine=function(a,b,c,d,e){return this.GenDirectLine(a,b,c,!0,d,e)},a.Geodesic.prototype.GenDirectLine=function(c,d,e,f,g,h){var i;return h||(h=a.STANDARD|a.DISTANCE_IN),f||(h|=a.DISTANCE_IN),i=new b.GeodesicLine(this,c,d,e,h),i.GenSetDistance(f,g),i},a.Geodesic.prototype.InverseLine=function(c,e,f,g,h){var i,j,k;return h||(h=a.STANDARD|a.DISTANCE_IN),i=this.InverseInt(c,e,f,g,a.ARC),k=d.atan2d(i.salp1,i.calp1),h&(a.OUT_MASK&a.DISTANCE_IN)&&(h|=a.DISTANCE),j=new b.GeodesicLine(this,c,e,k,h,i.salp1,i.calp1),j.SetArc(i.vals.a12),j},a.Geodesic.prototype.Polygon=function(a){return new c.PolygonArea(this,a)},a.WGS84=new a.Geodesic(e.WGS84.a,e.WGS84.f)}($b.Geodesic,$b.GeodesicLine,$b.PolygonArea,$b.Math,$b.Constants),function(a,b,c){b.GeodesicLine=function(b,d,e,f,g,h,i){var j,k,l,m,n,o;g||(g=a.STANDARD|a.DISTANCE_IN),this.a=b.a,this.f=b.f,this._b=b._b,this._c2=b._c2,this._f1=b._f1,this.caps=g|a.LATITUDE|a.AZIMUTH|a.LONG_UNROLL,this.lat1=c.LatFix(d),this.lon1=e,"undefined"==typeof h||"undefined"==typeof i?(this.azi1=c.AngNormalize(f),j=c.sincosd(c.AngRound(this.azi1)),this.salp1=j.s,this.calp1=j.c):(this.azi1=f,this.salp1=h,this.calp1=i),j=c.sincosd(c.AngRound(this.lat1)),l=this._f1*j.s,k=j.c,j=c.hypot(l,k),l/=j,k/=j,k=Math.max(a.tiny_,k),this._dn1=Math.sqrt(1+b._ep2*c.sq(l)),this._salp0=this.salp1*k,this._calp0=c.hypot(this.calp1,this.salp1*l),this._ssig1=l,this._somg1=this._salp0*l,this._csig1=this._comg1=0!==l||0!==this.calp1?k*this.calp1:1,j=c.hypot(this._ssig1,this._csig1),this._ssig1/=j,this._csig1/=j,this._k2=c.sq(this._calp0)*b._ep2,m=this._k2/(2*(1+Math.sqrt(1+this._k2))+this._k2),this.caps&a.CAP_C1&&(this._A1m1=a.A1m1f(m),this._C1a=new Array(a.nC1_+1),a.C1f(m,this._C1a),this._B11=a.SinCosSeries(!0,this._ssig1,this._csig1,this._C1a),n=Math.sin(this._B11),o=Math.cos(this._B11),this._stau1=this._ssig1*o+this._csig1*n,this._ctau1=this._csig1*o-this._ssig1*n),this.caps&a.CAP_C1p&&(this._C1pa=new Array(a.nC1p_+1),a.C1pf(m,this._C1pa)),this.caps&a.CAP_C2&&(this._A2m1=a.A2m1f(m),this._C2a=new Array(a.nC2_+1),a.C2f(m,this._C2a),this._B21=a.SinCosSeries(!0,this._ssig1,this._csig1,this._C2a)),this.caps&a.CAP_C3&&(this._C3a=new Array(a.nC3_),b.C3f(m,this._C3a),this._A3c=-this.f*this._salp0*b.A3f(m),this._B31=a.SinCosSeries(!0,this._ssig1,this._csig1,this._C3a)),this.caps&a.CAP_C4&&(this._C4a=new Array(a.nC4_),b.C4f(m,this._C4a),this._A4=c.sq(this.a)*this._calp0*this._salp0*b._e2,this._B41=a.SinCosSeries(!1,this._ssig1,this._csig1,this._C4a)),this.a13=this.s13=Number.NaN},b.GeodesicLine.prototype.GenPosition=function(b,d,e){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,f={};return e?e===a.LONG_UNROLL&&(e|=a.STANDARD):e=a.STANDARD,e&=this.caps&a.OUT_MASK,f.lat1=this.lat1,f.azi1=this.azi1,f.lon1=e&a.LONG_UNROLL?this.lon1:c.AngNormalize(this.lon1),b?f.a12=d:f.s12=d,b||this.caps&a.DISTANCE_IN&a.OUT_MASK?(j=0,k=0,b?(g=d*c.degree,F=c.sincosd(d),h=F.s,i=F.c):(n=d/(this._b*(1+this._A1m1)),o=Math.sin(n),p=Math.cos(n),j=-a.SinCosSeries(!0,this._stau1*p+this._ctau1*o,this._ctau1*p-this._stau1*o,this._C1pa),g=n-(j-this._B11),h=Math.sin(g),i=Math.cos(g),Math.abs(this.f)>.01&&(l=this._ssig1*i+this._csig1*h,m=this._csig1*i-this._ssig1*h,j=a.SinCosSeries(!0,l,m,this._C1a),q=(1+this._A1m1)*(g+(j-this._B11))-d/this._b,g-=q/Math.sqrt(1+this._k2*c.sq(l)),h=Math.sin(g),i=Math.cos(g))),l=this._ssig1*i+this._csig1*h,m=this._csig1*i-this._ssig1*h,B=Math.sqrt(1+this._k2*c.sq(l)),e&(a.DISTANCE|a.REDUCEDLENGTH|a.GEODESICSCALE)&&((b||Math.abs(this.f)>.01)&&(j=a.SinCosSeries(!0,l,m,this._C1a)),k=(1+this._A1m1)*(j-this._B11)),v=this._calp0*l,w=c.hypot(this._salp0,this._calp0*m),0===w&&(w=m=a.tiny_),z=this._salp0,A=this._calp0*m,b&&e&a.DISTANCE&&(f.s12=this._b*((1+this._A1m1)*g+k)),e&a.LONGITUDE&&(x=this._salp0*l,y=m,u=c.copysign(1,this._salp0),r=e&a.LONG_UNROLL?u*(g-(Math.atan2(l,m)-Math.atan2(this._ssig1,this._csig1))+(Math.atan2(u*x,y)-Math.atan2(u*this._somg1,this._comg1))):Math.atan2(x*this._comg1-y*this._somg1,y*this._comg1+x*this._somg1),s=r+this._A3c*(g+(a.SinCosSeries(!0,l,m,this._C3a)-this._B31)),t=s/c.degree,f.lon2=e&a.LONG_UNROLL?this.lon1+t:c.AngNormalize(c.AngNormalize(this.lon1)+c.AngNormalize(t))),e&a.LATITUDE&&(f.lat2=c.atan2d(v,this._f1*w)),e&a.AZIMUTH&&(f.azi2=c.atan2d(z,A)),e&(a.REDUCEDLENGTH|a.GEODESICSCALE)&&(C=a.SinCosSeries(!0,l,m,this._C2a),D=(1+this._A2m1)*(C-this._B21),E=(this._A1m1-this._A2m1)*g+(k-D),e&a.REDUCEDLENGTH&&(f.m12=this._b*(B*(this._csig1*l)-this._dn1*(this._ssig1*m)-this._csig1*m*E)),e&a.GEODESICSCALE&&(F=this._k2*(l-this._ssig1)*(l+this._ssig1)/(this._dn1+B),f.M12=i+(F*l-m*E)*this._ssig1/this._dn1,f.M21=i-(F*this._ssig1-this._csig1*E)*l/B)),e&a.AREA&&(G=a.SinCosSeries(!1,l,m,this._C4a),0===this._calp0||0===this._salp0?(H=z*this.calp1-A*this.salp1,I=A*this.calp1+z*this.salp1):(H=this._calp0*this._salp0*(i<=0?this._csig1*(1-i)+h*this._ssig1:h*(this._csig1*h/(1+i)+this._ssig1)),I=c.sq(this._salp0)+c.sq(this._calp0)*this._csig1*m),f.S12=this._c2*Math.atan2(H,I)+this._A4*(G-this._B41)),b||(f.a12=g/c.degree),f):(f.a12=Number.NaN,f)},b.GeodesicLine.prototype.Position=function(a,b){return this.GenPosition(!1,a,b)},b.GeodesicLine.prototype.ArcPosition=function(a,b){return this.GenPosition(!0,a,b)},b.GeodesicLine.prototype.GenSetDistance=function(a,b){a?this.SetArc(b):this.SetDistance(b)},b.GeodesicLine.prototype.SetDistance=function(b){var c;this.s13=b,c=this.GenPosition(!1,this.s13,a.ARC),this.a13=0+c.a12},b.GeodesicLine.prototype.SetArc=function(b){var c;this.a13=b,c=this.GenPosition(!0,this.a13,a.DISTANCE),this.s13=0+c.s12}}($b.Geodesic,$b.GeodesicLine,$b.Math),pa(_b,"aeqd","Azimuthal Equidistant","\n\tAzi, Sph&Ell\n\tlat_0 guam"),pa(ac,"airy","Airy","\n\tMisc Sph, no inv.\n\tno_cut lat_b="),pa(bc,"wintri","Winkel Tripel","\n\tMisc Sph\n\tlat_1"),pa(cc,"aitoff","Aitoff","\n\tMisc Sph"),pa(dc,"boggs","Boggs Eumorphic","\n\tPCyl., no inv., Sph."),pa(ec,"bonne","Bonne (Werner lat_1=90)","\n\tConic Sph&Ell\n\tlat_1="),pa(fc,"cass","Cassini","\n\tCyl, Sph&Ell"),pa(ic,"cea","Equal Area Cylindrical","\n\tCyl, Sph&Ell\n\tlat_ts="),pa(jc,"chamb","Chamberlin Trimetric","\n\tMisc Sph, no inv.\n\tlat_1= lon_1= lat_2= lon_2= lat_3= lon_3="),pa(kc,"eck1","Eckert I","\n\tPCyl Sph"),pa(lc,"eck2","Eckert II","\n\tPCyl Sph"),pa(mc,"eck3","Eckert III","\n\tPCyl Sph"),pa(oc,"wag6","Wagner VI","\n\tPCyl Sph"),pa(nc,"kav7","Kavraisky VII","\n\tPCyl Sph"),pa(pc,"putp1","Putnins P1","\n\tPCyl Sph"),pa(rc,"eck4","Eckert IV","\n\tPCyl Sph"),pa(sc,"eck5","Eckert V","\n\tPCyl Sph"),pa(tc,"eqc","Equidistant Cylindrical (Plate Caree)","\n\tCyl, Sph\n\tlat_ts=[, lat_0=0]"),pa(uc,"eqdc","Equidistant Conic","\n\tConic, Sph&Ell\n\tlat_1= lat_2="),pa(wc,"etmerc","Extended Transverse Mercator","\n\tCyl, Sph\n\tlat_ts=(0)\nlat_0=(0)"),pa(vc,"utm","Universal Transverse Mercator (UTM)","\n\tCyl, Sph\n\tzone= south"),pa(xc,"gall","Gall (Gall Stereographic)","\n\tCyl, Sph"),pa(yc,"geocent","Geocentric","\n\t"),pa(zc,"gilbert","Gilbert Two World Perspective","\n\tPCyl., Sph., NoInv.\n\tlat_1="),pa(Ac,"gn_sinu","General Sinusoidal Series","\n\tPCyl, Sph.\n\tm= n="),pa(Bc,"sinu","Sinusoidal (Sanson-Flamsteed)","\n\tPCyl, Sph&Ell"),pa(Cc,"eck6","Eckert VI","\n\tPCyl, Sph.\n\tm= n="),pa(Dc,"mbtfps","McBryde-Thomas Flat-Polar Sinusoidal","\n\tPCyl, Sph."),pa(Fc,"gnom","Gnomonic","\n\tAzi, Sph."),pa(Gc,"laea","Lambert Azimuthal Equal Area","\n\tAzi, Sph&Ell"),pa(Hc,"lonlat","Lat/long (Geodetic)","\n\t"),pa(Hc,"longlat","Lat/long (Geodetic alias)","\n\t"),pa(Ic,"latlon","Lat/long (Geodetic alias)","\n\t"),pa(Ic,"latlong","Lat/long (Geodetic alias)","\n\t"),pa(Lc,"lcc","Lambert Conformal Conic","\n\tConic, Sph&Ell\n\tlat_1= and lat_2= or lat_0="),pa(Mc,"loxim","Loximuthal","\n\tPCyl Sph"),pa(Oc,"merc","Mercator","\n\tCyl, Sph&Ell\n\tlat_ts="),pa(Pc,"mill","Miller Cylindrical","\n\tCyl, Sph"),pa(Qc,"moll","Mollweide","\n\tPCyl Sph"),pa(Rc,"wag4","Wagner IV","\n\tPCyl Sph"),pa(Sc,"wag5","Wagner V","\n\tPCyl Sph"),
pa(Vc,"natearth","Natural Earth","\n\tPCyl., Sph."),pa(Wc,"natearth2","Natural Earth 2","\n\tPCyl., Sph."),pa(Xc,"nell_h","Nell-Hammer","\n\tPCyl., Sph."),pa(Yc,"nsper","Near-sided perspective","\n\tAzi, Sph\n\th="),pa(Zc,"tpers","Tilted perspective","\n\tAzi, Sph\n\ttilt= azi= h="),pa(_c,"ocea","Oblique Cylindrical Equal Area","\n\tCyl, Sph lonc= alpha= or\n\tlat_1= lat_2= lon_1= lon_2="),pa(ad,"omerc","Oblique Mercator","\n\tCyl, Sph&Ell no_rot\n\talpha= [gamma=] [no_off] lonc= or\n\t lon_1= lat_1= lon_2= lat_2="),pa(bd,"ortho","Orthographic","\n\tAzi, Sph."),pa(cd,"poly","Polyconic (American)","\n\tConic, Sph&Ell"),pa(dd,"robin","Robinson","\n\tPCyl., Sph."),pa(fd,"stere","Stereographic","\n\tAzi, Sph&Ell\n\tlat_ts="),pa(ed,"ups","Universal Polar Stereographic","\n\tAzi, Sph&Ell\n\tsouth"),pa(ld,"sterea","Oblique Stereographic Alternative","\n\tAzimuthal, Sph&Ell"),pa(md,"tcea","Transverse Cylindrical Equal Area","\n\tCyl, Sph"),pa(nd,"times","Times","\n\tCyl, Sph"),pa(od,"tmerc","Transverse Mercator","\n\tCyl, Sph&Ell"),pa(pd,"tpeqd","Two Point Equidistant","\n\tMisc Sph\n\tlat_1= lon_1= lat_2= lon_2="),pa(rd,"urmfps","Urmaev Flat-Polar Sinusoidal","\n\tPCyl, Sph.\n\tn="),pa(qd,"wag1","Wagner I (Kavraisky VI)","\n\tPCyl, Sph."),pa(td,"vandg","van der Grinten (I)","\n\tMisc Sph"),pa(ud,"vandg2","van der Grinten II","\n\tMisc Sph, no inv."),pa(vd,"vandg3","van der Grinten III","\n\tMisc Sph, no inv."),pa(xd,"vandg4","van der Grinten IV","\n\tMisc Sph, no inv."),pa(yd,"wag2","Wagner II","\n\tPCyl., Sph."),pa(zd,"wag3","Wagner III","\n\tPCyl., Sph.\n\tlat_ts="),pa(Ad,"wag7","Wagner VII","\n\tMisc Sph, no inv."),pa(Bd,"wink1","Winkel I","\n\tPCyl., Sph.\n\tlat_ts="),pa(Cd,"wink2","Winkel II","\n\tPCyl., Sph., no inv.\n\tlat_1=");var Dd=rb;Dd.pj_init=La,Dd.pj_fwd=mb,Dd.pj_fwd_deg=lb,Dd.pj_inv=ob,Dd.pj_inv_deg=nb,Dd.pj_transform=cb,Dd.pj_transform_point=bb,Dd.internal={dmstod:ia,dmstor:ha,get_rtodms:pb,get_dtodms:qb,get_proj_defn:ua,pj_latlong_from_proj:sa,pj_get_params:ma,pj_datums:wa,pj_list:oa,pj_ellps:Ba,pj_units:Ea,pj_read_opts:Ka,find_datum:za,DEG_TO_RAD:z,RAD_TO_DEG:y,wkt_parse:Ib,wkt_to_proj4:Mb},"function"==typeof define&&define.amd?define("mproj",Dd):"object"==typeof c?b.exports=Dd:this.mproj=Dd}()}).call(this,"/../../../../../../../../../../usr/local/lib/node_modules/mapshaper/node_modules/mproj/dist")},{fs:2,path:13}],54:[function(a,b,c){!function(){"use strict";function a(b,c){return this instanceof a?(this._maxEntries=Math.max(4,b||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),c&&this._initFormat(c),void this.clear()):new a(b,c)}function c(a,b){a.bbox=d(a,0,a.children.length,b)}function d(a,b,c,d){for(var i,g=e(),h=b;h<c;h++)i=a.children[h],f(g,a.leaf?d(i):i.bbox);return g}function e(){return[1/0,1/0,-(1/0),-(1/0)]}function f(a,b){return a[0]=Math.min(a[0],b[0]),a[1]=Math.min(a[1],b[1]),a[2]=Math.max(a[2],b[2]),a[3]=Math.max(a[3],b[3]),a}function g(a,b){return a.bbox[0]-b.bbox[0]}function h(a,b){return a.bbox[1]-b.bbox[1]}function i(a){return(a[2]-a[0])*(a[3]-a[1])}function j(a){return a[2]-a[0]+(a[3]-a[1])}function k(a,b){return(Math.max(b[2],a[2])-Math.min(b[0],a[0]))*(Math.max(b[3],a[3])-Math.min(b[1],a[1]))}function l(a,b){var c=Math.max(a[0],b[0]),d=Math.max(a[1],b[1]),e=Math.min(a[2],b[2]),f=Math.min(a[3],b[3]);return Math.max(0,e-c)*Math.max(0,f-d)}function m(a,b){return a[0]<=b[0]&&a[1]<=b[1]&&b[2]<=a[2]&&b[3]<=a[3]}function n(a,b){return b[0]<=a[2]&&b[1]<=a[3]&&b[2]>=a[0]&&b[3]>=a[1]}function o(a,b,c,d,e){for(var g,f=[b,c];f.length;)c=f.pop(),b=f.pop(),c-b<=d||(g=b+Math.ceil((c-b)/d/2)*d,p(a,b,c,g,e),f.push(b,g,g,c))}function p(a,b,c,d,e){for(var f,g,h,i,j,k,l,m,n;c>b;){for(c-b>600&&(f=c-b+1,g=d-b+1,h=Math.log(f),i=.5*Math.exp(2*h/3),j=.5*Math.sqrt(h*i*(f-i)/f)*(g-f/2<0?-1:1),k=Math.max(b,Math.floor(d-g*i/f+j)),l=Math.min(c,Math.floor(d+(f-g)*i/f+j)),p(a,k,l,d,e)),m=a[d],g=b,n=c,q(a,b,d),e(a[c],m)>0&&q(a,b,c);g<n;){for(q(a,g,n),g++,n--;e(a[g],m)<0;)g++;for(;e(a[n],m)>0;)n--}0===e(a[b],m)?q(a,b,n):(n++,q(a,n,c)),n<=d&&(b=n+1),d<=n&&(c=n-1)}}function q(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}a.prototype={all:function(){return this._all(this.data,[])},search:function(a){var b=this.data,c=[],d=this.toBBox;if(!n(a,b.bbox))return c;for(var f,g,h,i,e=[];b;){for(f=0,g=b.children.length;f<g;f++)h=b.children[f],i=b.leaf?d(h):h.bbox,n(a,i)&&(b.leaf?c.push(h):m(a,i)?this._all(h,c):e.push(h));b=e.pop()}return c},collides:function(a){var b=this.data,c=this.toBBox;if(!n(a,b.bbox))return!1;for(var e,f,g,h,d=[];b;){for(e=0,f=b.children.length;e<f;e++)if(g=b.children[e],h=b.leaf?c(g):g.bbox,n(a,h)){if(b.leaf||m(a,h))return!0;d.push(g)}b=d.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var b=0,c=a.length;b<c;b++)this.insert(a[b]);return this}var d=this._build(a.slice(),0,a.length-1,0);if(this.data.children.length)if(this.data.height===d.height)this._splitRoot(this.data,d);else{if(this.data.height<d.height){var e=this.data;this.data=d,d=e}this._insert(d,this.data.height-d.height-1,!0)}else this.data=d;return this},insert:function(a){return a&&this._insert(a,this.data.height-1),this},clear:function(){return this.data={children:[],height:1,bbox:e(),leaf:!0},this},remove:function(a){if(!a)return this;for(var f,g,h,i,b=this.data,c=this.toBBox(a),d=[],e=[];b||d.length;){if(b||(b=d.pop(),g=d[d.length-1],f=e.pop(),i=!0),b.leaf&&(h=b.children.indexOf(a),h!==-1))return b.children.splice(h,1),d.push(b),this._condense(d),this;i||b.leaf||!m(b.bbox,c)?g?(f++,b=g.children[f],i=!1):b=null:(d.push(b),e.push(f),f=0,g=b,b=b.children[0])}return this},toBBox:function(a){return a},compareMinX:function(a,b){return a[0]-b[0]},compareMinY:function(a,b){return a[1]-b[1]},toJSON:function(){return this.data},fromJSON:function(a){return this.data=a,this},_all:function(a,b){for(var c=[];a;)a.leaf?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},_build:function(a,b,d,e){var h,f=d-b+1,g=this._maxEntries;if(f<=g)return h={children:a.slice(b,d+1),height:1,bbox:null,leaf:!0},c(h,this.toBBox),h;e||(e=Math.ceil(Math.log(f)/Math.log(g)),g=Math.ceil(f/Math.pow(g,e-1))),h={children:[],height:e,bbox:null,leaf:!1};var k,l,m,n,i=Math.ceil(f/g),j=i*Math.ceil(Math.sqrt(g));for(o(a,b,d,j,this.compareMinX),k=b;k<=d;k+=j)for(m=Math.min(k+j-1,d),o(a,k,m,i,this.compareMinY),l=k;l<=m;l+=i)n=Math.min(l+i-1,m),h.children.push(this._build(a,l,n,e-1));return c(h,this.toBBox),h},_chooseSubtree:function(a,b,c,d){for(var e,f,g,h,j,l,m,n;;){if(d.push(b),b.leaf||d.length-1===c)break;for(m=n=1/0,e=0,f=b.children.length;e<f;e++)g=b.children[e],j=i(g.bbox),l=k(a,g.bbox)-j,l<n?(n=l,m=j<m?j:m,h=g):l===n&&j<m&&(m=j,h=g);b=h||b.children[0]}return b},_insert:function(a,b,c){var d=this.toBBox,e=c?a.bbox:d(a),g=[],h=this._chooseSubtree(e,this.data,b,g);for(h.children.push(a),f(h.bbox,e);b>=0&&g[b].children.length>this._maxEntries;)this._split(g,b),b--;this._adjustParentBBoxes(e,g,b)},_split:function(a,b){var d=a[b],e=d.children.length,f=this._minEntries;this._chooseSplitAxis(d,f,e);var g=this._chooseSplitIndex(d,f,e),h={children:d.children.splice(g,d.children.length-g),height:d.height,bbox:null,leaf:!1};d.leaf&&(h.leaf=!0),c(d,this.toBBox),c(h,this.toBBox),b?a[b-1].children.push(h):this._splitRoot(d,h)},_splitRoot:function(a,b){this.data={children:[a,b],height:a.height+1,bbox:null,leaf:!1},c(this.data,this.toBBox)},_chooseSplitIndex:function(a,b,c){var e,f,g,h,j,k,m,n;for(k=m=1/0,e=b;e<=c-b;e++)f=d(a,0,e,this.toBBox),g=d(a,e,c,this.toBBox),h=l(f,g),j=i(f)+i(g),h<k?(k=h,n=e,m=j<m?j:m):h===k&&j<m&&(m=j,n=e);return n},_chooseSplitAxis:function(a,b,c){var d=a.leaf?this.compareMinX:g,e=a.leaf?this.compareMinY:h,f=this._allDistMargin(a,b,c,d),i=this._allDistMargin(a,b,c,e);f<i&&a.children.sort(d)},_allDistMargin:function(a,b,c,e){a.children.sort(e);var l,m,g=this.toBBox,h=d(a,0,b,g),i=d(a,c-b,c,g),k=j(h)+j(i);for(l=b;l<c-b;l++)m=a.children[l],f(h,a.leaf?g(m):m.bbox),k+=j(h);for(l=c-b-1;l>=b;l--)m=a.children[l],f(i,a.leaf?g(m):m.bbox),k+=j(i);return k},_adjustParentBBoxes:function(a,b,c){for(var d=c;d>=0;d--)f(b[d].bbox,a)},_condense:function(a){for(var d,b=a.length-1;b>=0;b--)0===a[b].children.length?b>0?(d=a[b-1].children,d.splice(d.indexOf(a[b]),1)):this.clear():c(a[b],this.toBBox)},_initFormat:function(a){var b=["return a"," - b",";"];this.compareMinX=new Function("a","b",b.join(a[0])),this.compareMinY=new Function("a","b",b.join(a[1])),this.toBBox=new Function("a","return [a"+a.join(", a")+"];")}},"function"==typeof define&&define.amd?define("rbush",function(){return a}):"undefined"!=typeof b?b.exports=a:"undefined"!=typeof self?self.rbush=a:window.rbush=a}()},{}],55:[function(a,b,c){c.dash=a("./lib/rw/dash"),c.readFile=a("./lib/rw/read-file"),c.readFileSync=a("./lib/rw/read-file-sync"),c.writeFile=a("./lib/rw/write-file"),c.writeFileSync=a("./lib/rw/write-file-sync")},{"./lib/rw/dash":56,"./lib/rw/read-file":60,"./lib/rw/read-file-sync":59,"./lib/rw/write-file":62,"./lib/rw/write-file-sync":61}],56:[function(a,b,c){function e(a,b){return function(c){var e=arguments;return"-"==c&&(e=d.call(e)).splice(0,1,b),a.apply(null,e)}}var d=Array.prototype.slice;c.readFile=e(a("./read-file"),"/dev/stdin"),c.readFileSync=e(a("./read-file-sync"),"/dev/stdin"),c.writeFile=e(a("./write-file"),"/dev/stdout"),c.writeFileSync=e(a("./write-file-sync"),"/dev/stdout")},{"./read-file":60,"./read-file-sync":59,"./write-file":62,"./write-file-sync":61}],57:[function(a,b,c){(function(a){function c(){var b=[];return{push:function(a){b.push(a)},value:function(){return a.concat(b)}}}function d(b){var c=[];return{push:function(a){c.push(a)},value:function(){return a.concat(c).toString(b)}}}b.exports=function(a){if(a){if("string"==typeof a)return d(a);if(null!==a.encoding)return d(a.encoding)}return c()}}).call(this,a("buffer").Buffer)},{buffer:6}],58:[function(a,b,c){(function(a){b.exports=function(b,c){return"string"==typeof b?new a(b,"string"==typeof c?c:c&&null!==c.encoding?c.encoding:"utf8"):b}}).call(this,a("buffer").Buffer)},{buffer:6}],59:[function(a,b,c){(function(c){var d=a("fs"),e=a("./decode");b.exports=function(a,b){if(d.statSync(a).isFile())return d.readFileSync(a,b);for(var g=d.openSync(a,b&&b.flag||"r"),h=e(b);;){try{var i=new c(f),j=d.readSync(g,i,0,f)}catch(a){if("EOF"===a.code)break;throw d.closeSync(g),a}if(0===j)break;h.push(i.slice(0,j))}return d.closeSync(g),h.value()};var f=65536}).call(this,a("buffer").Buffer)},{"./decode":57,buffer:6,fs:2}],60:[function(a,b,c){(function(c){var d=a("fs"),e=a("./decode");b.exports=function(a,b,f){arguments.length<3&&(f=b,b=null),d.stat(a,function(g,h){if(g)return f(g);if(h.isFile())d.readFile(a,b,f);else{var j,i=e(b);switch(a){case"/dev/stdin":j=c.stdin;break;default:j=d.createReadStream(a,b?{flags:b.flag||"r"}:{})}j.on("error",f).on("data",function(a){i.push(a)}).on("end",function(){f(null,i.value())})}})}}).call(this,a("_process"))},{"./decode":57,_process:15,fs:2}],61:[function(a,b,c){var d=a("fs"),e=a("./encode");b.exports=function(a,b,c){var f;try{f=d.statSync(a)}catch(a){if("ENOENT"!==a.code)throw a}if(!f||f.isFile())d.writeFileSync(a,b,c);else{for(var g=d.openSync(a,c&&c.flag||"w"),h=0,i=(b=e(b,c)).length;h<i;)try{h+=d.writeSync(g,b,h,i-h,null)}catch(a){if("EPIPE"===a.code)break;throw d.closeSync(g),a}d.closeSync(g)}}},{"./encode":58,fs:2}],62:[function(a,b,c){(function(c){var d=a("fs"),e=a("./encode");b.exports=function(a,b,f,g){arguments.length<4&&(g=f,f=null),d.stat(a,function(h,i){if(h&&"ENOENT"!==h.code)return g(h);if(i&&i.isFile())d.writeFile(a,b,f,g);else{var j,k="end";switch(a){case"/dev/stdout":j=c.stdout,k="write";break;case"/dev/stderr":j=c.stderr,k="write";break;default:j=d.createWriteStream(a,f?{flags:f.flag||"w"}:{})}j.on("error",function(a){g("EPIPE"===a.code?null:a)})[k](e(b,f),function(a){g(a&&"EPIPE"===a.code?null:a)})}})}}).call(this,a("_process"))},{"./encode":58,_process:15,fs:2}]},{},[1]);